"use strict";(()=>{var Ne=Object.create;var yt=Object.defineProperty;var Bt=Object.getOwnPropertyDescriptor;var we=Object.getOwnPropertyNames;var ve=Object.getPrototypeOf,Ae=Object.prototype.hasOwnProperty;var Ce=(o,t)=>()=>(t||o((t={exports:{}}).exports,t),t.exports);var Ee=(o,t,e,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of we(t))!Ae.call(o,n)&&n!==e&&yt(o,n,{get:()=>t[n],enumerable:!(i=Bt(t,n))||i.enumerable});return o};var Oe=(o,t,e)=>(e=o!=null?Ne(ve(o)):{},Ee(t||!o||!o.__esModule?yt(e,"default",{value:o,enumerable:!0}):e,o));var B=(o,t,e,i)=>{for(var n=i>1?void 0:i?Bt(t,e):t,s=o.length-1,a;s>=0;s--)(a=o[s])&&(n=(i?a(t,e,n):a(n))||n);return i&&n&&yt(t,e,n),n};var $t=Ce(()=>{var Ut;(function(o){(function(t){var e=typeof globalThis=="object"?globalThis:typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:c(),i=n(o);typeof e.Reflect<"u"&&(i=n(e.Reflect,i)),t(i,e),typeof e.Reflect>"u"&&(e.Reflect=o);function n(h,f){return function(S,M){Object.defineProperty(h,S,{configurable:!0,writable:!0,value:M}),f&&f(S,M)}}function s(){try{return Function("return this;")()}catch{}}function a(){try{return(0,eval)("(function() { return this; })()")}catch{}}function c(){return s()||a()}})(function(t,e){var i=Object.prototype.hasOwnProperty,n=typeof Symbol=="function",s=n&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",a=n&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",c=typeof Object.create=="function",h={__proto__:[]}instanceof Array,f=!c&&!h,S={create:c?function(){return bt(Object.create(null))}:h?function(){return bt({__proto__:null})}:function(){return bt({})},has:f?function(u,l){return i.call(u,l)}:function(u,l){return l in u},get:f?function(u,l){return i.call(u,l)?u[l]:void 0}:function(u,l){return u[l]}},M=Object.getPrototypeOf(Function),C=typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:de(),T=typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:be(),I=typeof WeakMap=="function"?WeakMap:ye(),N=n?Symbol.for("@reflect-metadata:registry"):void 0,E=he(),k=pe(E);function j(u,l,m,p){if(A(m)){if(!kt(u))throw new TypeError;if(!Pt(l))throw new TypeError;return oe(u,l)}else{if(!kt(u))throw new TypeError;if(!P(l))throw new TypeError;if(!P(p)&&!A(p)&&!et(p))throw new TypeError;return et(p)&&(p=void 0),m=Z(m),se(u,l,m,p)}}t("decorate",j);function G(u,l){function m(p,w){if(!P(p))throw new TypeError;if(!A(w)&&!fe(w))throw new TypeError;Ft(u,l,p,w)}return m}t("metadata",G);function z(u,l,m,p){if(!P(m))throw new TypeError;return A(p)||(p=Z(p)),Ft(u,l,m,p)}t("defineMetadata",z);function Y(u,l,m){if(!P(l))throw new TypeError;return A(m)||(m=Z(m)),Et(u,l,m)}t("hasMetadata",Y);function X(u,l,m){if(!P(l))throw new TypeError;return A(m)||(m=Z(m)),pt(u,l,m)}t("hasOwnMetadata",X);function te(u,l,m){if(!P(l))throw new TypeError;return A(m)||(m=Z(m)),Ot(u,l,m)}t("getMetadata",te);function ee(u,l,m){if(!P(l))throw new TypeError;return A(m)||(m=Z(m)),Vt(u,l,m)}t("getOwnMetadata",ee);function re(u,l){if(!P(u))throw new TypeError;return A(l)||(l=Z(l)),It(u,l)}t("getMetadataKeys",re);function ie(u,l){if(!P(u))throw new TypeError;return A(l)||(l=Z(l)),Tt(u,l)}t("getOwnMetadataKeys",ie);function ne(u,l,m){if(!P(l))throw new TypeError;if(A(m)||(m=Z(m)),!P(l))throw new TypeError;A(m)||(m=Z(m));var p=ut(l,m,!1);return A(p)?!1:p.OrdinaryDeleteMetadata(u,l,m)}t("deleteMetadata",ne);function oe(u,l){for(var m=u.length-1;m>=0;--m){var p=u[m],w=p(l);if(!A(w)&&!et(w)){if(!Pt(w))throw new TypeError;l=w}}return l}function se(u,l,m,p){for(var w=u.length-1;w>=0;--w){var L=u[w],D=L(l,m,p);if(!A(D)&&!et(D)){if(!P(D))throw new TypeError;p=D}}return p}function Et(u,l,m){var p=pt(u,l,m);if(p)return!0;var w=dt(l);return et(w)?!1:Et(u,w,m)}function pt(u,l,m){var p=ut(l,m,!1);return A(p)?!1:qt(p.OrdinaryHasOwnMetadata(u,l,m))}function Ot(u,l,m){var p=pt(u,l,m);if(p)return Vt(u,l,m);var w=dt(l);if(!et(w))return Ot(u,w,m)}function Vt(u,l,m){var p=ut(l,m,!1);if(!A(p))return p.OrdinaryGetOwnMetadata(u,l,m)}function Ft(u,l,m,p){var w=ut(m,p,!0);w.OrdinaryDefineOwnMetadata(u,l,m,p)}function It(u,l){var m=Tt(u,l),p=dt(u);if(p===null)return m;var w=It(p,l);if(w.length<=0)return m;if(m.length<=0)return w;for(var L=new T,D=[],O=0,g=m;O<g.length;O++){var b=g[O],d=L.has(b);d||(L.add(b),D.push(b))}for(var y=0,F=w;y<F.length;y++){var b=F[y],d=L.has(b);d||(L.add(b),D.push(b))}return D}function Tt(u,l){var m=ut(u,l,!1);return m?m.OrdinaryOwnMetadataKeys(u,l):[]}function xt(u){if(u===null)return 1;switch(typeof u){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return u===null?1:6;default:return 6}}function A(u){return u===void 0}function et(u){return u===null}function ae(u){return typeof u=="symbol"}function P(u){return typeof u=="object"?u!==null:typeof u=="function"}function ue(u,l){switch(xt(u)){case 0:return u;case 1:return u;case 2:return u;case 3:return u;case 4:return u;case 5:return u}var m=l===3?"string":l===5?"number":"default",p=Lt(u,s);if(p!==void 0){var w=p.call(u,m);if(P(w))throw new TypeError;return w}return le(u,m==="default"?"number":m)}function le(u,l){if(l==="string"){var m=u.toString;if(rt(m)){var p=m.call(u);if(!P(p))return p}var w=u.valueOf;if(rt(w)){var p=w.call(u);if(!P(p))return p}}else{var w=u.valueOf;if(rt(w)){var p=w.call(u);if(!P(p))return p}var L=u.toString;if(rt(L)){var p=L.call(u);if(!P(p))return p}}throw new TypeError}function qt(u){return!!u}function ce(u){return""+u}function Z(u){var l=ue(u,3);return ae(l)?l:ce(l)}function kt(u){return Array.isArray?Array.isArray(u):u instanceof Object?u instanceof Array:Object.prototype.toString.call(u)==="[object Array]"}function rt(u){return typeof u=="function"}function Pt(u){return typeof u=="function"}function fe(u){switch(xt(u)){case 3:return!0;case 4:return!0;default:return!1}}function gt(u,l){return u===l||u!==u&&l!==l}function Lt(u,l){var m=u[l];if(m!=null){if(!rt(m))throw new TypeError;return m}}function Rt(u){var l=Lt(u,a);if(!rt(l))throw new TypeError;var m=l.call(u);if(!P(m))throw new TypeError;return m}function zt(u){return u.value}function Dt(u){var l=u.next();return l.done?!1:l}function jt(u){var l=u.return;l&&l.call(u)}function dt(u){var l=Object.getPrototypeOf(u);if(typeof u!="function"||u===M||l!==M)return l;var m=u.prototype,p=m&&Object.getPrototypeOf(m);if(p==null||p===Object.prototype)return l;var w=p.constructor;return typeof w!="function"||w===u?l:w}function me(){var u;!A(N)&&typeof e.Reflect<"u"&&!(N in e.Reflect)&&typeof e.Reflect.defineMetadata=="function"&&(u=ge(e.Reflect));var l,m,p,w=new I,L={registerProvider:D,getProvider:g,setProvider:d};return L;function D(y){if(!Object.isExtensible(L))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case u===y:break;case A(l):l=y;break;case l===y:break;case A(m):m=y;break;case m===y:break;default:p===void 0&&(p=new T),p.add(y);break}}function O(y,F){if(!A(l)){if(l.isProviderFor(y,F))return l;if(!A(m)){if(m.isProviderFor(y,F))return l;if(!A(p))for(var x=Rt(p);;){var R=Dt(x);if(!R)return;var $=zt(R);if($.isProviderFor(y,F))return jt(x),$}}}if(!A(u)&&u.isProviderFor(y,F))return u}function g(y,F){var x=w.get(y),R;return A(x)||(R=x.get(F)),A(R)&&(R=O(y,F),A(R)||(A(x)&&(x=new C,w.set(y,x)),x.set(F,R))),R}function b(y){if(A(y))throw new TypeError;return l===y||m===y||!A(p)&&p.has(y)}function d(y,F,x){if(!b(x))throw new Error("Metadata provider not registered.");var R=g(y,F);if(R!==x){if(!A(R))return!1;var $=w.get(y);A($)&&($=new C,w.set(y,$)),$.set(F,x)}return!0}}function he(){var u;return!A(N)&&P(e.Reflect)&&Object.isExtensible(e.Reflect)&&(u=e.Reflect[N]),A(u)&&(u=me()),!A(N)&&P(e.Reflect)&&Object.isExtensible(e.Reflect)&&Object.defineProperty(e.Reflect,N,{enumerable:!1,configurable:!1,writable:!1,value:u}),u}function pe(u){var l=new I,m={isProviderFor:function(b,d){var y=l.get(b);return A(y)?!1:y.has(d)},OrdinaryDefineOwnMetadata:D,OrdinaryHasOwnMetadata:w,OrdinaryGetOwnMetadata:L,OrdinaryOwnMetadataKeys:O,OrdinaryDeleteMetadata:g};return E.registerProvider(m),m;function p(b,d,y){var F=l.get(b),x=!1;if(A(F)){if(!y)return;F=new C,l.set(b,F),x=!0}var R=F.get(d);if(A(R)){if(!y)return;if(R=new C,F.set(d,R),!u.setProvider(b,d,m))throw F.delete(d),x&&l.delete(b),new Error("Wrong provider for target.")}return R}function w(b,d,y){var F=p(d,y,!1);return A(F)?!1:qt(F.has(b))}function L(b,d,y){var F=p(d,y,!1);if(!A(F))return F.get(b)}function D(b,d,y,F){var x=p(y,F,!0);x.set(b,d)}function O(b,d){var y=[],F=p(b,d,!1);if(A(F))return y;for(var x=F.keys(),R=Rt(x),$=0;;){var Gt=Dt(R);if(!Gt)return y.length=$,y;var Se=zt(Gt);try{y[$]=Se}catch(Me){try{jt(R)}finally{throw Me}}$++}}function g(b,d,y){var F=p(d,y,!1);if(A(F)||!F.delete(b))return!1;if(F.size===0){var x=l.get(d);A(x)||(x.delete(y),x.size===0&&l.delete(x))}return!0}}function ge(u){var l=u.defineMetadata,m=u.hasOwnMetadata,p=u.getOwnMetadata,w=u.getOwnMetadataKeys,L=u.deleteMetadata,D=new I,O={isProviderFor:function(g,b){var d=D.get(g);return A(d)?w(g,b).length?(A(d)&&(d=new T,D.set(g,d)),d.add(b),!0):!1:d.has(b)},OrdinaryDefineOwnMetadata:l,OrdinaryHasOwnMetadata:m,OrdinaryGetOwnMetadata:p,OrdinaryOwnMetadataKeys:w,OrdinaryDeleteMetadata:L};return O}function ut(u,l,m){var p=E.getProvider(u,l);if(!A(p))return p;if(m){if(E.setProvider(u,l,k))return k;throw new Error("Illegal state.")}}function de(){var u={},l=[],m=function(){function O(g,b,d){this._index=0,this._keys=g,this._values=b,this._selector=d}return O.prototype["@@iterator"]=function(){return this},O.prototype[a]=function(){return this},O.prototype.next=function(){var g=this._index;if(g>=0&&g<this._keys.length){var b=this._selector(this._keys[g],this._values[g]);return g+1>=this._keys.length?(this._index=-1,this._keys=l,this._values=l):this._index++,{value:b,done:!1}}return{value:void 0,done:!0}},O.prototype.throw=function(g){throw this._index>=0&&(this._index=-1,this._keys=l,this._values=l),g},O.prototype.return=function(g){return this._index>=0&&(this._index=-1,this._keys=l,this._values=l),{value:g,done:!0}},O}(),p=function(){function O(){this._keys=[],this._values=[],this._cacheKey=u,this._cacheIndex=-2}return Object.defineProperty(O.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),O.prototype.has=function(g){return this._find(g,!1)>=0},O.prototype.get=function(g){var b=this._find(g,!1);return b>=0?this._values[b]:void 0},O.prototype.set=function(g,b){var d=this._find(g,!0);return this._values[d]=b,this},O.prototype.delete=function(g){var b=this._find(g,!1);if(b>=0){for(var d=this._keys.length,y=b+1;y<d;y++)this._keys[y-1]=this._keys[y],this._values[y-1]=this._values[y];return this._keys.length--,this._values.length--,gt(g,this._cacheKey)&&(this._cacheKey=u,this._cacheIndex=-2),!0}return!1},O.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=u,this._cacheIndex=-2},O.prototype.keys=function(){return new m(this._keys,this._values,w)},O.prototype.values=function(){return new m(this._keys,this._values,L)},O.prototype.entries=function(){return new m(this._keys,this._values,D)},O.prototype["@@iterator"]=function(){return this.entries()},O.prototype[a]=function(){return this.entries()},O.prototype._find=function(g,b){if(!gt(this._cacheKey,g)){this._cacheIndex=-1;for(var d=0;d<this._keys.length;d++)if(gt(this._keys[d],g)){this._cacheIndex=d;break}}return this._cacheIndex<0&&b&&(this._cacheIndex=this._keys.length,this._keys.push(g),this._values.push(void 0)),this._cacheIndex},O}();return p;function w(O,g){return O}function L(O,g){return g}function D(O,g){return[O,g]}}function be(){var u=function(){function l(){this._map=new C}return Object.defineProperty(l.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),l.prototype.has=function(m){return this._map.has(m)},l.prototype.add=function(m){return this._map.set(m,m),this},l.prototype.delete=function(m){return this._map.delete(m)},l.prototype.clear=function(){this._map.clear()},l.prototype.keys=function(){return this._map.keys()},l.prototype.values=function(){return this._map.keys()},l.prototype.entries=function(){return this._map.entries()},l.prototype["@@iterator"]=function(){return this.keys()},l.prototype[a]=function(){return this.keys()},l}();return u}function ye(){var u=16,l=S.create(),m=p();return function(){function g(){this._key=p()}return g.prototype.has=function(b){var d=w(b,!1);return d!==void 0?S.has(d,this._key):!1},g.prototype.get=function(b){var d=w(b,!1);return d!==void 0?S.get(d,this._key):void 0},g.prototype.set=function(b,d){var y=w(b,!0);return y[this._key]=d,this},g.prototype.delete=function(b){var d=w(b,!1);return d!==void 0?delete d[this._key]:!1},g.prototype.clear=function(){this._key=p()},g}();function p(){var g;do g="@@WeakMap@@"+O();while(S.has(l,g));return l[g]=!0,g}function w(g,b){if(!i.call(g,m)){if(!b)return;Object.defineProperty(g,m,{value:S.create()})}return g[m]}function L(g,b){for(var d=0;d<b;++d)g[d]=Math.random()*255|0;return g}function D(g){return typeof Uint8Array=="function"?typeof crypto<"u"?crypto.getRandomValues(new Uint8Array(g)):typeof msCrypto<"u"?msCrypto.getRandomValues(new Uint8Array(g)):L(new Uint8Array(g),g):L(new Array(g),g)}function O(){var g=D(u);g[6]=g[6]&79|64,g[8]=g[8]&191|128;for(var b="",d=0;d<u;++d){var y=g[d];(d===4||d===6||d===8)&&(b+="-"),y<16&&(b+="0"),b+=y.toString(16).toLowerCase()}return b}}function bt(u){return u.__=void 0,delete u.__,u}})})(Ut||(Ut={}))});var Hr=Oe($t());var ct=class{constructor(t){this.map=new Map;this.first=void 0;this.last=void 0;this.maxSize=t}get size(){return this.map.size}get(t){let e=this.map.get(t);if(e!==void 0)return e!==this.first&&(e===this.last?(this.last=e.prev,this.last.next=void 0):(e.prev.next=e.next,e.next.prev=e.prev),e.next=this.first,this.first.prev=e,this.first=e),e.value}set(t,e){if(this.maxSize<1)return;if(this.map.has(t))throw new Error("Cannot update existing keys in the cache");let i=new St(t,e);for(this.first===void 0?(this.first=i,this.last=i):(i.next=this.first,this.first.prev=i,this.first=i),this.map.set(t,i);this.map.size>this.maxSize;){let n=this.last;this.map.delete(n.key),this.last=n.prev,this.last.next=void 0}}},St=class{constructor(t,e){this.next=void 0;this.prev=void 0;this.key=t,this.value=e}};var U;(function(o){o[o.PLAIN_TO_CLASS=0]="PLAIN_TO_CLASS",o[o.CLASS_TO_PLAIN=1]="CLASS_TO_PLAIN",o[o.CLASS_TO_CLASS=2]="CLASS_TO_CLASS"})(U||(U={}));var Zt=function(){function o(){this._typeMetadatas=new Map,this._transformMetadatas=new Map,this._exposeMetadatas=new Map,this._excludeMetadatas=new Map,this._ancestorsMap=new Map}return o.prototype.addTypeMetadata=function(t){this._typeMetadatas.has(t.target)||this._typeMetadatas.set(t.target,new Map),this._typeMetadatas.get(t.target).set(t.propertyName,t)},o.prototype.addTransformMetadata=function(t){this._transformMetadatas.has(t.target)||this._transformMetadatas.set(t.target,new Map),this._transformMetadatas.get(t.target).has(t.propertyName)||this._transformMetadatas.get(t.target).set(t.propertyName,[]),this._transformMetadatas.get(t.target).get(t.propertyName).push(t)},o.prototype.addExposeMetadata=function(t){this._exposeMetadatas.has(t.target)||this._exposeMetadatas.set(t.target,new Map),this._exposeMetadatas.get(t.target).set(t.propertyName,t)},o.prototype.addExcludeMetadata=function(t){this._excludeMetadatas.has(t.target)||this._excludeMetadatas.set(t.target,new Map),this._excludeMetadatas.get(t.target).set(t.propertyName,t)},o.prototype.findTransformMetadatas=function(t,e,i){return this.findMetadatas(this._transformMetadatas,t,e).filter(function(n){return!n.options||n.options.toClassOnly===!0&&n.options.toPlainOnly===!0?!0:n.options.toClassOnly===!0?i===U.CLASS_TO_CLASS||i===U.PLAIN_TO_CLASS:n.options.toPlainOnly===!0?i===U.CLASS_TO_PLAIN:!0})},o.prototype.findExcludeMetadata=function(t,e){return this.findMetadata(this._excludeMetadatas,t,e)},o.prototype.findExposeMetadata=function(t,e){return this.findMetadata(this._exposeMetadatas,t,e)},o.prototype.findExposeMetadataByCustomName=function(t,e){return this.getExposedMetadatas(t).find(function(i){return i.options&&i.options.name===e})},o.prototype.findTypeMetadata=function(t,e){return this.findMetadata(this._typeMetadatas,t,e)},o.prototype.getStrategy=function(t){var e=this._excludeMetadatas.get(t),i=e&&e.get(void 0),n=this._exposeMetadatas.get(t),s=n&&n.get(void 0);return i&&s||!i&&!s?"none":i?"excludeAll":"exposeAll"},o.prototype.getExposedMetadatas=function(t){return this.getMetadata(this._exposeMetadatas,t)},o.prototype.getExcludedMetadatas=function(t){return this.getMetadata(this._excludeMetadatas,t)},o.prototype.getExposedProperties=function(t,e){return this.getExposedMetadatas(t).filter(function(i){return!i.options||i.options.toClassOnly===!0&&i.options.toPlainOnly===!0?!0:i.options.toClassOnly===!0?e===U.CLASS_TO_CLASS||e===U.PLAIN_TO_CLASS:i.options.toPlainOnly===!0?e===U.CLASS_TO_PLAIN:!0}).map(function(i){return i.propertyName})},o.prototype.getExcludedProperties=function(t,e){return this.getExcludedMetadatas(t).filter(function(i){return!i.options||i.options.toClassOnly===!0&&i.options.toPlainOnly===!0?!0:i.options.toClassOnly===!0?e===U.CLASS_TO_CLASS||e===U.PLAIN_TO_CLASS:i.options.toPlainOnly===!0?e===U.CLASS_TO_PLAIN:!0}).map(function(i){return i.propertyName})},o.prototype.clear=function(){this._typeMetadatas.clear(),this._exposeMetadatas.clear(),this._excludeMetadatas.clear(),this._ancestorsMap.clear()},o.prototype.getMetadata=function(t,e){var i=t.get(e),n;i&&(n=Array.from(i.values()).filter(function(M){return M.propertyName!==void 0}));for(var s=[],a=0,c=this.getAncestors(e);a<c.length;a++){var h=c[a],f=t.get(h);if(f){var S=Array.from(f.values()).filter(function(M){return M.propertyName!==void 0});s.push.apply(s,S)}}return s.concat(n||[])},o.prototype.findMetadata=function(t,e,i){var n=t.get(e);if(n){var s=n.get(i);if(s)return s}for(var a=0,c=this.getAncestors(e);a<c.length;a++){var h=c[a],f=t.get(h);if(f){var S=f.get(i);if(S)return S}}},o.prototype.findMetadatas=function(t,e,i){var n=t.get(e),s;n&&(s=n.get(i));for(var a=[],c=0,h=this.getAncestors(e);c<h.length;c++){var f=h[c],S=t.get(f);S&&S.has(i)&&a.push.apply(a,S.get(i))}return a.slice().reverse().concat((s||[]).slice().reverse())},o.prototype.getAncestors=function(t){if(!t)return[];if(!this._ancestorsMap.has(t)){for(var e=[],i=Object.getPrototypeOf(t.prototype.constructor);typeof i.prototype<"u";i=Object.getPrototypeOf(i.prototype.constructor))e.push(i);this._ancestorsMap.set(t,e)}return this._ancestorsMap.get(t)},o}();var it=new Zt;function _t(o){return o===void 0&&(o={}),function(t,e){it.addExcludeMetadata({target:t instanceof Function?t:t.constructor,propertyName:e,options:o})}}function nt(o){return o===void 0&&(o={}),function(t,e){it.addExposeMetadata({target:t instanceof Function?t:t.constructor,propertyName:e,options:o})}}function ot(o,t){return t===void 0&&(t={}),function(e,i){var n=Reflect.getMetadata("design:type",e,i);it.addTypeMetadata({target:e.constructor,propertyName:i,reflectedType:n,typeFunction:o,options:t})}}var Mt=17,Ve=9e15,Fe=Math.log10(9e15),Ie=1/9e15,Te=308,xe=-324,Ht=5,qe=1023,ke=!0,Pe=!1,Le=function(){let o=[];for(let e=xe+1;e<=Te;e++)o.push(+("1e"+e));let t=323;return function(e){return o[e+t]}}(),W=[2,Math.E,3,4,5,6,7,8,9,10],Re=[[1,1.0891180521811203,1.1789767925673957,1.2701455431742086,1.3632090180450092,1.4587818160364217,1.5575237916251419,1.6601571006859253,1.767485818836978,1.8804192098842727,2],[1,1.1121114330934079,1.231038924931609,1.3583836963111375,1.4960519303993531,1.6463542337511945,1.8121385357018724,1.996971324618307,2.2053895545527546,2.4432574483385254,Math.E],[1,1.1187738849693603,1.2464963939368214,1.38527004705667,1.5376664685821402,1.7068895236551784,1.897001227148399,2.1132403089001035,2.362480153784171,2.6539010333870774,3],[1,1.1367350847096405,1.2889510672956703,1.4606478703324786,1.6570295196661111,1.8850062585672889,2.1539465047453485,2.476829779693097,2.872061932789197,3.3664204535587183,4],[1,1.1494592900767588,1.319708228183931,1.5166291280087583,1.748171114438024,2.0253263297298045,2.3636668498288547,2.7858359149579424,3.3257226212448145,4.035730287722532,5],[1,1.159225940787673,1.343712473580932,1.5611293155111927,1.8221199554561318,2.14183924486326,2.542468319282638,3.0574682501653316,3.7390572020926873,4.6719550537360774,6],[1,1.1670905356972596,1.3632807444991446,1.5979222279405536,1.8842640123816674,2.2416069644878687,2.69893426559423,3.3012632110403577,4.121250340630164,5.281493033448316,7],[1,1.1736630594087796,1.379783782386201,1.6292821855668218,1.9378971836180754,2.3289975651071977,2.8384347394720835,3.5232708454565906,4.478242031114584,5.868592169644505,8],[1,1.1793017514670474,1.394054150657457,1.65664127441059,1.985170999970283,2.4069682290577457,2.9647310119960752,3.7278665320924946,4.814462547283592,6.436522247411611,9],[1,1.1840100246247336,1.4061375836156955,1.6802272208863964,2.026757028388619,2.4770056063449646,3.080525271755482,3.9191964192627284,5.135152840833187,6.989961179534715,10]],ze=[[-1,-.9194161097107025,-.8335625019330468,-.7425599821143978,-.6466611521029437,-.5462617907227869,-.4419033816638769,-.3342645487554494,-.224140440909962,-.11241087890006762,0],[-1,-.90603157029014,-.80786507256596,-.7064666939634,-.60294836853664,-.49849837513117,-.39430303318768,-.29147201034755,-.19097820800866,-.09361896280296,0],[-1,-.9021579584316141,-.8005762598234203,-.6964780623319391,-.5911906810998454,-.486050182576545,-.3823089430815083,-.28106046722897615,-.1831906535795894,-.08935809204418144,0],[-1,-.8917227442365535,-.781258746326964,-.6705130326902455,-.5612813129406509,-.4551067709033134,-.35319256652135966,-.2563741554088552,-.1651412821106526,-.0796919581982668,0],[-1,-.8843387974366064,-.7678744063886243,-.6529563724510552,-.5415870994657841,-.4352842206588936,-.33504449124791424,-.24138853420685147,-.15445285440944467,-.07409659641336663,0],[-1,-.8786709358426346,-.7577735191184886,-.6399546189952064,-.527284921869926,-.4211627631006314,-.3223479611761232,-.23107655627789858,-.1472057700818259,-.07035171210706326,0],[-1,-.8740862815291583,-.7497032990976209,-.6297119746181752,-.5161838335958787,-.41036238255751956,-.31277212146489963,-.2233976621705518,-.1418697367979619,-.06762117662323441,0],[-1,-.8702632331800649,-.7430366914122081,-.6213373075161548,-.5072025698095242,-.40171437727184167,-.30517930701410456,-.21736343968190863,-.137710238299109,-.06550774483471955,0],[-1,-.8670016295947213,-.7373984232432306,-.6143173985094293,-.49973884395492807,-.394584953527678,-.2989649949848695,-.21245647317021688,-.13434688362382652,-.0638072667348083,0],[-1,-.8641642839543857,-.732534623168535,-.6083127477059322,-.4934049257184696,-.3885773075899922,-.29376029055315767,-.2083678561173622,-.13155653399373268,-.062401588652553186,0]],_=function(t,e){let i=e+1,n=Math.ceil(Math.log10(Math.abs(t))),s=Math.round(t*Math.pow(10,i-n))*Math.pow(10,n-i);return parseFloat(s.toFixed(Math.max(i-n,0)))},Nt=function(o){return Math.sign(o)*Math.log10(Math.abs(o))},De=function(o){if(!isFinite(o))return o;if(o<-50)return o===Math.trunc(o)?Number.NEGATIVE_INFINITY:0;let t=1;for(;o<10;)t=t*o,++o;o-=1;let e=.9189385332046727;e=e+(o+.5)*Math.log(o),e=e-o;let i=o*o,n=o;return e=e+1/(12*n),n=n*i,e=e+1/(360*n),n=n*i,e=e+1/(1260*n),n=n*i,e=e+1/(1680*n),n=n*i,e=e+1/(1188*n),n=n*i,e=e+691/(360360*n),n=n*i,e=e+7/(1092*n),n=n*i,e=e+3617/(122400*n),Math.exp(e)/t};var je=.36787944117144233,Qt=.5671432904097838,Yt=function(o,t=1e-10){let e,i;if(!Number.isFinite(o)||o===0)return o;if(o===1)return Qt;o<10?e=0:e=Math.log(o)-Math.log(Math.log(o));for(let n=0;n<100;++n){if(i=(o*Math.exp(-e)+e*e)/(e+1),Math.abs(i-e)<t*Math.abs(i))return i;e=i}throw Error(`Iteration failed to converge: ${o.toString()}`)};function Xt(o,t=1e-10){let e,i,n,s;if(!Number.isFinite(o.mag)||o.eq(r.dZero))return o;if(o.eq(r.dOne))return r.fromNumber(Qt);e=r.ln(o);for(let a=0;a<100;++a){if(i=e.neg().exp(),n=e.sub(o.mul(i)),s=e.sub(n.div(e.add(1).sub(e.add(2).mul(n).div(r.mul(2,e).add(2))))),r.abs(s.sub(e)).lt(r.abs(s).mul(t)))return s;e=s}throw Error(`Iteration failed to converge: ${o.toString()}`)}var r=class{constructor(t){this.sign=0;this.mag=0;this.layer=0;t instanceof r?this.fromDecimal(t):typeof t=="number"?this.fromNumber(t):typeof t=="string"&&this.fromString(t)}get m(){if(this.sign===0)return 0;if(this.layer===0){let t=Math.floor(Math.log10(this.mag)),e;return this.mag===5e-324?e=5:e=this.mag/Le(t),this.sign*e}else if(this.layer===1){let t=this.mag-Math.floor(this.mag);return this.sign*Math.pow(10,t)}else return this.sign}set m(t){this.layer<=2?this.fromMantissaExponent(t,this.e):(this.sign=Math.sign(t),this.sign===0&&(this.layer=0,this.exponent=0))}get e(){return this.sign===0?0:this.layer===0?Math.floor(Math.log10(this.mag)):this.layer===1?Math.floor(this.mag):this.layer===2?Math.floor(Math.sign(this.mag)*Math.pow(10,Math.abs(this.mag))):this.mag*Number.POSITIVE_INFINITY}set e(t){this.fromMantissaExponent(this.m,t)}get s(){return this.sign}set s(t){t===0?(this.sign=0,this.layer=0,this.mag=0):this.sign=t}get mantissa(){return this.m}set mantissa(t){this.m=t}get exponent(){return this.e}set exponent(t){this.e=t}static fromComponents(t,e,i){return new r().fromComponents(t,e,i)}static fromComponents_noNormalize(t,e,i){return new r().fromComponents_noNormalize(t,e,i)}static fromMantissaExponent(t,e){return new r().fromMantissaExponent(t,e)}static fromMantissaExponent_noNormalize(t,e){return new r().fromMantissaExponent_noNormalize(t,e)}static fromDecimal(t){return new r().fromDecimal(t)}static fromNumber(t){return new r().fromNumber(t)}static fromString(t){return new r().fromString(t)}static fromValue(t){return new r().fromValue(t)}static fromValue_noAlloc(t){if(t instanceof r)return t;if(typeof t=="string"){let e=r.fromStringCache.get(t);return e!==void 0?e:r.fromString(t)}else return typeof t=="number"?r.fromNumber(t):r.dZero}static abs(t){return r.fromValue_noAlloc(t).abs()}static neg(t){return r.fromValue_noAlloc(t).neg()}static negate(t){return r.fromValue_noAlloc(t).neg()}static negated(t){return r.fromValue_noAlloc(t).neg()}static sign(t){return r.fromValue_noAlloc(t).sign}static sgn(t){return r.fromValue_noAlloc(t).sign}static round(t){return r.fromValue_noAlloc(t).round()}static floor(t){return r.fromValue_noAlloc(t).floor()}static ceil(t){return r.fromValue_noAlloc(t).ceil()}static trunc(t){return r.fromValue_noAlloc(t).trunc()}static add(t,e){return r.fromValue_noAlloc(t).add(e)}static plus(t,e){return r.fromValue_noAlloc(t).add(e)}static sub(t,e){return r.fromValue_noAlloc(t).sub(e)}static subtract(t,e){return r.fromValue_noAlloc(t).sub(e)}static minus(t,e){return r.fromValue_noAlloc(t).sub(e)}static mul(t,e){return r.fromValue_noAlloc(t).mul(e)}static multiply(t,e){return r.fromValue_noAlloc(t).mul(e)}static times(t,e){return r.fromValue_noAlloc(t).mul(e)}static div(t,e){return r.fromValue_noAlloc(t).div(e)}static divide(t,e){return r.fromValue_noAlloc(t).div(e)}static recip(t){return r.fromValue_noAlloc(t).recip()}static reciprocal(t){return r.fromValue_noAlloc(t).recip()}static reciprocate(t){return r.fromValue_noAlloc(t).reciprocate()}static mod(t,e){return r.fromValue_noAlloc(t).mod(e)}static modulo(t,e){return r.fromValue_noAlloc(t).modulo(e)}static modular(t,e){return r.fromValue_noAlloc(t).modular(e)}static cmp(t,e){return r.fromValue_noAlloc(t).cmp(e)}static cmpabs(t,e){return r.fromValue_noAlloc(t).cmpabs(e)}static compare(t,e){return r.fromValue_noAlloc(t).cmp(e)}static isNaN(t){return t=r.fromValue_noAlloc(t),isNaN(t.sign)||isNaN(t.layer)||isNaN(t.mag)}static isFinite(t){return t=r.fromValue_noAlloc(t),isFinite(t.sign)&&isFinite(t.layer)&&isFinite(t.mag)}static eq(t,e){return r.fromValue_noAlloc(t).eq(e)}static equals(t,e){return r.fromValue_noAlloc(t).eq(e)}static neq(t,e){return r.fromValue_noAlloc(t).neq(e)}static notEquals(t,e){return r.fromValue_noAlloc(t).notEquals(e)}static lt(t,e){return r.fromValue_noAlloc(t).lt(e)}static lte(t,e){return r.fromValue_noAlloc(t).lte(e)}static gt(t,e){return r.fromValue_noAlloc(t).gt(e)}static gte(t,e){return r.fromValue_noAlloc(t).gte(e)}static max(t,e){return r.fromValue_noAlloc(t).max(e)}static min(t,e){return r.fromValue_noAlloc(t).min(e)}static minabs(t,e){return r.fromValue_noAlloc(t).minabs(e)}static maxabs(t,e){return r.fromValue_noAlloc(t).maxabs(e)}static clamp(t,e,i){return r.fromValue_noAlloc(t).clamp(e,i)}static clampMin(t,e){return r.fromValue_noAlloc(t).clampMin(e)}static clampMax(t,e){return r.fromValue_noAlloc(t).clampMax(e)}static cmp_tolerance(t,e,i){return r.fromValue_noAlloc(t).cmp_tolerance(e,i)}static compare_tolerance(t,e,i){return r.fromValue_noAlloc(t).cmp_tolerance(e,i)}static eq_tolerance(t,e,i){return r.fromValue_noAlloc(t).eq_tolerance(e,i)}static equals_tolerance(t,e,i){return r.fromValue_noAlloc(t).eq_tolerance(e,i)}static neq_tolerance(t,e,i){return r.fromValue_noAlloc(t).neq_tolerance(e,i)}static notEquals_tolerance(t,e,i){return r.fromValue_noAlloc(t).notEquals_tolerance(e,i)}static lt_tolerance(t,e,i){return r.fromValue_noAlloc(t).lt_tolerance(e,i)}static lte_tolerance(t,e,i){return r.fromValue_noAlloc(t).lte_tolerance(e,i)}static gt_tolerance(t,e,i){return r.fromValue_noAlloc(t).gt_tolerance(e,i)}static gte_tolerance(t,e,i){return r.fromValue_noAlloc(t).gte_tolerance(e,i)}static pLog10(t){return r.fromValue_noAlloc(t).pLog10()}static absLog10(t){return r.fromValue_noAlloc(t).absLog10()}static log10(t){return r.fromValue_noAlloc(t).log10()}static log(t,e){return r.fromValue_noAlloc(t).log(e)}static log2(t){return r.fromValue_noAlloc(t).log2()}static ln(t){return r.fromValue_noAlloc(t).ln()}static logarithm(t,e){return r.fromValue_noAlloc(t).logarithm(e)}static pow(t,e){return r.fromValue_noAlloc(t).pow(e)}static pow10(t){return r.fromValue_noAlloc(t).pow10()}static root(t,e){return r.fromValue_noAlloc(t).root(e)}static factorial(t,e){return r.fromValue_noAlloc(t).factorial()}static gamma(t,e){return r.fromValue_noAlloc(t).gamma()}static lngamma(t,e){return r.fromValue_noAlloc(t).lngamma()}static exp(t){return r.fromValue_noAlloc(t).exp()}static sqr(t){return r.fromValue_noAlloc(t).sqr()}static sqrt(t){return r.fromValue_noAlloc(t).sqrt()}static cube(t){return r.fromValue_noAlloc(t).cube()}static cbrt(t){return r.fromValue_noAlloc(t).cbrt()}static tetrate(t,e=2,i=r.fromComponents_noNormalize(1,0,1),n=!1){return r.fromValue_noAlloc(t).tetrate(e,i,n)}static iteratedexp(t,e=2,i=r.fromComponents_noNormalize(1,0,1),n=!1){return r.fromValue_noAlloc(t).iteratedexp(e,i,n)}static iteratedlog(t,e=10,i=1,n=!1){return r.fromValue_noAlloc(t).iteratedlog(e,i,n)}static layeradd10(t,e,i=!1){return r.fromValue_noAlloc(t).layeradd10(e,i)}static layeradd(t,e,i=10,n=!1){return r.fromValue_noAlloc(t).layeradd(e,i,n)}static slog(t,e=10,i=!1){return r.fromValue_noAlloc(t).slog(e,100,i)}static lambertw(t){return r.fromValue_noAlloc(t).lambertw()}static ssqrt(t){return r.fromValue_noAlloc(t).ssqrt()}static linear_sroot(t,e){return r.fromValue_noAlloc(t).linear_sroot(e)}static pentate(t,e=2,i=r.fromComponents_noNormalize(1,0,1),n=!1){return r.fromValue_noAlloc(t).pentate(e,i,n)}static affordGeometricSeries(t,e,i,n){return this.affordGeometricSeries_core(r.fromValue_noAlloc(t),r.fromValue_noAlloc(e),r.fromValue_noAlloc(i),n)}static sumGeometricSeries(t,e,i,n){return this.sumGeometricSeries_core(t,r.fromValue_noAlloc(e),r.fromValue_noAlloc(i),n)}static affordArithmeticSeries(t,e,i,n){return this.affordArithmeticSeries_core(r.fromValue_noAlloc(t),r.fromValue_noAlloc(e),r.fromValue_noAlloc(i),r.fromValue_noAlloc(n))}static sumArithmeticSeries(t,e,i,n){return this.sumArithmeticSeries_core(r.fromValue_noAlloc(t),r.fromValue_noAlloc(e),r.fromValue_noAlloc(i),r.fromValue_noAlloc(n))}static efficiencyOfPurchase(t,e,i){return this.efficiencyOfPurchase_core(r.fromValue_noAlloc(t),r.fromValue_noAlloc(e),r.fromValue_noAlloc(i))}static randomDecimalForTesting(t){if(Math.random()*20<1)return r.fromComponents_noNormalize(0,0,0);let e=Math.random()>.5?1:-1;if(Math.random()*20<1)return r.fromComponents_noNormalize(e,0,1);let i=Math.floor(Math.random()*(t+1)),n=i===0?Math.random()*616-308:Math.random()*16;Math.random()>.9&&(n=Math.trunc(n));let s=Math.pow(10,n);return Math.random()>.9&&(s=Math.trunc(s)),r.fromComponents(e,i,s)}static affordGeometricSeries_core(t,e,i,n){let s=e.mul(i.pow(n));return r.floor(t.div(s).mul(i.sub(1)).add(1).log10().div(i.log10()))}static sumGeometricSeries_core(t,e,i,n){return e.mul(i.pow(n)).mul(r.sub(1,i.pow(t))).div(r.sub(1,i))}static affordArithmeticSeries_core(t,e,i,n){let a=e.add(n.mul(i)).sub(i.div(2)),c=a.pow(2);return a.neg().add(c.add(i.mul(t).mul(2)).sqrt()).div(i).floor()}static sumArithmeticSeries_core(t,e,i,n){let s=e.add(n.mul(i));return t.div(2).mul(s.mul(2).plus(t.sub(1).mul(i)))}static efficiencyOfPurchase_core(t,e,i){return t.div(e).add(t.div(i))}normalize(){if(this.sign===0||this.mag===0&&this.layer===0)return this.sign=0,this.mag=0,this.layer=0,this;if(this.layer===0&&this.mag<0&&(this.mag=-this.mag,this.sign=-this.sign),this.layer===0&&this.mag<Ie)return this.layer+=1,this.mag=Math.log10(this.mag),this;let t=Math.abs(this.mag),e=Math.sign(this.mag);if(t>=Ve)return this.layer+=1,this.mag=e*Math.log10(t),this;for(;t<Fe&&this.layer>0;)this.layer-=1,this.layer===0?this.mag=Math.pow(10,this.mag):(this.mag=e*Math.pow(10,t),t=Math.abs(this.mag),e=Math.sign(this.mag));return this.layer===0&&(this.mag<0?(this.mag=-this.mag,this.sign=-this.sign):this.mag===0&&(this.sign=0)),this}fromComponents(t,e,i){return this.sign=t,this.layer=e,this.mag=i,this.normalize(),this}fromComponents_noNormalize(t,e,i){return this.sign=t,this.layer=e,this.mag=i,this}fromMantissaExponent(t,e){return this.layer=1,this.sign=Math.sign(t),t=Math.abs(t),this.mag=e+Math.log10(t),this.normalize(),this}fromMantissaExponent_noNormalize(t,e){return this.fromMantissaExponent(t,e),this}fromDecimal(t){return this.sign=t.sign,this.layer=t.layer,this.mag=t.mag,this}fromNumber(t){return this.mag=Math.abs(t),this.sign=Math.sign(t),this.layer=0,this.normalize(),this}fromString(t){let e=t,i=r.fromStringCache.get(e);if(i!==void 0)return this.fromDecimal(i);ke?t=t.replace(",",""):Pe&&(t=t.replace(",","."));let n=t.split("^^^");if(n.length===2){let N=parseFloat(n[0]),E=parseFloat(n[1]),k=n[1].split(";"),j=1;if(k.length===2&&(j=parseFloat(k[1]),isFinite(j)||(j=1)),isFinite(N)&&isFinite(E)){let G=r.pentate(N,E,j);return this.sign=G.sign,this.layer=G.layer,this.mag=G.mag,r.fromStringCache.maxSize>=1&&r.fromStringCache.set(e,r.fromDecimal(this)),this}}let s=t.split("^^");if(s.length===2){let N=parseFloat(s[0]),E=parseFloat(s[1]),k=s[1].split(";"),j=1;if(k.length===2&&(j=parseFloat(k[1]),isFinite(j)||(j=1)),isFinite(N)&&isFinite(E)){let G=r.tetrate(N,E,j);return this.sign=G.sign,this.layer=G.layer,this.mag=G.mag,r.fromStringCache.maxSize>=1&&r.fromStringCache.set(e,r.fromDecimal(this)),this}}let a=t.split("^");if(a.length===2){let N=parseFloat(a[0]),E=parseFloat(a[1]);if(isFinite(N)&&isFinite(E)){let k=r.pow(N,E);return this.sign=k.sign,this.layer=k.layer,this.mag=k.mag,r.fromStringCache.maxSize>=1&&r.fromStringCache.set(e,r.fromDecimal(this)),this}}t=t.trim().toLowerCase();let c,h,f=t.split("pt");if(f.length===2){c=10,h=parseFloat(f[0]),f[1]=f[1].replace("(",""),f[1]=f[1].replace(")","");let N=parseFloat(f[1]);if(isFinite(N)||(N=1),isFinite(c)&&isFinite(h)){let E=r.tetrate(c,h,N);return this.sign=E.sign,this.layer=E.layer,this.mag=E.mag,r.fromStringCache.maxSize>=1&&r.fromStringCache.set(e,r.fromDecimal(this)),this}}if(f=t.split("p"),f.length===2){c=10,h=parseFloat(f[0]),f[1]=f[1].replace("(",""),f[1]=f[1].replace(")","");let N=parseFloat(f[1]);if(isFinite(N)||(N=1),isFinite(c)&&isFinite(h)){let E=r.tetrate(c,h,N);return this.sign=E.sign,this.layer=E.layer,this.mag=E.mag,r.fromStringCache.maxSize>=1&&r.fromStringCache.set(e,r.fromDecimal(this)),this}}if(f=t.split("f"),f.length===2){c=10,f[0]=f[0].replace("(",""),f[0]=f[0].replace(")","");let N=parseFloat(f[0]);if(f[1]=f[1].replace("(",""),f[1]=f[1].replace(")",""),h=parseFloat(f[1]),isFinite(N)||(N=1),isFinite(c)&&isFinite(h)){let E=r.tetrate(c,h,N);return this.sign=E.sign,this.layer=E.layer,this.mag=E.mag,r.fromStringCache.maxSize>=1&&r.fromStringCache.set(e,r.fromDecimal(this)),this}}let S=t.split("e"),M=S.length-1;if(M===0){let N=parseFloat(t);if(isFinite(N))return this.fromNumber(N),r.fromStringCache.size>=1&&r.fromStringCache.set(e,r.fromDecimal(this)),this}else if(M===1){let N=parseFloat(t);if(isFinite(N)&&N!==0)return this.fromNumber(N),r.fromStringCache.maxSize>=1&&r.fromStringCache.set(e,r.fromDecimal(this)),this}let C=t.split("e^");if(C.length===2){this.sign=1,C[0].charAt(0)=="-"&&(this.sign=-1);let N="";for(let E=0;E<C[1].length;++E){let k=C[1].charCodeAt(E);if(k>=43&&k<=57||k===101)N+=C[1].charAt(E);else return this.layer=parseFloat(N),this.mag=parseFloat(C[1].substr(E+1)),this.normalize(),r.fromStringCache.maxSize>=1&&r.fromStringCache.set(e,r.fromDecimal(this)),this}}if(M<1)return this.sign=0,this.layer=0,this.mag=0,r.fromStringCache.maxSize>=1&&r.fromStringCache.set(e,r.fromDecimal(this)),this;let T=parseFloat(S[0]);if(T===0)return this.sign=0,this.layer=0,this.mag=0,r.fromStringCache.maxSize>=1&&r.fromStringCache.set(e,r.fromDecimal(this)),this;let I=parseFloat(S[S.length-1]);if(M>=2){let N=parseFloat(S[S.length-2]);isFinite(N)&&(I*=Math.sign(N),I+=Nt(N))}if(!isFinite(T))this.sign=S[0]==="-"?-1:1,this.layer=M,this.mag=I;else if(M===1)this.sign=Math.sign(T),this.layer=1,this.mag=I+Math.log10(Math.abs(T));else if(this.sign=Math.sign(T),this.layer=M,M===2){let N=r.mul(r.fromComponents(1,2,I),r.fromValue_noAlloc(T));return this.sign=N.sign,this.layer=N.layer,this.mag=N.mag,r.fromStringCache.maxSize>=1&&r.fromStringCache.set(e,r.fromDecimal(this)),this}else this.mag=I;return this.normalize(),r.fromStringCache.maxSize>=1&&r.fromStringCache.set(e,r.fromDecimal(this)),this}fromValue(t){return t instanceof r?this.fromDecimal(t):typeof t=="number"?this.fromNumber(t):typeof t=="string"?this.fromString(t):(this.sign=0,this.layer=0,this.mag=0,this)}toNumber(){return Number.isFinite(this.layer)?this.layer===0?this.sign*this.mag:this.layer===1?this.sign*Math.pow(10,this.mag):this.mag>0?this.sign>0?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:0:Number.NaN}mantissaWithDecimalPlaces(t){return isNaN(this.m)?Number.NaN:this.m===0?0:_(this.m,t)}magnitudeWithDecimalPlaces(t){return isNaN(this.mag)?Number.NaN:this.mag===0?0:_(this.mag,t)}toString(){return isNaN(this.layer)||isNaN(this.sign)||isNaN(this.mag)?"NaN":this.mag===Number.POSITIVE_INFINITY||this.layer===Number.POSITIVE_INFINITY?this.sign===1?"Infinity":"-Infinity":this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toString():this.m+"e"+this.e:this.layer===1?this.m+"e"+this.e:this.layer<=Ht?(this.sign===-1?"-":"")+"e".repeat(this.layer)+this.mag:(this.sign===-1?"-":"")+"(e^"+this.layer+")"+this.mag}toExponential(t){return this.layer===0?(this.sign*this.mag).toExponential(t):this.toStringWithDecimalPlaces(t)}toFixed(t){return this.layer===0?(this.sign*this.mag).toFixed(t):this.toStringWithDecimalPlaces(t)}toPrecision(t){return this.e<=-7?this.toExponential(t-1):t>this.e?this.toFixed(t-this.exponent-1):this.toExponential(t-1)}valueOf(){return this.toString()}toJSON(){return this.toString()}toStringWithDecimalPlaces(t){return this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toFixed(t):_(this.m,t)+"e"+_(this.e,t):this.layer===1?_(this.m,t)+"e"+_(this.e,t):this.layer<=Ht?(this.sign===-1?"-":"")+"e".repeat(this.layer)+_(this.mag,t):(this.sign===-1?"-":"")+"(e^"+this.layer+")"+_(this.mag,t)}abs(){return r.fromComponents_noNormalize(this.sign===0?0:1,this.layer,this.mag)}neg(){return r.fromComponents_noNormalize(-this.sign,this.layer,this.mag)}negate(){return this.neg()}negated(){return this.neg()}sgn(){return this.sign}round(){return this.mag<0?r.dZero:this.layer===0?r.fromComponents(this.sign,0,Math.round(this.mag)):this}floor(){return this.mag<0?r.dZero:this.layer===0?r.fromComponents(this.sign,0,Math.floor(this.mag)):this}ceil(){return this.mag<0?r.dZero:this.layer===0?r.fromComponents(this.sign,0,Math.ceil(this.mag)):this}trunc(){return this.mag<0?r.dZero:this.layer===0?r.fromComponents(this.sign,0,Math.trunc(this.mag)):this}add(t){let e=r.fromValue_noAlloc(t);if(!Number.isFinite(this.layer))return this;if(!Number.isFinite(e.layer)||this.sign===0)return e;if(e.sign===0)return this;if(this.sign===-e.sign&&this.layer===e.layer&&this.mag===e.mag)return r.fromComponents_noNormalize(0,0,0);let i,n;if(this.layer>=2||e.layer>=2)return this.maxabs(e);if(r.cmpabs(this,e)>0?(i=this,n=e):(i=e,n=this),i.layer===0&&n.layer===0)return r.fromNumber(i.sign*i.mag+n.sign*n.mag);let s=i.layer*Math.sign(i.mag),a=n.layer*Math.sign(n.mag);if(s-a>=2)return i;if(s===0&&a===-1){if(Math.abs(n.mag-Math.log10(i.mag))>Mt)return i;{let c=Math.pow(10,Math.log10(i.mag)-n.mag),h=n.sign+i.sign*c;return r.fromComponents(Math.sign(h),1,n.mag+Math.log10(Math.abs(h)))}}if(s===1&&a===0){if(Math.abs(i.mag-Math.log10(n.mag))>Mt)return i;{let c=Math.pow(10,i.mag-Math.log10(n.mag)),h=n.sign+i.sign*c;return r.fromComponents(Math.sign(h),1,Math.log10(n.mag)+Math.log10(Math.abs(h)))}}if(Math.abs(i.mag-n.mag)>Mt)return i;{let c=Math.pow(10,i.mag-n.mag),h=n.sign+i.sign*c;return r.fromComponents(Math.sign(h),1,n.mag+Math.log10(Math.abs(h)))}throw Error("Bad arguments to add: "+this+", "+t)}plus(t){return this.add(t)}sub(t){return this.add(r.fromValue_noAlloc(t).neg())}subtract(t){return this.sub(t)}minus(t){return this.sub(t)}mul(t){let e=r.fromValue_noAlloc(t);if(!Number.isFinite(this.layer))return this;if(!Number.isFinite(e.layer))return e;if(this.sign===0||e.sign===0)return r.fromComponents_noNormalize(0,0,0);if(this.layer===e.layer&&this.mag===-e.mag)return r.fromComponents_noNormalize(this.sign*e.sign,0,1);let i,n;if(this.layer>e.layer||this.layer==e.layer&&Math.abs(this.mag)>Math.abs(e.mag)?(i=this,n=e):(i=e,n=this),i.layer===0&&n.layer===0)return r.fromNumber(i.sign*n.sign*i.mag*n.mag);if(i.layer>=3||i.layer-n.layer>=2)return r.fromComponents(i.sign*n.sign,i.layer,i.mag);if(i.layer===1&&n.layer===0)return r.fromComponents(i.sign*n.sign,1,i.mag+Math.log10(n.mag));if(i.layer===1&&n.layer===1)return r.fromComponents(i.sign*n.sign,1,i.mag+n.mag);if(i.layer===2&&n.layer===1){let s=r.fromComponents(Math.sign(i.mag),i.layer-1,Math.abs(i.mag)).add(r.fromComponents(Math.sign(n.mag),n.layer-1,Math.abs(n.mag)));return r.fromComponents(i.sign*n.sign,s.layer+1,s.sign*s.mag)}if(i.layer===2&&n.layer===2){let s=r.fromComponents(Math.sign(i.mag),i.layer-1,Math.abs(i.mag)).add(r.fromComponents(Math.sign(n.mag),n.layer-1,Math.abs(n.mag)));return r.fromComponents(i.sign*n.sign,s.layer+1,s.sign*s.mag)}throw Error("Bad arguments to mul: "+this+", "+t)}multiply(t){return this.mul(t)}times(t){return this.mul(t)}div(t){let e=r.fromValue_noAlloc(t);return this.mul(e.recip())}divide(t){return this.div(t)}divideBy(t){return this.div(t)}dividedBy(t){return this.div(t)}recip(){return this.mag===0?r.dNaN:this.layer===0?r.fromComponents(this.sign,0,1/this.mag):r.fromComponents(this.sign,this.layer,-this.mag)}reciprocal(){return this.recip()}reciprocate(){return this.recip()}cmp(t){let e=r.fromValue_noAlloc(t);return this.sign>e.sign?1:this.sign<e.sign?-1:this.sign*this.cmpabs(t)}cmpabs(t){let e=r.fromValue_noAlloc(t),i=this.mag>0?this.layer:-this.layer,n=e.mag>0?e.layer:-e.layer;return i>n?1:i<n?-1:this.mag>e.mag?1:this.mag<e.mag?-1:0}compare(t){return this.cmp(t)}isNan(){return isNaN(this.sign)||isNaN(this.layer)||isNaN(this.mag)}isFinite(){return isFinite(this.sign)&&isFinite(this.layer)&&isFinite(this.mag)}eq(t){let e=r.fromValue_noAlloc(t);return this.sign===e.sign&&this.layer===e.layer&&this.mag===e.mag}equals(t){return this.eq(t)}neq(t){return!this.eq(t)}notEquals(t){return this.neq(t)}lt(t){return this.cmp(t)===-1}lte(t){return!this.gt(t)}gt(t){return this.cmp(t)===1}gte(t){return!this.lt(t)}max(t){let e=r.fromValue_noAlloc(t);return this.lt(e)?e:this}min(t){let e=r.fromValue_noAlloc(t);return this.gt(e)?e:this}maxabs(t){let e=r.fromValue_noAlloc(t);return this.cmpabs(e)<0?e:this}minabs(t){let e=r.fromValue_noAlloc(t);return this.cmpabs(e)>0?e:this}clamp(t,e){return this.max(t).min(e)}clampMin(t){return this.max(t)}clampMax(t){return this.min(t)}cmp_tolerance(t,e){let i=r.fromValue_noAlloc(t);return this.eq_tolerance(i,e)?0:this.cmp(i)}compare_tolerance(t,e){return this.cmp_tolerance(t,e)}eq_tolerance(t,e){let i=r.fromValue_noAlloc(t);if(e==null&&(e=1e-7),this.sign!==i.sign||Math.abs(this.layer-i.layer)>1)return!1;let n=this.mag,s=i.mag;return this.layer>i.layer&&(s=Nt(s)),this.layer<i.layer&&(n=Nt(n)),Math.abs(n-s)<=e*Math.max(Math.abs(n),Math.abs(s))}equals_tolerance(t,e){return this.eq_tolerance(t,e)}neq_tolerance(t,e){return!this.eq_tolerance(t,e)}notEquals_tolerance(t,e){return this.neq_tolerance(t,e)}lt_tolerance(t,e){let i=r.fromValue_noAlloc(t);return!this.eq_tolerance(i,e)&&this.lt(i)}lte_tolerance(t,e){let i=r.fromValue_noAlloc(t);return this.eq_tolerance(i,e)||this.lt(i)}gt_tolerance(t,e){let i=r.fromValue_noAlloc(t);return!this.eq_tolerance(i,e)&&this.gt(i)}gte_tolerance(t,e){let i=r.fromValue_noAlloc(t);return this.eq_tolerance(i,e)||this.gt(i)}pLog10(){return this.lt(r.dZero)?r.dZero:this.log10()}absLog10(){return this.sign===0?r.dNaN:this.layer>0?r.fromComponents(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):r.fromComponents(1,0,Math.log10(this.mag))}log10(){return this.sign<=0?r.dNaN:this.layer>0?r.fromComponents(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):r.fromComponents(this.sign,0,Math.log10(this.mag))}log(t){return t=r.fromValue_noAlloc(t),this.sign<=0||t.sign<=0||t.sign===1&&t.layer===0&&t.mag===1?r.dNaN:this.layer===0&&t.layer===0?r.fromComponents(this.sign,0,Math.log(this.mag)/Math.log(t.mag)):r.div(this.log10(),t.log10())}log2(){return this.sign<=0?r.dNaN:this.layer===0?r.fromComponents(this.sign,0,Math.log2(this.mag)):this.layer===1?r.fromComponents(Math.sign(this.mag),0,Math.abs(this.mag)*3.321928094887362):this.layer===2?r.fromComponents(Math.sign(this.mag),1,Math.abs(this.mag)+.5213902276543247):r.fromComponents(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}ln(){return this.sign<=0?r.dNaN:this.layer===0?r.fromComponents(this.sign,0,Math.log(this.mag)):this.layer===1?r.fromComponents(Math.sign(this.mag),0,Math.abs(this.mag)*2.302585092994046):this.layer===2?r.fromComponents(Math.sign(this.mag),1,Math.abs(this.mag)+.36221568869946325):r.fromComponents(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}logarithm(t){return this.log(t)}pow(t){let e=r.fromValue_noAlloc(t),i=this,n=e;if(i.sign===0)return n.eq(0)?r.fromComponents_noNormalize(1,0,1):i;if(i.sign===1&&i.layer===0&&i.mag===1)return i;if(n.sign===0)return r.fromComponents_noNormalize(1,0,1);if(n.sign===1&&n.layer===0&&n.mag===1)return i;let s=i.absLog10().mul(n).pow10();return this.sign===-1?Math.abs(n.toNumber()%2)%2===1?s.neg():Math.abs(n.toNumber()%2)%2===0?s:r.dNaN:s}pow10(){if(!Number.isFinite(this.layer)||!Number.isFinite(this.mag))return r.dNaN;let t=this;if(t.layer===0){let e=Math.pow(10,t.sign*t.mag);if(Number.isFinite(e)&&Math.abs(e)>=.1)return r.fromComponents(1,0,e);if(t.sign===0)return r.dOne;t=r.fromComponents_noNormalize(t.sign,t.layer+1,Math.log10(t.mag))}return t.sign>0&&t.mag>=0?r.fromComponents(t.sign,t.layer+1,t.mag):t.sign<0&&t.mag>=0?r.fromComponents(-t.sign,t.layer+1,-t.mag):r.dOne}pow_base(t){return r.fromValue_noAlloc(t).pow(this)}root(t){let e=r.fromValue_noAlloc(t);return this.pow(e.recip())}factorial(){return this.mag<0?this.add(1).gamma():this.layer===0?this.add(1).gamma():this.layer===1?r.exp(r.mul(this,r.ln(this).sub(1))):r.exp(this)}gamma(){if(this.mag<0)return this.recip();if(this.layer===0){if(this.lt(r.fromComponents_noNormalize(1,0,24)))return r.fromNumber(De(this.sign*this.mag));let t=this.mag-1,e=.9189385332046727;e=e+(t+.5)*Math.log(t),e=e-t;let i=t*t,n=t,s=12*n,a=1/s,c=e+a;if(c===e||(e=c,n=n*i,s=360*n,a=1/s,c=e-a,c===e))return r.exp(e);e=c,n=n*i,s=1260*n;let h=1/s;return e=e+h,n=n*i,s=1680*n,h=1/s,e=e-h,r.exp(e)}else return this.layer===1?r.exp(r.mul(this,r.ln(this).sub(1))):r.exp(this)}lngamma(){return this.gamma().ln()}exp(){return this.mag<0?r.dOne:this.layer===0&&this.mag<=709.7?r.fromNumber(Math.exp(this.sign*this.mag)):this.layer===0?r.fromComponents(1,1,this.sign*Math.log10(Math.E)*this.mag):this.layer===1?r.fromComponents(1,2,this.sign*(Math.log10(.4342944819032518)+this.mag)):r.fromComponents(1,this.layer+1,this.sign*this.mag)}sqr(){return this.pow(2)}sqrt(){if(this.layer===0)return r.fromNumber(Math.sqrt(this.sign*this.mag));if(this.layer===1)return r.fromComponents(1,2,Math.log10(this.mag)-.3010299956639812);{let t=r.div(r.fromComponents_noNormalize(this.sign,this.layer-1,this.mag),r.fromComponents_noNormalize(1,0,2));return t.layer+=1,t.normalize(),t}}cube(){return this.pow(3)}cbrt(){return this.pow(1/3)}tetrate(t=2,e=r.fromComponents_noNormalize(1,0,1),i=!1){if(t===1)return r.pow(this,e);if(t===0)return new r(e);if(this.eq(r.dOne))return r.dOne;if(this.eq(-1))return r.pow(this,e);if(t===Number.POSITIVE_INFINITY){let a=this.toNumber();if(a<=1.444667861009766&&a>=.06598803584531254){if(a>1.444667861009099)return r.fromNumber(Math.E);let c=r.ln(this).neg();return c.lambertw().div(c)}else return a>1.444667861009766?r.fromNumber(Number.POSITIVE_INFINITY):r.dNaN}if(this.eq(r.dZero)){let a=Math.abs((t+1)%2);return a>1&&(a=2-a),r.fromNumber(a)}if(t<0)return r.iteratedlog(e,this,-t,i);e=r.fromValue_noAlloc(e);let n=t;t=Math.trunc(t);let s=n-t;if(this.gt(r.dZero)&&this.lte(1.444667861009766)&&(n>1e4||!i)){t=Math.min(1e4,t);for(let a=0;a<t;++a){let c=e;if(e=this.pow(e),c.eq(e))return e}if(s!=0||n>1e4){let a=this.pow(e);return n<=1e4||Math.ceil(n)%2==0?e.mul(1-s).add(a.mul(s)):e.mul(s).add(a.mul(1-s))}return e}s!==0&&(e.eq(r.dOne)?this.gt(10)||i?e=this.pow(s):(e=r.fromNumber(r.tetrate_critical(this.toNumber(),s)),this.lt(2)&&(e=e.sub(1).mul(this.minus(1)).plus(1))):this.eq(10)?e=e.layeradd10(s,i):e=e.layeradd(s,this,i));for(let a=0;a<t;++a){if(e=this.pow(e),!isFinite(e.layer)||!isFinite(e.mag))return e.normalize();if(e.layer-this.layer>3)return r.fromComponents_noNormalize(e.sign,e.layer+(t-a-1),e.mag);if(a>1e4)return e}return e}iteratedexp(t=2,e=r.fromComponents_noNormalize(1,0,1),i=!1){return this.tetrate(t,e,i)}iteratedlog(t=10,e=1,i=!1){if(e<0)return r.tetrate(t,-e,this,i);t=r.fromValue_noAlloc(t);let n=r.fromDecimal(this),s=e;e=Math.trunc(e);let a=s-e;if(n.layer-t.layer>3){let c=Math.min(e,n.layer-t.layer-3);e-=c,n.layer-=c}for(let c=0;c<e;++c){if(n=n.log(t),!isFinite(n.layer)||!isFinite(n.mag))return n.normalize();if(c>1e4)return n}return a>0&&a<1&&(t.eq(10)?n=n.layeradd10(-a,i):n=n.layeradd(-a,t,i)),n}slog(t=10,e=100,i=!1){let n=.001,s=!1,a=!1,c=this.slog_internal(t,i).toNumber();for(let h=1;h<e;++h){let S=new r(t).tetrate(c,r.dOne,i).gt(this);if(h>1&&a!=S&&(s=!0),a=S,s?n/=2:n*=2,n=Math.abs(n)*(S?-1:1),c+=n,n===0)break}return r.fromNumber(c)}slog_internal(t=10,e=!1){if(t=r.fromValue_noAlloc(t),t.lte(r.dZero)||t.eq(r.dOne))return r.dNaN;if(t.lt(r.dOne))return this.eq(r.dOne)?r.dZero:this.eq(r.dZero)?r.dNegOne:r.dNaN;if(this.mag<0||this.eq(r.dZero))return r.dNegOne;let i=0,n=r.fromDecimal(this);if(n.layer-t.layer>3){let s=n.layer-t.layer-3;i+=s,n.layer-=s}for(let s=0;s<100;++s)if(n.lt(r.dZero))n=r.pow(t,n),i-=1;else{if(n.lte(r.dOne))return e?r.fromNumber(i+n.toNumber()-1):r.fromNumber(i+r.slog_critical(t.toNumber(),n.toNumber()));i+=1,n=r.log(n,t)}return r.fromNumber(i)}static slog_critical(t,e){return t>10?e-1:r.critical_section(t,e,ze)}static tetrate_critical(t,e){return r.critical_section(t,e,Re)}static critical_section(t,e,i,n=!1){e*=10,e<0&&(e=0),e>10&&(e=10),t<2&&(t=2),t>10&&(t=10);let s=0,a=0;for(let h=0;h<W.length;++h)if(W[h]==t){s=i[h][Math.floor(e)],a=i[h][Math.ceil(e)];break}else if(W[h]<t&&W[h+1]>t){let f=(t-W[h])/(W[h+1]-W[h]);s=i[h][Math.floor(e)]*(1-f)+i[h+1][Math.floor(e)]*f,a=i[h][Math.ceil(e)]*(1-f)+i[h+1][Math.ceil(e)]*f;break}let c=e-Math.floor(e);return s<=0||a<=0?s*(1-c)+a*c:Math.pow(t,Math.log(s)/Math.log(t)*(1-c)+Math.log(a)/Math.log(t)*c)}layeradd10(t,e=!1){t=r.fromValue_noAlloc(t).toNumber();let i=r.fromDecimal(this);if(t>=1){i.mag<0&&i.layer>0?(i.sign=0,i.mag=0,i.layer=0):i.sign===-1&&i.layer==0&&(i.sign=1,i.mag=-i.mag);let n=Math.trunc(t);t-=n,i.layer+=n}if(t<=-1){let n=Math.trunc(t);if(t-=n,i.layer+=n,i.layer<0)for(let s=0;s<100;++s){if(i.layer++,i.mag=Math.log10(i.mag),!isFinite(i.mag))return i.sign===0&&(i.sign=1),i.layer<0&&(i.layer=0),i.normalize();if(i.layer>=0)break}}for(;i.layer<0;)i.layer++,i.mag=Math.log10(i.mag);return i.sign===0&&(i.sign=1,i.mag===0&&i.layer>=1&&(i.layer-=1,i.mag=1)),i.normalize(),t!==0?i.layeradd(t,10,e):i}layeradd(t,e,i=!1){let s=this.slog(e).toNumber()+t;return s>=0?r.tetrate(e,s,r.dOne,i):Number.isFinite(s)?s>=-1?r.log(r.tetrate(e,s+1,r.dOne,i),e):r.log(r.log(r.tetrate(e,s+2,r.dOne,i),e),e):r.dNaN}lambertw(){if(this.lt(-.3678794411710499))throw Error("lambertw is unimplemented for results less than -1, sorry!");if(this.mag<0)return r.fromNumber(Yt(this.toNumber()));if(this.layer===0)return r.fromNumber(Yt(this.sign*this.mag));if(this.layer===1)return Xt(this);if(this.layer===2)return Xt(this);if(this.layer>=3)return r.fromComponents_noNormalize(this.sign,this.layer-1,this.mag);throw"Unhandled behavior in lambertw()"}ssqrt(){if(this.sign==1&&this.layer>=3)return r.fromComponents_noNormalize(this.sign,this.layer-1,this.mag);let t=this.ln();return t.div(t.lambertw())}linear_sroot(t){if(t==1)return this;if(this.eq(r.dInf))return r.dInf;if(!this.isFinite())return r.dNaN;if(t==2)try{return this.ssqrt()}catch{return r.dNaN}if(t>0&&t<1)return this.root(t);if(t>-2&&t<-1)return r.fromNumber(t).add(2).pow(this.recip());if(t<=0)return r.dNaN;if(t==Number.POSITIVE_INFINITY){let e=this.toNumber();return e<Math.E&&e>je?this.pow(this.recip()):r.dNaN}if(this.eq(1))return r.dOne;if(this.lt(0))return r.dNaN;if(this.lte("1ee-16"))return t%2==1?this:r.dNaN;if(this.gt(1)){let e=r.dTen;this.gte(r.tetrate(10,t,1,!0))&&(e=this.iteratedlog(10,t-1,!0)),t<=1&&(e=this.root(t));let i=r.dZero,n=e.layer,s=e.iteratedlog(10,n,!0),a=s,c=s.div(2),h=!0;for(;h;)c=i.add(s).div(2),r.iteratedexp(10,n,c,!0).tetrate(t,1,!0).gt(this)?s=c:i=c,c.eq(a)?h=!1:a=c;return r.iteratedexp(10,n,c,!0)}else{let e=1,i=r.fromComponents(1,10,1),n=r.fromComponents(1,10,1),s=r.fromComponents(1,10,1),a=r.fromComponents(1,1,-16),c=r.dZero,h=r.fromComponents(1,10,1),f=a.pow10().recip(),S=r.dZero,M=f,C=f,T=Math.ceil(t)%2==0,I=0,N=r.fromComponents(1,10,1),E=!1,k=r.dZero,j=!1;for(;e<4;){if(e==2){if(T)break;s=r.fromComponents(1,10,1),a=i,e=3,h=r.fromComponents(1,10,1),N=r.fromComponents(1,10,1)}for(E=!1;a.neq(s);){if(k=a,a.pow10().recip().tetrate(t,1,!0).eq(1)&&a.pow10().recip().lt(.4))f=a.pow10().recip(),M=a.pow10().recip(),C=a.pow10().recip(),S=r.dZero,I=-1,e==3&&(N=a);else if(a.pow10().recip().tetrate(t,1,!0).eq(a.pow10().recip())&&!T&&a.pow10().recip().lt(.4))f=a.pow10().recip(),M=a.pow10().recip(),C=a.pow10().recip(),S=r.dZero,I=0;else if(a.pow10().recip().tetrate(t,1,!0).eq(a.pow10().recip().mul(2).tetrate(t,1,!0)))f=a.pow10().recip(),M=r.dZero,C=f.mul(2),S=f,T?I=-1:I=0;else{for(c=a.mul(12e-17),f=a.pow10().recip(),M=a.add(c).pow10().recip(),S=f.sub(M),C=f.add(S);M.tetrate(t,1,!0).eq(f.tetrate(t,1,!0))||C.tetrate(t,1,!0).eq(f.tetrate(t,1,!0))||M.gte(f)||C.lte(f);)c=c.mul(2),M=a.add(c).pow10().recip(),S=f.sub(M),C=f.add(S);if((e==1&&C.tetrate(t,1,!0).gt(f.tetrate(t,1,!0))&&M.tetrate(t,1,!0).gt(f.tetrate(t,1,!0))||e==3&&C.tetrate(t,1,!0).lt(f.tetrate(t,1,!0))&&M.tetrate(t,1,!0).lt(f.tetrate(t,1,!0)))&&(N=a),C.tetrate(t,1,!0).lt(f.tetrate(t,1,!0)))I=-1;else if(T)I=1;else if(e==3&&a.gt_tolerance(i,1e-8))I=0;else{for(;M.tetrate(t,1,!0).eq_tolerance(f.tetrate(t,1,!0),1e-8)||C.tetrate(t,1,!0).eq_tolerance(f.tetrate(t,1,!0),1e-8)||M.gte(f)||C.lte(f);)c=c.mul(2),M=a.add(c).pow10().recip(),S=f.sub(M),C=f.add(S);C.tetrate(t,1,!0).sub(f.tetrate(t,1,!0)).lt(f.tetrate(t,1,!0).sub(M.tetrate(t,1,!0)))?I=0:I=1}}if(I==-1&&(j=!0),e==1&&I==1||e==3&&I!=0)if(s.eq(r.fromComponents(1,10,1)))a=a.mul(2);else{let X=!1;if(E&&(I==1&&e==1||I==-1&&e==3)&&(X=!0),a=a.add(s).div(2),X)break}else if(s.eq(r.fromComponents(1,10,1)))s=a,a=a.div(2);else{let X=!1;if(E&&(I==1&&e==1||I==-1&&e==3)&&(X=!0),s=s.sub(h),a=a.sub(h),X)break}if(s.sub(a).div(2).abs().gt(h.mul(1.5))&&(E=!0),h=s.sub(a).div(2).abs(),a.gt("1e18")||a.eq(k))break}if(a.gt("1e18")||!j||N==r.fromComponents(1,10,1))break;e==1?i=N:e==3&&(n=N),e++}s=i,a=r.fromComponents(1,1,-18);let G=a,z=r.dZero,Y=!0;for(;Y;)if(s.eq(r.fromComponents(1,10,1))?z=a.mul(2):z=s.add(a).div(2),r.pow(10,z).recip().tetrate(t,1,!0).gt(this)?a=z:s=z,z.eq(G)?Y=!1:G=z,a.gt("1e18"))return r.dNaN;if(z.eq_tolerance(i,1e-15)){if(n.eq(r.fromComponents(1,10,1)))return r.dNaN;for(s=r.fromComponents(1,10,1),a=n,G=a,z=r.dZero,Y=!0;Y;)if(s.eq(r.fromComponents(1,10,1))?z=a.mul(2):z=s.add(a).div(2),r.pow(10,z).recip().tetrate(t,1,!0).gt(this)?a=z:s=z,z.eq(G)?Y=!1:G=z,a.gt("1e18"))return r.dNaN;return z.pow10().recip()}else return z.pow10().recip()}}pentate(t=2,e=r.fromComponents_noNormalize(1,0,1),i=!1){e=r.fromValue_noAlloc(e);let n=t;t=Math.trunc(t);let s=n-t;s!==0&&(e.eq(r.dOne)?(++t,e=r.fromNumber(s)):this.eq(10)?e=e.layeradd10(s,i):e=e.layeradd(s,this,i));for(let a=0;a<t;++a){if(e=this.tetrate(e.toNumber(),r.dOne,i),!isFinite(e.layer)||!isFinite(e.mag))return e.normalize();if(a>10)return e}return e}sin(){return this.mag<0?this:this.layer===0?r.fromNumber(Math.sin(this.sign*this.mag)):r.fromComponents_noNormalize(0,0,0)}cos(){return this.mag<0?r.dOne:this.layer===0?r.fromNumber(Math.cos(this.sign*this.mag)):r.fromComponents_noNormalize(0,0,0)}tan(){return this.mag<0?this:this.layer===0?r.fromNumber(Math.tan(this.sign*this.mag)):r.fromComponents_noNormalize(0,0,0)}asin(){return this.mag<0?this:this.layer===0?r.fromNumber(Math.asin(this.sign*this.mag)):r.fromComponents_noNormalize(Number.NaN,Number.NaN,Number.NaN)}acos(){return this.mag<0?r.fromNumber(Math.acos(this.toNumber())):this.layer===0?r.fromNumber(Math.acos(this.sign*this.mag)):r.fromComponents_noNormalize(Number.NaN,Number.NaN,Number.NaN)}atan(){return this.mag<0?this:this.layer===0?r.fromNumber(Math.atan(this.sign*this.mag)):r.fromNumber(Math.atan(this.sign*(1/0)))}sinh(){return this.exp().sub(this.negate().exp()).div(2)}cosh(){return this.exp().add(this.negate().exp()).div(2)}tanh(){return this.sinh().div(this.cosh())}asinh(){return r.ln(this.add(this.sqr().add(1).sqrt()))}acosh(){return r.ln(this.add(this.sqr().sub(1).sqrt()))}atanh(){return this.abs().gte(1)?r.fromComponents_noNormalize(Number.NaN,Number.NaN,Number.NaN):r.ln(this.add(1).div(r.fromNumber(1).sub(this))).div(2)}ascensionPenalty(t){return t===0?this:this.root(r.pow(10,t))}egg(){return this.add(9)}lessThanOrEqualTo(t){return this.cmp(t)<1}lessThan(t){return this.cmp(t)<0}greaterThanOrEqualTo(t){return this.cmp(t)>-1}greaterThan(t){return this.cmp(t)>0}static smoothDamp(t,e,i,n){return new r(t).add(new r(e).minus(new r(t)).times(new r(i)).times(new r(n)))}clone(){return this}static clone(t){return r.fromComponents(t.sign,t.layer,t.mag)}mod(t){let e=r.fromValue_noAlloc(t).abs();if(e.eq(r.dZero))return r.dZero;let i=this.toNumber(),n=e.toNumber();return isFinite(i)&&isFinite(n)&&i!=0&&n!=0?new r(i%n):this.sub(e).eq(this)?r.dZero:e.sub(this).eq(e)?this:this.sign==-1?this.abs().mod(e).neg():this.sub(this.div(e).floor().mul(e))}modulo(t){return this.mod(t)}modular(t){return this.mod(t)}softcap(t,e,i){let n=this.clone();return n.gte(t)&&([0,"pow"].includes(i)&&(n=n.div(t).pow(e).mul(t)),[1,"mul"].includes(i)&&(n=n.sub(t).div(e).add(t))),n}static softcap(t,e,i,n){return new r(t).softcap(e,i,n)}scale(t,e,i,n=!1){t=new r(t),e=new r(e);let s=this.clone();return s.gte(t)&&([0,"pow"].includes(i)&&(s=n?s.mul(t.pow(e.sub(1))).root(e):s.pow(e).div(t.pow(e.sub(1)))),[1,"exp"].includes(i)&&(s=n?s.div(t).max(1).log(e).add(t):r.pow(e,s.sub(t)).mul(t))),s}static scale(t,e,i,n,s=!1){return new r(t).scale(e,i,n,s)}format(t=2,e=9,i="mixed_sc"){return K.format(this.clone(),t,e,i)}static format(t,e=2,i=9,n="mixed_sc"){return K.format(new r(t),e,i,n)}formatST(t=2,e=9,i="st"){return K.format(this.clone(),t,e,i)}static formatST(t,e=2,i=9,n="st"){return K.format(new r(t),e,i,n)}formatGain(t,e="mixed_sc"){return K.formatGain(this.clone(),t,e)}static formatGain(t,e,i="mixed_sc"){return K.formatGain(new r(t),e,i)}toRoman(t=5e3){t=new r(t);let e=this.clone();if(e.gte(t)||e.lt(1))return e;let i=e.toNumber(),n={M:1e3,CM:900,D:500,CD:400,C:100,XC:90,L:50,XL:40,X:10,IX:9,V:5,IV:4,I:1},s="";for(let a of Object.keys(n)){let c=Math.floor(i/n[a]);i-=c*n[a],s+=a.repeat(c)}return s}static toRoman(t,e){return new r(t).toRoman(e)}};r.dZero=r.fromComponents_noNormalize(0,0,0),r.dOne=r.fromComponents_noNormalize(1,0,1),r.dNegOne=r.fromComponents_noNormalize(-1,0,1),r.dTwo=r.fromComponents_noNormalize(1,0,2),r.dTen=r.fromComponents_noNormalize(1,0,10),r.dNaN=r.fromComponents_noNormalize(Number.NaN,Number.NaN,Number.NaN),r.dInf=r.fromComponents_noNormalize(1,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),r.dNegInf=r.fromComponents_noNormalize(-1,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY),r.dNumberMax=r.fromComponents(1,0,Number.MAX_VALUE),r.dNumberMin=r.fromComponents(1,0,Number.MIN_VALUE),r.fromStringCache=new ct(qe),B([nt()],r.prototype,"sign",2),B([nt()],r.prototype,"mag",2),B([nt()],r.prototype,"layer",2),r=B([_t()],r);var Q=[[["","U","D","T","Qa","Qt","Sx","Sp","Oc","No"],["","Dc","Vg","Tg","Qag","Qtg","Sxg","Spg","Ocg","Nog"],["","Ce","De","Te","Qae","Qte","Sxe","Spe","Oce","Noe"]],[["","Mi","Mc","Na","Pc","Fm","At","Zp","Yc","Xn"],["","Me","Du","Tr","Te","Pe","He","Hp","Ot","En"],["","c","Ic","TCn","TeC","PCn","HCn","HpC","OCn","ECn"],["","Hc","DHe","THt","TeH","PHc","HHe","HpH","OHt","EHc"]]],Ge=["st","sc","scientific","omega","omega_short","elemental","old_sc","eng","mixed_sc","layer","standard","inf"],V={omega:{config:{greek:"\u03B2\u03B6\u03BB\u03C8\u03A3\u0398\u03A8\u03C9",infinity:"\u03A9"},format(o){o=new r(o);let t=r.floor(o.div(1e3)),e=r.floor(t.div(V.omega.config.greek.length)),i=V.omega.config.greek[t.toNumber()%V.omega.config.greek.length]+wt(o.toNumber()%1e3);(V.omega.config.greek[t.toNumber()%V.omega.config.greek.length]===void 0||t.toNumber()>Number.MAX_SAFE_INTEGER)&&(i="\u03C9");let s=r.log(o,8e3).toNumber();if(e.equals(0))return i;if(e.gt(0)&&e.lte(3)){let h=[];for(let f=0;f<e.toNumber();f++)h.push("\u03C9");return`${h.join("^")}^${i}`}else{if(e.gt(3)&&e.lt(10))return`\u03C9(${e.toFixed(0)})^${i}`;if(s<3)return`\u03C9(${V.omega.format(e)})^${i}`;if(s<6)return`\u03C9(${V.omega.format(e)})`}let a=r.pow(8e3,s%1);return`\u03C9[${s<100?Math.floor(s).toFixed(0):V.omega.format(r.floor(s))}](${V.omega.format(a)})`}},omega_short:{config:{greek:"\u03B2\u03B6\u03BB\u03C8\u03A3\u0398\u03A8\u03C9",infinity:"\u03A9"},format(o){o=new r(o);let t=r.floor(o.div(1e3)),e=r.floor(t.div(V.omega_short.config.greek.length)),i=V.omega_short.config.greek[t.toNumber()%V.omega_short.config.greek.length]+wt(o.toNumber()%1e3);(V.omega_short.config.greek[t.toNumber()%V.omega_short.config.greek.length]===void 0||t.toNumber()>Number.MAX_SAFE_INTEGER)&&(i="\u03C9");let s=r.log(o,8e3).toNumber();if(e.equals(0))return i;if(e.gt(0)&&e.lte(2)){let h=[];for(let f=0;f<e.toNumber();f++)h.push("\u03C9");return`${h.join("^")}^${i}`}else if(e.gt(2)&&e.lt(10))return`\u03C9(${e.toFixed(0)})^${i}`;let a=r.pow(8e3,s%1);return`\u03C9[${s<100?Math.floor(s).toFixed(0):V.omega_short.format(r.floor(s))}](${V.omega_short.format(a)})`}},elemental:{config:{element_lists:[["H"],["He","Li","Be","B","C","N","O","F"],["Ne","Na","Mg","Al","Si","P","S","Cl"],["Ar","K","Ca","Sc","Ti","V","Cr","Mn","Fe","Co","Ni","Cu","Zn","Ga","Ge","As","Se","Br"],["Kr","Rb","Sr","Y","Zr","Nb","Mo","Tc","Ru","Rh","Pd","Ag","Cd","In","Sn","Sb","Te","I"],["Xe","Cs","Ba","La","Ce","Pr","Nd","Pm","Sm","Eu","Gd","Tb","Dy","Ho","Er","Tm","Yb","Lu","Hf","Ta","W","Re","Os","Ir","Pt","Au","Hg","Tl","Pb","Bi","Po","At"],["Rn","Fr","Ra","Ac","Th","Pa","U","Np","Pu","Am","Cm","Bk","Cf","Es","Fm","Md","No","Lr","Rf","Db","Sg","Bh","Hs","Mt","Ds","Rg","Cn","Nh","Fl","Mc","Lv","Ts"],["Og"]]},getOffset(o){if(o==1)return 1;let t=Math.floor(o/2),e=2*t*(t+1)*(2*t+1)/3-2;return o%2==1&&(e+=2*Math.pow(t+1,2)),e},getAbbreviation(o,t){let e=V.elemental.abbreviationLength(o),i=Math.floor(e*t),n=i+V.elemental.getOffset(o);return n>118?V.elemental.beyondOg(n):V.elemental.config.element_lists[o-1][i]},beyondOg(o){let t=Math.floor(Math.log10(o)),e=["n","u","b","t","q","p","h","s","o","e"],i="";for(let n=t;n>=0;n--){let s=Math.floor(o/Math.pow(10,n))%10;i==""?i=e[s].toUpperCase():i+=e[s]}return i},abbreviationLength(o){return o==1?1:Math.pow(Math.floor(o/2)+1,2)*2},getAbbreviationAndValue(o){let t=o.log(118).toNumber(),e=Math.floor(t)+1,i=V.elemental.abbreviationLength(e),n=t-e+1,s=Math.floor(n*i),a=V.elemental.getAbbreviation(e,n),c=new r(118).pow(e+s/i-1);return[a,c]},formatElementalPart(o,t){return t.eq(1)?o:`${t} ${o}`},format(o,t){if(o.gt(new r(118).pow(new r(118).pow(new r(118).pow(4)))))return"e"+V.elemental.format(o.log10(),t);let e=o.log(118),n=e.log(118).log(118).toNumber(),s=Math.max(4-n*2,1),a=[];for(;e.gte(1)&&a.length<s;){let[h,f]=V.elemental.getAbbreviationAndValue(e),S=e.div(f).floor();e=e.sub(S.mul(f)),a.unshift([h,S])}if(a.length>=s)return a.map(h=>V.elemental.formatElementalPart(h[0],h[1])).join(" + ");let c=new r(118).pow(e).toFixed(a.length===1?3:t);return a.length===0?c:a.length===1?`${c} \xD7 ${V.elemental.formatElementalPart(a[0][0],a[0][1])}`:`${c} \xD7 (${a.map(h=>V.elemental.formatElementalPart(h[0],h[1])).join(" + ")})`}},old_sc:{format(o,t){o=new r(o);let e=o.log10().floor();if(e.lt(9))return e.lt(3)?o.toFixed(t):o.floor().toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,");{if(o.gte("eeee10")){let n=o.slog();return(n.gte(1e9)?"":new r(10).pow(n.sub(n.floor())).toFixed(4))+"F"+V.old_sc.format(n.floor(),0)}let i=o.div(new r(10).pow(e));return(e.log10().gte(9)?"":i.toFixed(4))+"e"+V.old_sc.format(e,0)}}},eng:{format(o,t){o=new r(o);let e=o.log10().floor();if(e.lt(9))return e.lt(3)?o.toFixed(t):o.floor().toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,");{if(o.gte("eeee10")){let n=o.slog();return(n.gte(1e9)?"":new r(10).pow(n.sub(n.floor())).toFixed(4))+"F"+V.eng.format(n.floor(),0)}let i=o.div(new r(1e3).pow(e.div(3).floor()));return(e.log10().gte(9)?"":i.toFixed(new r(4).sub(e.sub(e.div(3).floor().mul(3)))))+"e"+V.eng.format(e.div(3).floor().mul(3),0)}}},mixed_sc:{format(o,t,e){o=new r(o);let i=o.log10().floor();return i.lt(303)&&i.gte(e)?q(o,t,e,"st"):q(o,t,e,"sc")}},layer:{layers:["infinity","eternity","reality","equality","affinity","celerity","identity","vitality","immunity","atrocity"],format(o,t,e){o=new r(o);let i=o.max(1).log10().max(1).log(Wt.log10()).floor();if(i.lte(0))return q(o,t,e,"sc");o=new r(10).pow(o.max(1).log10().div(Wt.log10().pow(i)).sub(i.gte(1)?1:0));let n=i.div(10).floor(),s=i.toNumber()%10-1;return q(o,Math.max(4,t),e,"sc")+" "+(n.gte(1)?"meta"+(n.gte(2)?"^"+q(n,0,e,"sc"):"")+"-":"")+(isNaN(s)?"nanity":V.layer.layers[s])}},standard:{tier1(o){return Q[0][0][o%10]+Q[0][1][Math.floor(o/10)%10]+Q[0][2][Math.floor(o/100)]},tier2(o){let t=o%10,e=Math.floor(o/10)%10,i=Math.floor(o/100)%10,n="";return o<10?Q[1][0][o]:(e==1&&t==0?n+="Vec":n+=Q[1][1][t]+Q[1][2][e],n+=Q[1][3][i],n)}},inf:{format(o,t,e){o=new r(o);let i=0,n=new r(Number.MAX_VALUE),s=["","\u221E","\u03A9","\u03A8","\u028A"],a=["","","m","mm","mmm"];for(;o.gte(n);)o=o.log(n),i++;return i==0?q(o,t,e,"sc"):o.gte(3)?a[i]+s[i]+"\u03C9^"+q(o.sub(1),t,e,"sc"):o.gte(2)?a[i]+"\u03C9"+s[i]+"-"+q(n.pow(o.sub(2)),t,e,"sc"):a[i]+s[i]+"-"+q(n.pow(o.sub(1)),t,e,"sc")}}},Wt=new r(2).pow(1024),Be="\u2080\u2081\u2082\u2083\u2084\u2085\u2086\u2087\u2088\u2089",Ue="\u2070\xB9\xB2\xB3\u2074\u2075\u2076\u2077\u2078\u2079";function wt(o){return o.toFixed(0).split("").map(t=>t==="-"?"\u208B":Be[parseInt(t,10)]).join("")}function $e(o){return o.toFixed(0).split("").map(t=>t==="-"?"\u208B":Ue[parseInt(t,10)]).join("")}function Ze(o,t=2,e=9,i="st"){return q(o,t,e,i)}function q(o,t=2,e=9,i="mixed_sc"){o=new r(o);let n=o.lt(0)?"-":"";if(o.mag==1/0)return n+"Infinity";if(Number.isNaN(o.mag))return n+"NaN";if(o.lt(0)&&(o=o.mul(-1)),o.eq(0))return o.toFixed(t);let s=o.log10().floor();switch(i){case"sc":case"scientific":if(o.log10().lt(Math.min(-t,0))&&t>1){let a=o.log10().ceil(),c=o.div(a.eq(-1)?new r(.1):new r(10).pow(a)),h=a.mul(-1).max(1).log10().gte(9);return n+(h?"":c.toFixed(2))+"e"+q(a,0,e,"mixed_sc")}else if(s.lt(e)){let a=Math.max(Math.min(t-s.toNumber(),t),0);return n+(a>0?o.toFixed(a):o.toFixed(a).toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"))}else{if(o.gte("eeee10")){let h=o.slog();return(h.gte(1e9)?"":new r(10).pow(h.sub(h.floor())).toFixed(2))+"F"+q(h.floor(),0)}let a=o.div(new r(10).pow(s)),c=s.log10().gte(9);return n+(c?"":a.toFixed(2))+"e"+q(s,0,e,"mixed_sc")}case"st":case"standard":{let a=o.log(1e3).floor();if(a.lt(1))return n+o.toFixed(Math.max(Math.min(t-s.toNumber(),t),0));{let c=a.mul(3),h=a.log10().floor();if(h.gte(3e3))return"e"+q(s,t,e,"st");let f="";if(a.lt(4))f=["","K","M","B"][Math.round(a.toNumber())];else{let M=Math.floor(a.log(1e3).toNumber());for(M<100&&(M=Math.max(M-1,0)),a=a.sub(1).div(new r(10).pow(M*3));a.gt(0);){let C=a.div(1e3).floor(),T=a.sub(C.mul(1e3)).floor().toNumber();T>0&&(T==1&&!M&&(f="U"),M&&(f=V.standard.tier2(M)+(f?"-"+f:"")),T>1&&(f=V.standard.tier1(T)+f)),a=C,M++}}let S=o.div(new r(10).pow(c));return n+(h.gte(10)?"":S.toFixed(new r(2).sub(s.sub(c)).add(1).toNumber())+" ")+f}}default:return n+V[i].format(o,t,e)}}function _e(o,t,e="mixed_sc"){o=new r(o),t=new r(t);let i=o.add(t),n,s=i.div(o);return s.gte(10)&&o.gte(1e100)?(s=s.log10().mul(20),n="(+"+q(s,2,9,e)+" OoMs/sec)"):n="(+"+q(t,2,9,e)+"/sec)",n}function ft(o,t=2,e="s"){return o=new r(o),o.gte(86400)?q(o.div(86400).floor(),0,12,"sc")+":"+ft(o.mod(86400),t,"d"):o.gte(3600)||e=="d"?(o.div(3600).gte(10)||e!="d"?"":"0")+q(o.div(3600).floor(),0,12,"sc")+":"+ft(o.mod(3600),t,"h"):o.gte(60)||e=="h"?(o.div(60).gte(10)||e!="h"?"":"0")+q(o.div(60).floor(),0,12,"sc")+":"+ft(o.mod(60),t,"m"):(o.gte(10)||e!="m"?"":"0")+q(o,t,12,"sc")}function He(o,t=!1,e=0,i=9,n="mixed_sc"){let s=j=>q(j,e,i,n);o=new r(o);let a=o.mul(1e3).mod(1e3).floor(),c=o.mod(60).floor(),h=o.div(60).mod(60).floor(),f=o.div(3600).mod(24).floor(),S=o.div(86400).mod(365.2425).floor(),M=o.div(31556952).floor(),C=M.eq(1)?" year":" years",T=S.eq(1)?" day":" days",I=f.eq(1)?" hour":" hours",N=h.eq(1)?" minute":" minutes",E=c.eq(1)?" second":" seconds",k=a.eq(1)?" millisecond":" milliseconds";return`${M.gt(0)?s(M)+C+", ":""}${S.gt(0)?s(S)+T+", ":""}${f.gt(0)?s(f)+I+", ":""}${h.gt(0)?s(h)+N+", ":""}${c.gt(0)?s(c)+E+",":""}${t&&a.gt(0)?" "+s(a)+k:""}`.replace(/,([^,]*)$/,"$1").trim()}function Ye(o){return o=new r(o),q(new r(1).sub(o).mul(100))+"%"}function Xe(o){return o=new r(o),q(o.mul(100))+"%"}function We(o,t=2){return o=new r(o),o.gte(1)?"\xD7"+o.format(t):"/"+o.pow(-1).format(t)}function Qe(o,t,e=10){return r.gte(o,10)?r.pow(e,r.log(o,e).pow(t)):new r(o)}function vt(o,t){o=new r(o);let e=(a=>a.map((c,h)=>({name:c.name,altName:c.altName,value:r.pow(1e3,new r(h).add(1))})))([{name:"K",altName:"Kilo"},{name:"M",altName:"Mega"},{name:"G",altName:"Giga"},{name:"T",altName:"Tera"},{name:"P",altName:"Peta"},{name:"E",altName:"Exa"},{name:"Z",altName:"Zetta"},{name:"Y",altName:"Yotta"},{name:"R",altName:"Ronna"},{name:"Q",altName:"Quetta"}]),i="",n=o.lte(0)?0:r.min(r.log(o,1e3).sub(1),e.length-1).floor().toNumber(),s=e[n];if(n===0)switch(t){case 1:i="";break;case 2:case 0:default:i=o.format();break}switch(t){case 1:i=s.name;break;case 2:i=`${o.divide(s.value).format()}`;break;case 3:i=s.altName;break;case 0:default:i=`${o.divide(s.value).format()} ${s.name}`;break}return i}function Ke(o,t=!1){return`${vt(o,2)} ${vt(o,1)}eV${t?"/c^2":""}`}var K={...V,toSubscript:wt,toSuperscript:$e,formatST:Ze,format:q,formatGain:_e,formatTime:ft,formatTimeLong:He,formatReduction:Ye,formatPercent:Xe,formatMult:We,expMult:Qe,metric:vt,ev:Ke};r.formats=K;var v=(()=>{let o=t=>new r(t);return Object.getOwnPropertyNames(r).filter(t=>!Object.getOwnPropertyNames(class{}).includes(t)).forEach(t=>{o[t]=r[t]}),o})();var J=class{constructor(t){this.id=t.id,this.name=t.name??"",this.desc=t.desc??"",this.value=t.value,this.order=t.order??99}},H=class{constructor(t=1,e){this.addBoost=this.setBoost;e=e?Array.isArray(e)?e:[e]:void 0,this.baseEffect=v(t),this.boostArray=[],e&&e.forEach(i=>{this.boostArray.push(new J(i))})}getBoosts(t,e){let i=[],n=[];for(let s=0;s<this.boostArray.length;s++)(typeof t=="string"&&t===this.boostArray[s].id||t instanceof RegExp&&t.test(this.boostArray[s].id))&&(i.push(this.boostArray[s]),n.push(s));return e?[i,n]:i}getBoost(t){return this.getBoosts(t)[0]??null}removeBoost(t){for(let e=0;e<this.boostArray.length;e++)if(t===this.boostArray[e].id){this.boostArray.splice(e,1);break}}setBoost(t,e,i,n,s){if(t)if(typeof t=="string"){let a=t,c=e??"",h=i??"",f=n??(C=>C),S=s,M=this.getBoosts(a,!0);M[0][0]?this.boostArray[M[1][0]]=new J({id:a,name:c,desc:h,value:f,order:S}):this.boostArray.push(new J({id:a,name:c,desc:h,value:f,order:S}))}else{t=Array.isArray(t)?t:[t];for(let a=0;a<t.length;a++){let c=this.getBoosts(t[a].id,!0);c[0][0]?this.boostArray[c[1][0]]=new J(t[a]):this.boostArray=this.boostArray.concat(new J(t[a]))}}}calculate(t=this.baseEffect){let e=v(t),i=this.boostArray;i=i.sort((n,s)=>n.order-s.order);for(let n=0;n<i.length;n++)e=i[n].value(e);return e}};function At(o,t,e=1,i=!1){if(o=v(o),e=v(e),e.lte(0))return[v(0),v(0)];if(i=t.el??i,e.eq(1)){if(i){let h=t.cost(t.level),f=o.gte(h);return[f?v(1):v(0),f?h:v(0)]}let a=t.cost(t.level),c=o.gte(a);return[c?v(1):v(0),c?a:v(0)]}if(t.costBulk){let[a,c]=t.costBulk(o,t.level,e),h=o.gte(a);return[h?c:v(0),h?a:v(0)]}function n(a,c){let h=v();for(let f=v(0);f.lte(c);f=f.add(1))h=h.add(a(f));return h}function s(a,c){if(i){let S=v(0),M=e,C=v(0);for(;S.lessThanOrEqualTo(M);){let T=S.plus(M).dividedBy(2).floor();a(T).lte(c)?(C=T,S=T.plus(1)):M=T.minus(1)}return[C,C.gt(0)?a(C):v(0)]}let h=v(0),f=v(1);for(;n(a,f).lt(c);)f=f.mul(2);for(;h.lt(f);){let S=v.floor(h.add(f).div(2));n(a,S).lt(c)?h=S.add(1):f=S}return[h,h.gt(0)?n(a,h.sub(1)):v(0)]}return s(a=>t.cost(t.level.add(a)),o)}var st=class{constructor(t){t=t??{},this.id=t.id??-1,this.level=t.level?v(t.level):v(1)}};B([nt()],st.prototype,"id",2),B([ot(()=>r)],st.prototype,"level",2);var Ct=class{get data(){return this.dataPointerFn()}constructor(t,e){let i=typeof e=="function"?e():e;this.dataPointerFn=typeof e=="function"?e:()=>i,this.id=t.id,this.name=t.name??t.id,this.description=t.description??"",this.cost=t.cost,this.costBulk=t.costBulk,this.maxLevel=t.maxLevel??v(1),this.effect=t.effect,this.el=t.el}get level(){return((this??{data:{level:v(1)}}).data??{level:v(1)}).level}set level(t){this.data.level=v(t)}},tt=class{constructor(){this.value=v(0),this.upgrades=[]}};B([ot(()=>r)],tt.prototype,"value",2),B([ot(()=>st)],tt.prototype,"upgrades",2);var mt=class{get pointer(){return this.pointerFn()}onLoadData(){for(let t of this.upgrades)t.effect&&t.effect(t.level,t)}constructor(t=new tt,e=v(0),i=v(1)){this.defaultVal=v(e),this.defaultBoost=v(i),this.upgrades=[],this.pointerFn=typeof t=="function"?t:()=>t,this.boost=new H(i),this.pointer.value=this.defaultVal}get value(){return this.pointer.value}set value(t){this.pointer.value=t}reset(t=!0,e=!0){t&&(this.value=this.defaultVal),e&&this.upgrades.forEach(i=>{i.level=v(0)})}gain(t=1e3){let e=this.boost.calculate().mul(v(t).div(1e3));return this.pointer.value=this.pointer.value.add(e),e}pointerAddUpgrade(t){let e=new st(t);return this.pointer.upgrades.push(e),t}pointerGetUpgrade(t){let e=null;if(t===void 0)return null;for(let i=0;i<this.pointer.upgrades.length;i++)if(this.pointer.upgrades[i].id===t){e=this.pointer.upgrades[i];break}return e}getUpgrade(t){let e=null;if(t===void 0)return null;if(typeof t=="string"){for(let i=0;i<this.upgrades.length;i++)if(this.upgrades[i].id===t){e=this.upgrades[i];break}}return e}addUpgrade(t,e=!0){Array.isArray(t)||(t=[t]);let i=[];for(let n=0;n<t.length;n++){this.pointerAddUpgrade(t[n]);let s=this.pointer.upgrades.length,a=new Ct(t[n],()=>this.pointerGetUpgrade(t[n].id)??this.pointer.upgrades[s-1]);a.effect&&e&&a.effect(a.level,a),i.push(a)}this.upgrades=this.upgrades.concat(i)}updateUpgrade(t,e){let i=this.getUpgrade(t);i!==null&&(i.name=e.name??i.name,i.cost=e.cost??i.cost,i.maxLevel=e.maxLevel??i.maxLevel,i.effect=e.effect??i.effect)}calculateUpgrade(t,e=1,i=!1){let n=this.getUpgrade(t);return n===null?(console.warn(`Upgrade "${t}" not found.`),[v(0),v(0)]):At(this.value,n,e,i)}getNextCost(t,e=0,i=!1){let n=this.getUpgrade(t);if(n===null)return console.warn(`Upgrade "${t}" not found.`),v(0);let s=At(this.value,n,e,i)[1];return n.cost(n.level.add(s))}buyUpgrade(t,e=1){let i=this.getUpgrade(t);if(i===null)return!1;e=v(e);let n=At(this.value,i,e);return n[0].lte(0)?!1:(this.pointer.value=this.pointer.value.sub(n[1]),i.level=i.level.add(n[0]),typeof i.effect=="function"&&i.effect(i.level,i),!0)}};var at=class{constructor(t=0){this.value=v(t)}};B([ot(()=>r)],at.prototype,"value",2);var Kt=class{get pointer(){return this.pointerFn}constructor(t,e=!0,i=0){this.initial=v(i),t=t??new at(this.initial),this.pointerFn=typeof t=="function"?t():t,e&&(this.boost=new H(this.initial))}update(){this.boost&&(this.pointer.value=this.boost.calculate())}get value(){return this.boost&&(this.pointer.value=this.boost.calculate()),this.pointer.value}set value(t){if(this.boost)throw new Error("Cannot set value of attributeStatic when boost is enabled.");this.pointer.value=t}};var lt=class{constructor(t,e,i){this.x=t,this.y=e,this.properties=i||{}}setValue(t,e){return this.properties[t]=e,e}getValue(t){return this.properties[t]}},ht=class{constructor(t,e,i){this.x_size=t,this.y_size=e,this.cells=[];for(let n=0;n<e;n++){this.cells[n]=[];for(let s=0;s<t;s++)this.cells[n][s]=new lt(s,n,i)}}getAll(){let t=[];for(let e=0;e<this.y_size;e++)for(let i=0;i<this.x_size;i++)t.push(this.cells[e][i]);return t}all(){return this.getAll()}getAllX(t){let e=[];for(let i=0;i<this.y_size;i++)e.push(this.cells[i][t]);return e}allX(t){return this.getAllX(t)}getAllY(t){let e=[];for(let i=0;this.x_size;i++)e.push(this.cells[t][i]);return e}allY(t){return this.getAllY(t)}getCell(t,e){return this.cells[e][t]}setCell(t,e,i){this.cells[e][t]=i}getAdjacent(t,e){let i=[];return i[0]=this.getCell(t,e+1),i[1]=this.getCell(t+1,e),i[2]=this.getCell(t,e-1),i[3]=this.getCell(t-1,e+1),i}getDiagonal(t,e){let i=[];return i[0]=this.getCell(t-1,e+1),i[1]=this.getCell(t+1,e+1),i[2]=this.getCell(t+1,e-1),i[3]=this.getCell(t-1,e-1),i}getEncircling(t,e){return this.getAdjacent(t,e).concat(this.getDiagonal(t,e))}static getDistance(t,e,i,n){return Math.abs(Math.sqrt(Math.pow(i-t,2)+Math.pow(n-e,2)))}};var Je={E:v,classes:{boost:H,currency:tt,currencyStatic:mt,attribute:at,grid:ht,gridCell:lt}};function Jt(){typeof process!="object"&&typeof window<"u"&&(window.eMath=Je)}Jt();})();
/*! Bundled license information:

reflect-metadata/Reflect.js:
  (*! *****************************************************************************
  Copyright (C) Microsoft. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0
  
  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.
  
  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** *)
*/
