"use strict";(()=>{var vt=Object.create;var it=Object.defineProperty;var xt=Object.getOwnPropertyDescriptor;var At=Object.getOwnPropertyNames;var bt=Object.getPrototypeOf,St=Object.prototype.hasOwnProperty;var U=(y=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(y,{get:(t,e)=>(typeof require<"u"?require:t)[e]}):y)(function(y){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+y+'" is not supported')});var wt=(y,t)=>()=>(t||y((t={exports:{}}).exports,t),t.exports);var Mt=(y,t,e,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let x of At(t))!St.call(y,x)&&x!==e&&it(y,x,{get:()=>t[x],enumerable:!(n=xt(t,x))||n.enumerable});return y};var Ct=(y,t,e)=>(e=y!=null?vt(bt(y)):{},Mt(t||!y||!y.__esModule?it(e,"default",{value:y,enumerable:!0}):e,y));var ot=wt((Ft,G)=>{var $=function(){var y=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",n={};function x(r,s){if(!n[r]){n[r]={};for(var p=0;p<r.length;p++)n[r][r.charAt(p)]=p}return n[r][s]}var i={compressToBase64:function(r){if(r==null)return"";var s=i._compress(r,6,function(p){return t.charAt(p)});switch(s.length%4){default:case 0:return s;case 1:return s+"===";case 2:return s+"==";case 3:return s+"="}},decompressFromBase64:function(r){return r==null?"":r==""?null:i._decompress(r.length,32,function(s){return x(t,r.charAt(s))})},compressToUTF16:function(r){return r==null?"":i._compress(r,15,function(s){return y(s+32)})+" "},decompressFromUTF16:function(r){return r==null?"":r==""?null:i._decompress(r.length,16384,function(s){return r.charCodeAt(s)-32})},compressToUint8Array:function(r){for(var s=i.compress(r),p=new Uint8Array(s.length*2),o=0,c=s.length;o<c;o++){var v=s.charCodeAt(o);p[o*2]=v>>>8,p[o*2+1]=v%256}return p},decompressFromUint8Array:function(r){if(r==null)return i.decompress(r);for(var s=new Array(r.length/2),p=0,o=s.length;p<o;p++)s[p]=r[p*2]*256+r[p*2+1];var c=[];return s.forEach(function(v){c.push(y(v))}),i.decompress(c.join(""))},compressToEncodedURIComponent:function(r){return r==null?"":i._compress(r,6,function(s){return e.charAt(s)})},decompressFromEncodedURIComponent:function(r){return r==null?"":r==""?null:(r=r.replace(/ /g,"+"),i._decompress(r.length,32,function(s){return x(e,r.charAt(s))}))},compress:function(r){return i._compress(r,16,function(s){return y(s)})},_compress:function(r,s,p){if(r==null)return"";var o,c,v={},g={},w="",m="",l="",a=2,u=3,f=2,A=[],d=0,h=0,S;for(S=0;S<r.length;S+=1)if(w=r.charAt(S),Object.prototype.hasOwnProperty.call(v,w)||(v[w]=u++,g[w]=!0),m=l+w,Object.prototype.hasOwnProperty.call(v,m))l=m;else{if(Object.prototype.hasOwnProperty.call(g,l)){if(l.charCodeAt(0)<256){for(o=0;o<f;o++)d=d<<1,h==s-1?(h=0,A.push(p(d)),d=0):h++;for(c=l.charCodeAt(0),o=0;o<8;o++)d=d<<1|c&1,h==s-1?(h=0,A.push(p(d)),d=0):h++,c=c>>1}else{for(c=1,o=0;o<f;o++)d=d<<1|c,h==s-1?(h=0,A.push(p(d)),d=0):h++,c=0;for(c=l.charCodeAt(0),o=0;o<16;o++)d=d<<1|c&1,h==s-1?(h=0,A.push(p(d)),d=0):h++,c=c>>1}a--,a==0&&(a=Math.pow(2,f),f++),delete g[l]}else for(c=v[l],o=0;o<f;o++)d=d<<1|c&1,h==s-1?(h=0,A.push(p(d)),d=0):h++,c=c>>1;a--,a==0&&(a=Math.pow(2,f),f++),v[m]=u++,l=String(w)}if(l!==""){if(Object.prototype.hasOwnProperty.call(g,l)){if(l.charCodeAt(0)<256){for(o=0;o<f;o++)d=d<<1,h==s-1?(h=0,A.push(p(d)),d=0):h++;for(c=l.charCodeAt(0),o=0;o<8;o++)d=d<<1|c&1,h==s-1?(h=0,A.push(p(d)),d=0):h++,c=c>>1}else{for(c=1,o=0;o<f;o++)d=d<<1|c,h==s-1?(h=0,A.push(p(d)),d=0):h++,c=0;for(c=l.charCodeAt(0),o=0;o<16;o++)d=d<<1|c&1,h==s-1?(h=0,A.push(p(d)),d=0):h++,c=c>>1}a--,a==0&&(a=Math.pow(2,f),f++),delete g[l]}else for(c=v[l],o=0;o<f;o++)d=d<<1|c&1,h==s-1?(h=0,A.push(p(d)),d=0):h++,c=c>>1;a--,a==0&&(a=Math.pow(2,f),f++)}for(c=2,o=0;o<f;o++)d=d<<1|c&1,h==s-1?(h=0,A.push(p(d)),d=0):h++,c=c>>1;for(;;)if(d=d<<1,h==s-1){A.push(p(d));break}else h++;return A.join("")},decompress:function(r){return r==null?"":r==""?null:i._decompress(r.length,32768,function(s){return r.charCodeAt(s)})},_decompress:function(r,s,p){var o=[],c,v=4,g=4,w=3,m="",l=[],a,u,f,A,d,h,S,b={val:p(0),position:s,index:1};for(a=0;a<3;a+=1)o[a]=a;for(f=0,d=Math.pow(2,2),h=1;h!=d;)A=b.val&b.position,b.position>>=1,b.position==0&&(b.position=s,b.val=p(b.index++)),f|=(A>0?1:0)*h,h<<=1;switch(c=f){case 0:for(f=0,d=Math.pow(2,8),h=1;h!=d;)A=b.val&b.position,b.position>>=1,b.position==0&&(b.position=s,b.val=p(b.index++)),f|=(A>0?1:0)*h,h<<=1;S=y(f);break;case 1:for(f=0,d=Math.pow(2,16),h=1;h!=d;)A=b.val&b.position,b.position>>=1,b.position==0&&(b.position=s,b.val=p(b.index++)),f|=(A>0?1:0)*h,h<<=1;S=y(f);break;case 2:return""}for(o[3]=S,u=S,l.push(S);;){if(b.index>r)return"";for(f=0,d=Math.pow(2,w),h=1;h!=d;)A=b.val&b.position,b.position>>=1,b.position==0&&(b.position=s,b.val=p(b.index++)),f|=(A>0?1:0)*h,h<<=1;switch(S=f){case 0:for(f=0,d=Math.pow(2,8),h=1;h!=d;)A=b.val&b.position,b.position>>=1,b.position==0&&(b.position=s,b.val=p(b.index++)),f|=(A>0?1:0)*h,h<<=1;o[g++]=y(f),S=g-1,v--;break;case 1:for(f=0,d=Math.pow(2,16),h=1;h!=d;)A=b.val&b.position,b.position>>=1,b.position==0&&(b.position=s,b.val=p(b.index++)),f|=(A>0?1:0)*h,h<<=1;o[g++]=y(f),S=g-1,v--;break;case 2:return l.join("")}if(v==0&&(v=Math.pow(2,w),w++),o[S])m=o[S];else if(S===g)m=u+u.charAt(0);else return null;l.push(m),o[g++]=u+m.charAt(0),v--,u=m,v==0&&(v=Math.pow(2,w),w++)}}};return i}();typeof define=="function"&&define.amd?define(function(){return $}):typeof G<"u"&&G!=null?G.exports=$:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return $})});function rt(){if(typeof process!="object"&&typeof window<"u"&&typeof process<"u"){console.error(`eMath.js/pixiGame is not supported in browser environments. 
 This requirement might be removed in the future.`);return}}var Y=U("../../src/classes/currency"),H=U("../../src/classes/attribute");var _=class{constructor(t){this.configOptionTemplate=t}parse(t){if(typeof t>"u")return this.configOptionTemplate;let e=(n,x)=>{for(let i in x)typeof n[i]>"u"?n[i]=x[i]:typeof n[i]=="object"&&typeof x[i]=="object"&&(n[i]=e(n[i],x[i]));return n};return e(t,this.configOptionTemplate)}get options(){return this.configOptionTemplate}};var Ot={autoAddInterval:!0,fps:30,pixiApp:void 0},Rt="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890 ".split("").concat(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"]),E=class y{constructor(t){this.addKeys=this.addKey;if(this.keysPressed=[],this.binds=[],this.tickers=[],this.config=y.configManager.parse(t),this.config.autoAddInterval)if(this.config.pixiApp)this.config.pixiApp.ticker.add(e=>{for(let n of this.tickers)n(e)});else{let e=this.config.fps?this.config.fps:30;this.tickerInterval=setInterval(()=>{for(let n of this.tickers)n(1e3/e)},1e3/e)}typeof document>"u"||(this.tickers.push(e=>{for(let n of this.binds)(n.onDownContinuous||n.fn)&&this.isPressing(n.name)&&(n.onDownContinuous?.(e),n.fn?.(e))}),document.addEventListener("keydown",e=>{this.logKey(e,!0),this.onAll("down",e.key)}),document.addEventListener("keyup",e=>{this.logKey(e,!1),this.onAll("up",e.key)}),document.addEventListener("keypress",e=>{this.onAll("press",e.key)}))}static{this.configManager=new _(Ot)}changeFps(t){this.config.fps=t,this.tickerInterval?(clearInterval(this.tickerInterval),this.tickerInterval=setInterval(()=>{for(let e of this.tickers)e(1e3/t)},1e3/t)):this.config.pixiApp&&(this.config.pixiApp.ticker.maxFPS=t)}logKey(t,e){let n=t.key;e&&!this.keysPressed.includes(n)?this.keysPressed.push(n):!e&&this.keysPressed.includes(n)&&this.keysPressed.splice(this.keysPressed.indexOf(n),1)}onAll(t,e){for(let n of this.binds)t==="down"&&n.key===e&&n.onDown&&n.onDown(),t==="press"&&n.key===e&&n.onPress&&n.onPress(),t==="up"&&n.key===e&&n.onUp&&n.onUp()}isPressing(t){for(let e=0;e<this.binds.length;e++){let n=this.binds[e];if(n.name===t)return this.keysPressed.includes(n.key)}return!1}getBind(t){return this.binds.find(e=>e.name===t)}addKey(t,e,n){t=typeof t=="string"?[{name:t,key:e,fn:n}]:t,t=Array.isArray(t)?t:[t];for(let x of t){let i=this.getBind(x.name);if(i){Object.assign(i,x);continue}this.binds.push(x)}}};var kt={autoAddInterval:!0,fps:30,pixiApp:void 0},j=class y{constructor(t){this.addEvent=this.setEvent;if(this.config=y.configManager.parse(t),this.events={},this.config.autoAddInterval)if(this.config.pixiApp)this.config.pixiApp.ticker.add(()=>{this.tickerFunction()});else{let e=this.config.fps??30;this.tickerInterval=setInterval(()=>{this.tickerFunction()},1e3/e)}}static{this.configManager=new _(kt)}tickerFunction(){let t=Date.now();for(let e of Object.values(this.events))if(e.type==="interval"){if(t-e.intervalLast>=e.delay){let n=t-e.intervalLast;e.callbackFn(n),e.intervalLast=t}}else if(e.type==="timeout"){let n=t-e.timeCreated;t-e.timeCreated>=e.delay&&(e.callbackFn(n),delete this.events[e.name])}}changeFps(t){this.config.fps=t,this.tickerInterval?(clearInterval(this.tickerInterval),this.tickerInterval=setInterval(()=>{this.tickerFunction()},1e3/t)):this.config.pixiApp&&(this.config.pixiApp.ticker.maxFPS=t)}timeWarp(t){for(let e of Object.values(this.events))e.type==="interval"&&(e.intervalLast-=t),e.type==="timeout"&&(e.timeCreated-=t)}setEvent(t,e,n,x){this.events[t]=(()=>{switch(e){case"interval":return{name:t,type:e,delay:typeof n=="number"?n:n.toNumber(),callbackFn:x,timeCreated:Date.now(),intervalLast:Date.now()};case"timeout":default:return{name:t,type:e,delay:typeof n=="number"?n:n.toNumber(),callbackFn:x,timeCreated:Date.now()}}})()}removeEvent(t){delete this.events[t]}};var B=Ct(ot());var M;(function(y){y[y.PLAIN_TO_CLASS=0]="PLAIN_TO_CLASS",y[y.CLASS_TO_PLAIN=1]="CLASS_TO_PLAIN",y[y.CLASS_TO_CLASS=2]="CLASS_TO_CLASS"})(M||(M={}));var st=function(){function y(){this._typeMetadatas=new Map,this._transformMetadatas=new Map,this._exposeMetadatas=new Map,this._excludeMetadatas=new Map,this._ancestorsMap=new Map}return y.prototype.addTypeMetadata=function(t){this._typeMetadatas.has(t.target)||this._typeMetadatas.set(t.target,new Map),this._typeMetadatas.get(t.target).set(t.propertyName,t)},y.prototype.addTransformMetadata=function(t){this._transformMetadatas.has(t.target)||this._transformMetadatas.set(t.target,new Map),this._transformMetadatas.get(t.target).has(t.propertyName)||this._transformMetadatas.get(t.target).set(t.propertyName,[]),this._transformMetadatas.get(t.target).get(t.propertyName).push(t)},y.prototype.addExposeMetadata=function(t){this._exposeMetadatas.has(t.target)||this._exposeMetadatas.set(t.target,new Map),this._exposeMetadatas.get(t.target).set(t.propertyName,t)},y.prototype.addExcludeMetadata=function(t){this._excludeMetadatas.has(t.target)||this._excludeMetadatas.set(t.target,new Map),this._excludeMetadatas.get(t.target).set(t.propertyName,t)},y.prototype.findTransformMetadatas=function(t,e,n){return this.findMetadatas(this._transformMetadatas,t,e).filter(function(x){return!x.options||x.options.toClassOnly===!0&&x.options.toPlainOnly===!0?!0:x.options.toClassOnly===!0?n===M.CLASS_TO_CLASS||n===M.PLAIN_TO_CLASS:x.options.toPlainOnly===!0?n===M.CLASS_TO_PLAIN:!0})},y.prototype.findExcludeMetadata=function(t,e){return this.findMetadata(this._excludeMetadatas,t,e)},y.prototype.findExposeMetadata=function(t,e){return this.findMetadata(this._exposeMetadatas,t,e)},y.prototype.findExposeMetadataByCustomName=function(t,e){return this.getExposedMetadatas(t).find(function(n){return n.options&&n.options.name===e})},y.prototype.findTypeMetadata=function(t,e){return this.findMetadata(this._typeMetadatas,t,e)},y.prototype.getStrategy=function(t){var e=this._excludeMetadatas.get(t),n=e&&e.get(void 0),x=this._exposeMetadatas.get(t),i=x&&x.get(void 0);return n&&i||!n&&!i?"none":n?"excludeAll":"exposeAll"},y.prototype.getExposedMetadatas=function(t){return this.getMetadata(this._exposeMetadatas,t)},y.prototype.getExcludedMetadatas=function(t){return this.getMetadata(this._excludeMetadatas,t)},y.prototype.getExposedProperties=function(t,e){return this.getExposedMetadatas(t).filter(function(n){return!n.options||n.options.toClassOnly===!0&&n.options.toPlainOnly===!0?!0:n.options.toClassOnly===!0?e===M.CLASS_TO_CLASS||e===M.PLAIN_TO_CLASS:n.options.toPlainOnly===!0?e===M.CLASS_TO_PLAIN:!0}).map(function(n){return n.propertyName})},y.prototype.getExcludedProperties=function(t,e){return this.getExcludedMetadatas(t).filter(function(n){return!n.options||n.options.toClassOnly===!0&&n.options.toPlainOnly===!0?!0:n.options.toClassOnly===!0?e===M.CLASS_TO_CLASS||e===M.PLAIN_TO_CLASS:n.options.toPlainOnly===!0?e===M.CLASS_TO_PLAIN:!0}).map(function(n){return n.propertyName})},y.prototype.clear=function(){this._typeMetadatas.clear(),this._exposeMetadatas.clear(),this._excludeMetadatas.clear(),this._ancestorsMap.clear()},y.prototype.getMetadata=function(t,e){var n=t.get(e),x;n&&(x=Array.from(n.values()).filter(function(v){return v.propertyName!==void 0}));for(var i=[],r=0,s=this.getAncestors(e);r<s.length;r++){var p=s[r],o=t.get(p);if(o){var c=Array.from(o.values()).filter(function(v){return v.propertyName!==void 0});i.push.apply(i,c)}}return i.concat(x||[])},y.prototype.findMetadata=function(t,e,n){var x=t.get(e);if(x){var i=x.get(n);if(i)return i}for(var r=0,s=this.getAncestors(e);r<s.length;r++){var p=s[r],o=t.get(p);if(o){var c=o.get(n);if(c)return c}}},y.prototype.findMetadatas=function(t,e,n){var x=t.get(e),i;x&&(i=x.get(n));for(var r=[],s=0,p=this.getAncestors(e);s<p.length;s++){var o=p[s],c=t.get(o);c&&c.has(n)&&r.push.apply(r,c.get(n))}return r.slice().reverse().concat((i||[]).slice().reverse())},y.prototype.getAncestors=function(t){if(!t)return[];if(!this._ancestorsMap.has(t)){for(var e=[],n=Object.getPrototypeOf(t.prototype.constructor);typeof n.prototype<"u";n=Object.getPrototypeOf(n.prototype.constructor))e.push(n);this._ancestorsMap.set(t,e)}return this._ancestorsMap.get(t)},y}();var k=new st;function at(){if(typeof globalThis<"u")return globalThis;if(typeof global<"u")return global;if(typeof window<"u")return window;if(typeof self<"u")return self}function ct(y){return y!==null&&typeof y=="object"&&typeof y.then=="function"}var ft=function(y,t,e){if(e||arguments.length===2)for(var n=0,x=t.length,i;n<x;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return y.concat(i||Array.prototype.slice.call(t))};function Pt(y){var t=new y;return!(t instanceof Set)&&!("push"in t)?[]:t}var T=function(){function y(t,e){this.transformationType=t,this.options=e,this.recursionStack=new Set}return y.prototype.transform=function(t,e,n,x,i,r){var s=this;if(r===void 0&&(r=0),Array.isArray(e)||e instanceof Set){var p=x&&this.transformationType===M.PLAIN_TO_CLASS?Pt(x):[];return e.forEach(function(a,u){var f=t?t[u]:void 0;if(!s.options.enableCircularCheck||!s.isCircular(a)){var A=void 0;if(typeof n!="function"&&n&&n.options&&n.options.discriminator&&n.options.discriminator.property&&n.options.discriminator.subTypes){if(s.transformationType===M.PLAIN_TO_CLASS){A=n.options.discriminator.subTypes.find(function(b){return b.name===a[n.options.discriminator.property]});var d={newObject:p,object:a,property:void 0},h=n.typeFunction(d);A===void 0?A=h:A=A.value,n.options.keepDiscriminatorProperty||delete a[n.options.discriminator.property]}s.transformationType===M.CLASS_TO_CLASS&&(A=a.constructor),s.transformationType===M.CLASS_TO_PLAIN&&(a[n.options.discriminator.property]=n.options.discriminator.subTypes.find(function(b){return b.value===a.constructor}).name)}else A=n;var S=s.transform(f,a,A,void 0,a instanceof Map,r+1);p instanceof Set?p.add(S):p.push(S)}else s.transformationType===M.CLASS_TO_CLASS&&(p instanceof Set?p.add(a):p.push(a))}),p}else{if(n===String&&!i)return e==null?e:String(e);if(n===Number&&!i)return e==null?e:Number(e);if(n===Boolean&&!i)return e==null?e:!!e;if((n===Date||e instanceof Date)&&!i)return e instanceof Date?new Date(e.valueOf()):e==null?e:new Date(e);if(at().Buffer&&(n===Buffer||e instanceof Buffer)&&!i)return e==null?e:Buffer.from(e);if(ct(e)&&!i)return new Promise(function(a,u){e.then(function(f){return a(s.transform(void 0,f,n,void 0,void 0,r+1))},u)});if(!i&&e!==null&&typeof e=="object"&&typeof e.then=="function")return e;if(typeof e=="object"&&e!==null){!n&&e.constructor!==Object&&(!Array.isArray(e)&&e.constructor===Array||(n=e.constructor)),!n&&t&&(n=t.constructor),this.options.enableCircularCheck&&this.recursionStack.add(e);var o=this.getKeys(n,e,i),c=t||{};!t&&(this.transformationType===M.PLAIN_TO_CLASS||this.transformationType===M.CLASS_TO_CLASS)&&(i?c=new Map:n?c=new n:c={});for(var v=function(a){if(a==="__proto__"||a==="constructor")return"continue";var u=a,f=a,A=a;if(!g.options.ignoreDecorators&&n){if(g.transformationType===M.PLAIN_TO_CLASS){var d=k.findExposeMetadataByCustomName(n,a);d&&(A=d.propertyName,f=d.propertyName)}else if(g.transformationType===M.CLASS_TO_PLAIN||g.transformationType===M.CLASS_TO_CLASS){var d=k.findExposeMetadata(n,a);d&&d.options&&d.options.name&&(f=d.options.name)}}var h=void 0;g.transformationType===M.PLAIN_TO_CLASS?h=e[u]:e instanceof Map?h=e.get(u):e[u]instanceof Function?h=e[u]():h=e[u];var S=void 0,b=h instanceof Map;if(n&&i)S=n;else if(n){var C=k.findTypeMetadata(n,A);if(C){var L={newObject:c,object:e,property:A},N=C.typeFunction?C.typeFunction(L):C.reflectedType;C.options&&C.options.discriminator&&C.options.discriminator.property&&C.options.discriminator.subTypes?e[u]instanceof Array?S=C:(g.transformationType===M.PLAIN_TO_CLASS&&(S=C.options.discriminator.subTypes.find(function(I){if(h&&h instanceof Object&&C.options.discriminator.property in h)return I.name===h[C.options.discriminator.property]}),S===void 0?S=N:S=S.value,C.options.keepDiscriminatorProperty||h&&h instanceof Object&&C.options.discriminator.property in h&&delete h[C.options.discriminator.property]),g.transformationType===M.CLASS_TO_CLASS&&(S=h.constructor),g.transformationType===M.CLASS_TO_PLAIN&&h&&(h[C.options.discriminator.property]=C.options.discriminator.subTypes.find(function(I){return I.value===h.constructor}).name)):S=N,b=b||C.reflectedType===Map}else if(g.options.targetMaps)g.options.targetMaps.filter(function(I){return I.target===n&&!!I.properties[A]}).forEach(function(I){return S=I.properties[A]});else if(g.options.enableImplicitConversion&&g.transformationType===M.PLAIN_TO_CLASS){var V=Reflect.getMetadata("design:type",n.prototype,A);V&&(S=V)}}var tt=Array.isArray(e[u])?g.getReflectedType(n,A):void 0,et=t?t[u]:void 0;if(c.constructor.prototype){var nt=Object.getOwnPropertyDescriptor(c.constructor.prototype,f);if((g.transformationType===M.PLAIN_TO_CLASS||g.transformationType===M.CLASS_TO_CLASS)&&(nt&&!nt.set||c[f]instanceof Function))return"continue"}if(!g.options.enableCircularCheck||!g.isCircular(h)){var F=g.transformationType===M.PLAIN_TO_CLASS?f:a,O=void 0;g.transformationType===M.CLASS_TO_PLAIN?(O=e[F],O=g.applyCustomTransformations(O,n,F,e,g.transformationType),O=e[F]===O?h:O,O=g.transform(et,O,S,tt,b,r+1)):h===void 0&&g.options.exposeDefaultValues?O=c[f]:(O=g.transform(et,h,S,tt,b,r+1),O=g.applyCustomTransformations(O,n,F,e,g.transformationType)),(O!==void 0||g.options.exposeUnsetFields)&&(c instanceof Map?c.set(f,O):c[f]=O)}else if(g.transformationType===M.CLASS_TO_CLASS){var O=h;O=g.applyCustomTransformations(O,n,a,e,g.transformationType),(O!==void 0||g.options.exposeUnsetFields)&&(c instanceof Map?c.set(f,O):c[f]=O)}},g=this,w=0,m=o;w<m.length;w++){var l=m[w];v(l)}return this.options.enableCircularCheck&&this.recursionStack.delete(e),c}else return e}},y.prototype.applyCustomTransformations=function(t,e,n,x,i){var r=this,s=k.findTransformMetadatas(e,n,this.transformationType);return this.options.version!==void 0&&(s=s.filter(function(p){return p.options?r.checkVersion(p.options.since,p.options.until):!0})),this.options.groups&&this.options.groups.length?s=s.filter(function(p){return p.options?r.checkGroups(p.options.groups):!0}):s=s.filter(function(p){return!p.options||!p.options.groups||!p.options.groups.length}),s.forEach(function(p){t=p.transformFn({value:t,key:n,obj:x,type:i,options:r.options})}),t},y.prototype.isCircular=function(t){return this.recursionStack.has(t)},y.prototype.getReflectedType=function(t,e){if(t){var n=k.findTypeMetadata(t,e);return n?n.reflectedType:void 0}},y.prototype.getKeys=function(t,e,n){var x=this,i=k.getStrategy(t);i==="none"&&(i=this.options.strategy||"exposeAll");var r=[];if((i==="exposeAll"||n)&&(e instanceof Map?r=Array.from(e.keys()):r=Object.keys(e)),n)return r;if(this.options.ignoreDecorators&&this.options.excludeExtraneousValues&&t){var s=k.getExposedProperties(t,this.transformationType),p=k.getExcludedProperties(t,this.transformationType);r=ft(ft([],s,!0),p,!0)}if(!this.options.ignoreDecorators&&t){var s=k.getExposedProperties(t,this.transformationType);this.transformationType===M.PLAIN_TO_CLASS&&(s=s.map(function(v){var g=k.findExposeMetadata(t,v);return g&&g.options&&g.options.name?g.options.name:v})),this.options.excludeExtraneousValues?r=s:r=r.concat(s);var o=k.getExcludedProperties(t,this.transformationType);o.length>0&&(r=r.filter(function(v){return!o.includes(v)})),this.options.version!==void 0&&(r=r.filter(function(v){var g=k.findExposeMetadata(t,v);return!g||!g.options?!0:x.checkVersion(g.options.since,g.options.until)})),this.options.groups&&this.options.groups.length?r=r.filter(function(v){var g=k.findExposeMetadata(t,v);return!g||!g.options?!0:x.checkGroups(g.options.groups)}):r=r.filter(function(v){var g=k.findExposeMetadata(t,v);return!g||!g.options||!g.options.groups||!g.options.groups.length})}return this.options.excludePrefixes&&this.options.excludePrefixes.length&&(r=r.filter(function(c){return x.options.excludePrefixes.every(function(v){return c.substr(0,v.length)!==v})})),r=r.filter(function(c,v,g){return g.indexOf(c)===v}),r},y.prototype.checkVersion=function(t,e){var n=!0;return n&&t&&(n=this.options.version>=t),n&&e&&(n=this.options.version<e),n},y.prototype.checkGroups=function(t){return t?this.options.groups.some(function(e){return t.includes(e)}):!0},y}();var D={enableCircularCheck:!1,enableImplicitConversion:!1,excludeExtraneousValues:!1,excludePrefixes:void 0,exposeDefaultValues:!1,exposeUnsetFields:!0,groups:void 0,ignoreDecorators:!1,strategy:void 0,targetMaps:void 0,version:void 0};var P=function(){return P=Object.assign||function(y){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var x in t)Object.prototype.hasOwnProperty.call(t,x)&&(y[x]=t[x])}return y},P.apply(this,arguments)},pt=function(){function y(){}return y.prototype.instanceToPlain=function(t,e){var n=new T(M.CLASS_TO_PLAIN,P(P({},D),e));return n.transform(void 0,t,void 0,void 0,void 0,void 0)},y.prototype.classToPlainFromExist=function(t,e,n){var x=new T(M.CLASS_TO_PLAIN,P(P({},D),n));return x.transform(e,t,void 0,void 0,void 0,void 0)},y.prototype.plainToInstance=function(t,e,n){var x=new T(M.PLAIN_TO_CLASS,P(P({},D),n));return x.transform(void 0,e,t,void 0,void 0,void 0)},y.prototype.plainToClassFromExist=function(t,e,n){var x=new T(M.PLAIN_TO_CLASS,P(P({},D),n));return x.transform(t,e,void 0,void 0,void 0,void 0)},y.prototype.instanceToInstance=function(t,e){var n=new T(M.CLASS_TO_CLASS,P(P({},D),e));return n.transform(void 0,t,void 0,void 0,void 0,void 0)},y.prototype.classToClassFromExist=function(t,e,n){var x=new T(M.CLASS_TO_CLASS,P(P({},D),n));return x.transform(e,t,void 0,void 0,void 0,void 0)},y.prototype.serialize=function(t,e){return JSON.stringify(this.instanceToPlain(t,e))},y.prototype.deserialize=function(t,e,n){var x=JSON.parse(e);return this.plainToInstance(t,x,n)},y.prototype.deserializeArray=function(t,e,n){var x=JSON.parse(e);return this.plainToInstance(t,x,n)},y}();var ut=new pt;function R(y,t){return ut.instanceToPlain(y,t)}function lt(y,t,e){return ut.plainToInstance(y,t,e)}var W=U("../../src/classes/currency"),ht=U("../../src/classes/attribute"),gt=U("../../src/E/e");function dt(y){var t="0123456789abcdef";function e(A){var d,h="";for(d=0;d<=3;d++)h+=t.charAt(A>>8*d+4&15)+t.charAt(A>>8*d&15);return h}function n(A,d){var h=(65535&A)+(65535&d);return(A>>16)+(d>>16)+(h>>16)<<16|65535&h}function x(A,d,h,S,b,C){var L,N;return n((L=n(n(d,A),n(S,C)),L<<(N=b)|L>>>32-N),h)}function i(A,d,h,S,b,C,L){return x(d&h|~d&S,A,d,b,C,L)}function r(A,d,h,S,b,C,L){return x(d&S|h&~S,A,d,b,C,L)}function s(A,d,h,S,b,C,L){return x(d^h^S,A,d,b,C,L)}function p(A,d,h,S,b,C,L){return x(h^(d|~S),A,d,b,C,L)}var o,c,v,g,w,m=function(d){var h,S=(d.length+8>>6)+1,b=Array(16*S);for(h=0;h<16*S;h++)b[h]=0;for(h=0;h<d.length;h++)b[h>>2]|=d.charCodeAt(h)<<h%4*8;return b[h>>2]|=128<<h%4*8,b[16*S-2]=8*d.length,b}(""+y),l=1732584193,a=-271733879,u=-1732584194,f=271733878;for(o=0;o<m.length;o+=16)c=l,v=a,g=u,w=f,l=i(l,a,u,f,m[o+0],7,-680876936),f=i(f,l,a,u,m[o+1],12,-389564586),u=i(u,f,l,a,m[o+2],17,606105819),a=i(a,u,f,l,m[o+3],22,-1044525330),l=i(l,a,u,f,m[o+4],7,-176418897),f=i(f,l,a,u,m[o+5],12,1200080426),u=i(u,f,l,a,m[o+6],17,-1473231341),a=i(a,u,f,l,m[o+7],22,-45705983),l=i(l,a,u,f,m[o+8],7,1770035416),f=i(f,l,a,u,m[o+9],12,-1958414417),u=i(u,f,l,a,m[o+10],17,-42063),a=i(a,u,f,l,m[o+11],22,-1990404162),l=i(l,a,u,f,m[o+12],7,1804603682),f=i(f,l,a,u,m[o+13],12,-40341101),u=i(u,f,l,a,m[o+14],17,-1502002290),a=i(a,u,f,l,m[o+15],22,1236535329),l=r(l,a,u,f,m[o+1],5,-165796510),f=r(f,l,a,u,m[o+6],9,-1069501632),u=r(u,f,l,a,m[o+11],14,643717713),a=r(a,u,f,l,m[o+0],20,-373897302),l=r(l,a,u,f,m[o+5],5,-701558691),f=r(f,l,a,u,m[o+10],9,38016083),u=r(u,f,l,a,m[o+15],14,-660478335),a=r(a,u,f,l,m[o+4],20,-405537848),l=r(l,a,u,f,m[o+9],5,568446438),f=r(f,l,a,u,m[o+14],9,-1019803690),u=r(u,f,l,a,m[o+3],14,-187363961),a=r(a,u,f,l,m[o+8],20,1163531501),l=r(l,a,u,f,m[o+13],5,-1444681467),f=r(f,l,a,u,m[o+2],9,-51403784),u=r(u,f,l,a,m[o+7],14,1735328473),a=r(a,u,f,l,m[o+12],20,-1926607734),l=s(l,a,u,f,m[o+5],4,-378558),f=s(f,l,a,u,m[o+8],11,-2022574463),u=s(u,f,l,a,m[o+11],16,1839030562),a=s(a,u,f,l,m[o+14],23,-35309556),l=s(l,a,u,f,m[o+1],4,-1530992060),f=s(f,l,a,u,m[o+4],11,1272893353),u=s(u,f,l,a,m[o+7],16,-155497632),a=s(a,u,f,l,m[o+10],23,-1094730640),l=s(l,a,u,f,m[o+13],4,681279174),f=s(f,l,a,u,m[o+0],11,-358537222),u=s(u,f,l,a,m[o+3],16,-722521979),a=s(a,u,f,l,m[o+6],23,76029189),l=s(l,a,u,f,m[o+9],4,-640364487),f=s(f,l,a,u,m[o+12],11,-421815835),u=s(u,f,l,a,m[o+15],16,530742520),a=s(a,u,f,l,m[o+2],23,-995338651),l=p(l,a,u,f,m[o+0],6,-198630844),f=p(f,l,a,u,m[o+7],10,1126891415),u=p(u,f,l,a,m[o+14],15,-1416354905),a=p(a,u,f,l,m[o+5],21,-57434055),l=p(l,a,u,f,m[o+12],6,1700485571),f=p(f,l,a,u,m[o+3],10,-1894986606),u=p(u,f,l,a,m[o+10],15,-1051523),a=p(a,u,f,l,m[o+1],21,-2054922799),l=p(l,a,u,f,m[o+8],6,1873313359),f=p(f,l,a,u,m[o+15],10,-30611744),u=p(u,f,l,a,m[o+6],15,-1560198380),a=p(a,u,f,l,m[o+13],21,1309151649),l=p(l,a,u,f,m[o+4],6,-145523070),f=p(f,l,a,u,m[o+11],10,-1120210379),u=p(u,f,l,a,m[o+2],15,718787259),a=p(a,u,f,l,m[o+9],21,-343485551),l=n(l,c),a=n(a,v),u=n(u,g),f=n(f,w);return e(l)+e(a)+e(u)+e(f)}var q=class{constructor(t){this.data={};this.static={};this.eventsOnLoad=[];this.gameRef=typeof t=="function"?t():t}addEventOnLoad(t){this.eventsOnLoad.push(t)}setData(t,e){typeof this.data[t]>"u"&&this.normalData&&console.warn("After initializing data, you should not add new properties to data."),this.data[t]=e;let n=()=>this.data;return{get value(){return n()[t]},set value(x){n()[t]=x},setValue(x){n()[t]=x}}}getData(t){return this.data[t]}setStatic(t,e){typeof this.static[t]>"u"&&this.normalData&&console.warn("After initializing data, you should not add new properties to staticData."),this.static[t]=e;let n={};return Object.defineProperty(n,"a",{get:()=>this.static[t]}),n?.a}getStatic(t){return this.static[t]}init(){this.normalData=this.data,this.normalDataPlain=R(this.data)}compileDataRaw(t=this.data){let e=R(t);return[dt(`${this.gameRef.config.name.id}/${JSON.stringify(e)}`),e]}compileData(t=this.data){let e=JSON.stringify(this.compileDataRaw(t));return B.compressToBase64?(0,B.compressToBase64)(e):btoa(e)}decompileData(t=localStorage.getItem(`${this.gameRef.config.name.id}-data`)){if(!t)return null;let e;try{return e=JSON.parse(B.decompressFromBase64?(0,B.decompressFromBase64)(t):atob(t)),e}catch(n){if(n instanceof SyntaxError)console.error(`Failed to decompile data (corrupted) "${t}":`,n);else throw n;return null}}validateData(t){let[e,n]=t,x=dt(`${this.gameRef.config.name.id}/${JSON.stringify(n)}`);return e===x}resetData(t=!1){if(!this.normalData)throw new Error("dataManager.resetData(): You must call init() before writing to data.");this.data=this.normalData,this.saveData(),t&&window.location.reload()}saveData(t=this.compileData()){localStorage.setItem(`${this.gameRef.config.name.id}-data`,t)}exportData(){let t=this.compileData();if(prompt("Download save data?:",t)!=null){let e=new Blob([t],{type:"text/plain"}),n=document.createElement("a");n.href=URL.createObjectURL(e),n.download=`${this.gameRef.config.name.id}-data.txt`,n.textContent=`Download ${this.gameRef.config.name.id}-data.txt file`,document.body.appendChild(n),n.click(),document.body.removeChild(n)}}parseData(t=this.decompileData()){if(!this.normalData||!this.normalDataPlain)throw new Error("dataManager.loadData(): You must call init() before writing to data.");if(!t)return null;let[,e]=t;function n(c){return typeof c=="object"&&c?.constructor===Object}function x(c,v,g){let w=g;for(let m in c)if(Object.prototype.hasOwnProperty.call(c,m)&&!Object.prototype.hasOwnProperty.call(g,m)&&(w[m]=c[m]),v[m]instanceof W.currency){let l=v[m],a=g[m];for(let u of l.upgrades)a.upgrades.find(f=>f.id===u.id)||a.upgrades.push(R(u))}else n(c[m])&&n(g[m])&&(w[m]=x(c[m],v[m],g[m]));return w}let i=x(this.normalDataPlain,this.normalData,e),r=function(c){let v=[];for(let g of c)v.push({class:g.class,name:g.name,properties:Object.getOwnPropertyNames(R(new g.class))});return v}([{class:ht.attribute,name:"attribute"},{class:W.currency,name:"currency"},{class:gt.Decimal,name:"Decimal"}]);function s(c,v){return c.length===v.length&&c.every(g=>v.includes(g))}function p(c,v){let g=lt(c.class,v);if(!g)throw new Error(`Failed to convert ${c.name} to class instance.`);return g}function o(c){let v=c;for(let g in c)c[g]instanceof Object&&c[g].constructor===Object&&(()=>{for(let w of r)if(s(Object.getOwnPropertyNames(c[g]),w.properties))return v[g]=p(w,c[g]),!1;return!0})()&&(v[g]=o(c[g]));return v}return i=o(i),i}loadData(t=this.decompileData()){if(t=typeof t=="string"?this.decompileData(t):t,!t)return null;let e=this.validateData([t[0],R(t[1])]),n=this.parseData(t);if(!n)return null;this.data=n;for(let x of this.eventsOnLoad)x();return e}};var z=class{get data(){return this.dataPointer()}get static(){return this.staticPointer()}constructor(t,e,n,x){this.dataPointer=typeof t=="function"?t:()=>t,this.staticPointer=typeof e=="function"?e:()=>e,this.game=n,this.name=x,this.game?.dataManager.addEventOnLoad(()=>{this.static.onLoadData()})}get value(){return this.data.value}};var X=class{constructor(t,e,n){this.data=typeof t=="function"?t():t,this.static=typeof e=="function"?e():e,this.game=n}get value(){return this.static.value}set value(t){this.data.value=t}};var K=class{constructor(t,e){this.currenciesToReset=Array.isArray(t)?t:[t],this.extender=e}reset(){this.onReset&&this.onReset(),this.currenciesToReset.forEach(t=>{t.static.reset()}),this.extender&&this.extender.reset()}};var Q={mode:"production",name:{title:"",id:"",version:"0.0.0"},settings:{framerate:30},initIntervalBasedManagers:!0},J=class y{static{this.configManager=new _(Q)}constructor(t){this.config=y.configManager.parse(t),this.dataManager=new q(this),this.keyManager=new E({autoAddInterval:this.config.initIntervalBasedManagers,fps:this.config.settings.framerate}),this.eventManager=new j({autoAddInterval:this.config.initIntervalBasedManagers,fps:this.config.settings.framerate}),this.tickers=[]}init(){this.dataManager.init()}changeFps(t){this.keyManager.changeFps(t),this.eventManager.changeFps(t)}addCurrency(t){return this.dataManager.setData(t,{currency:new Y.currency}),this.dataManager.setStatic(t,{currency:new Y.currencyStatic(()=>this.dataManager.getData(t).currency)}),new z(()=>this.dataManager.getData(t).currency,()=>this.dataManager.getStatic(t).currency,this,t)}addCurrencyGroup(t,e){throw new Error("addCurrencyGroup is deprecated. Use addCurrency instead.")}addAttribute(t,e=!0,n=0){let x=this.dataManager.setData(t,new H.attribute(n)),i=this.dataManager.setStatic(t,new H.attributeStatic(this.dataManager.getData(t),e,n));return new X(this.dataManager.getData(t),this.dataManager.getStatic(t),this)}addReset(t,e){return new K(t,e)}};var Lt=function(){class y{constructor(i){this.article=i}update(){}AABBs(i){let r=this.AABB;return!(i[2]<r[0]||r[2]<i[0]||i[3]<r[1]||r[3]<i[1])}collidesPoint(i){let r=this.vertices,s=r.length,p=!1;for(let o=0,c=s-2;o<s;o+=2)r[o+1]>i.y!=r[c+1]>i.y&&i.x<(r[c]-r[o])*(i.y-r[o+1])/(r[c+1]-r[o+1])+r[o]&&(p=!p),c=o;return p}collidesCircle(){}collidesRectangle(){}collidesPolygon(i,r){let s=this.vertices,p=r?i:i.vertices,o=[s,p],c,v,g,w,m;for(let l=0;l<o.length;l++){let a=o[l];for(let u=0;u<a.length;u+=2){let f=(u+2)%a.length,A={x:a[f+1]-a[u+1],y:a[u]-a[f]};c=v=null;for(let d=0;d<s.length;d+=2)g=A.x*s[d]+A.y*s[d+1],(c===null||g<c)&&(c=g),(v===null||g>v)&&(v=g);w=m=null;for(let d=0;d<p.length;d+=2)g=A.x*p[d]+A.y*p[d+1],(w===null||g<w)&&(w=g),(m===null||g>m)&&(m=g);if(v<w||m<c)return!1}}return!0}collidesLine(i,r){let s=this.vertices,p=s.length;if(this.collidesPoint(i))return!0;for(let o=0;o<p;o+=2){let c=(o+2)%p;if(y.lineLine(i,r,{x:s[o],y:s[o+1]},{x:s[c],y:s[c+1]}))return!0}return!1}collides(i){return this["collides"+i.SHAPE](i)}static lineLine(i,r,s,p){let o=i.x,c=i.y,v=r.x,g=r.y,w=s.x,m=s.y,l=p.x,a=p.y,u=v-o,f=g-c,A=l-w,d=a-m,h=(-f*(o-w)+u*(c-m))/(-A*f+u*d),S=(A*(c-m)-d*(o-w))/(-A*f+u*d);return h>=0&&h<=1&&S>=0&&S<=1}}class t extends y{constructor(i,r){super(i),this.SHAPE="Rectangle",r=r||{},this._vertices=[],this.AABB=[0,0,0,0],this.set(r)}set(i){this.center=i.center||this.article,this.rotation=i.rotation?i.rotation:i.center?i.center:this.article,typeof i.square<"u"?this._width=this._height=i.square:(this._width=i.width||this.article.width,this._height=i.height||this.article.height),this.noRotate=i.noRotate,this.hw=this._width/2,this.hh=this._height/2,this.update()}get width(){return this._width}set width(i){this._width=i,this.hw=i/2}get height(){return this._height}set height(i){this._height=i,this.hh=i/2}update(){let i=this.AABB,r=this.center;if(this.noRotate){let s=this.hw,p=this.hh;i[0]=r.x-s,i[1]=r.y-p,i[2]=r.x+s,i[3]=r.y+p}else{let s=Math.abs(Math.sin(this.rotation.rotation)/2),p=Math.abs(Math.cos(this.rotation.rotation)/2),o=this._width,c=this._height,v=c*s+o*p,g=c*p+o*s;i[0]=r.x-v,i[1]=r.y-g,i[2]=r.x+v,i[3]=r.y+g}this.verticesDirty=!0}updateVertices(){let i=this._vertices,r=this.center,s=this.hw,p=this.hh;if(this.noRotate){let o=this.AABB;i[0]=o[0],i[1]=o[1],i[2]=o[2],i[3]=o[1],i[4]=o[2],i[5]=o[3],i[6]=o[0],i[7]=o[3]}else{let o=this.rotation.rotation,c=Math.sin(o),v=Math.cos(o);i[0]=r.x-s*v+p*c,i[1]=r.y-s*c-p*v,i[2]=r.x+s*v+p*c,i[3]=r.y+s*c-p*v,i[4]=r.x+s*v-p*c,i[5]=r.y+s*c+p*v,i[6]=r.x-s*v-p*c,i[7]=r.y-s*c+p*v}this.verticesDirty=!1}get vertices(){return this.verticesDirty&&this.updateVertices(),this._vertices}collidesRectangle(i){return this.noRotate&&i.noRotate?this.AABBs(i.AABB):this.collidesPolygon(i)}collidesCircle(i){return i.collidesRectangle(this)}static fromRectangle(i,r,s,p){let o={x:i+s/2,y:r+p/2};return new t(o,{width:s,height:p,noRotate:!0})}}class e extends y{constructor(i,r,s){super(i),this.SHAPE="Polygon",s=s||{},this.points=r,this.vertices=[],this.AABB=[],this.set(s)}set(i){i.point&&(this.points=i.points),this.center=i.center||this.article,this.rotation=i.rotation?i.rotation:i.center?i.center:this.article,this.update()}update(){let i=this.rotation.rotation,r=Math.sin(i),s=Math.cos(i),p=1/0,o=0,c=1/0,v=0,g=this.points,w=g.length,m=this.vertices,l=this.center;for(let a=0;a<w;a+=2){let u=g[a],f=g[a+1],A=m[a]=l.x+u*s-f*r,d=m[a+1]=l.y+u*r+f*s;p=A<p?A:p,o=A>o?A:o,c=d<c?d:c,v=d>v?d:v}this.AABB[0]=p,this.AABB[1]=c,this.AABB[2]=o,this.AABB[3]=v,this.width=o-p,this.height=v-c,this.hw=(o-p)/2,this.hh=(v-c)/2}collidesRectangle(i){return this.collidesPolygon(i)}collidesCircle(i){return i.collidesPolygon(this)}}class n extends y{constructor(i,r){super(i),this.SHAPE="Circle",this.AABB=[],r=r||{},this.set(r)}set(i){this.radius=i.radius||this.article.width/2,this.radiusSquared=this.radius*this.radius,this.center=i.positionObject?i.positionObject:this.article,this.update()}update(){let i=this.AABB,r=this.radius,s=this.center;i[0]=s.x-r,i[1]=s.y-r,i[2]=s.x+r,i[3]=s.y+r}collidesCircle(i){let r=this.center,s=i.center,p=s.x-r.x,o=s.y-r.y,c=i.radius+this.radius;return p*p+o*o<=c*c}collidesPoint(i){let r=i.x-this.center.x,s=i.y-this.center.y;return r*r+s*s<=this.radiusSquared}collidesLine(i,r){function s(a,u){return a[0]*u[0]+a[1]*u[1]}let p=this.center,o=[p.x-i.x,p.y-i.y],c=[r.x-i.x,r.y-i.y],v=s(c,c),w=s(o,c)/v;w=w<0?0:w,w=w>1?1:w;let m=[c[0]*w+i.x-p.x,c[1]*w+i.y-p.y];return s(m,m)<=this.radiusSquared}collidesRectangle(i){if(i.noRotate){let r=i.AABB,s=(r[2]-r[0])/2,p=(r[3]-r[1])/2,o=this.center,c=this.radius,v=Math.abs(o.x-r[0]),g=Math.abs(o.y-r[1]);if(v>s+c||g>p+c)return!1;if(v<=s||g<=p)return!0;let w=v-s,m=g-p;return w*w+m*m<=this.radiusSquared}else{let r=this.center;if(i.collidesPoint(r))return!0;let s=i.vertices;return this.collidesLine({x:s[0],y:s[1]},{x:s[2],y:s[3]})||this.collidesLine({x:s[2],y:s[3]},{x:s[4],y:s[5]})||this.collidesLine({x:s[4],y:s[5]},{x:s[6],y:s[7]})||this.collidesLine({x:s[6],y:s[7]},{x:s[0],y:s[1]})}}collidesPolygon(i){let r=this.center;if(i.collidesPoint(r))return!0;let s=i.vertices,p=s.length;for(let o=0;o<p-2;o+=2)if(this.collidesLine({x:s[o],y:s[o+1]},{x:s[o+2],y:s[o+3]}))return!0;return this.collidesLine({x:s[0],y:s[1]},{x:s[p-2],y:s[p-1]})}}return{Shape:y,Rectangle:t,Polygon:e,Circle:n}}(),mt=Lt;var Z=class{constructor(t,e,n="Rectangle"){this.gameRef=t,this.sprite=this.gameRef.PIXI.app.stage.addChild(e),this.x=this.sprite.x,this.y=this.sprite.y,this.collisionShape=n,this.intersects=new mt[this.collisionShape](this.sprite),this.gameRef.PIXI.app.ticker.add(this.tickerFn,this)}tickerFn(){this.sprite.x=this.x-this.gameRef.PIXI.camera.x,this.sprite.y=this.y-this.gameRef.PIXI.camera.y}collides(t){return this.intersects[`collides${t.collisionShape}`](t.intersects)}remove(){this.x=this.y=1/0,this.sprite.parent.removeChild(this.sprite)}};var _t={...Q,initIntervalBasedManagers:!1,pixi:{app:null}},yt=class y extends J{static{this.configManager=new _(_t)}constructor(t){if(super(t),this.config=y.configManager.parse(t),!this.config.pixi.app)throw new Error(`No PIXI app was provided in config: ${JSON.stringify(this.config)}`);let e=this.config.pixi.app;this.PIXI={app:e,camera:{x:0,y:0}},this.keyManager=new E({autoAddInterval:!0,pixiApp:this.PIXI.app}),this.eventManager=new j({autoAddInterval:!0,pixiApp:this.PIXI.app})}addSprite(t,e="Rectangle"){return new Z(this,t,e)}};rt();})();
