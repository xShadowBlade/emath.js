(()=>{var Z=(s,l)=>()=>(l||s((l={exports:{}}).exports,l),l.exports);var be=Z((oe,he)=>{(function(s,l){typeof oe=="object"&&typeof he<"u"?he.exports=l():typeof define=="function"&&define.amd?define(l):(s=typeof globalThis<"u"?globalThis:s||self,s.Decimal=l())})(oe,function(){"use strict";function s(a,r){if(!(a instanceof r))throw new TypeError("Cannot call a class as a function")}function l(a,r){for(var e=0;e<r.length;e++){var t=r[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(a,t.key,t)}}function h(a,r,e){return r&&l(a.prototype,r),e&&l(a,e),Object.defineProperty(a,"prototype",{writable:!1}),a}var f=function(){function a(r){s(this,a),this.map=new Map,this.first=void 0,this.last=void 0,this.maxSize=r}return h(a,[{key:"size",get:function(){return this.map.size}},{key:"get",value:function(e){var t=this.map.get(e);if(t!==void 0)return t!==this.first&&(t===this.last?(this.last=t.prev,this.last.next=void 0):(t.prev.next=t.next,t.next.prev=t.prev),t.next=this.first,this.first.prev=t,this.first=t),t.value}},{key:"set",value:function(e,t){if(!(this.maxSize<1)){if(this.map.has(e))throw new Error("Cannot update existing keys in the cache");var n=new g(e,t);for(this.first===void 0?(this.first=n,this.last=n):(n.next=this.first,this.first.prev=n,this.first=n),this.map.set(e,n);this.map.size>this.maxSize;){var u=this.last;this.map.delete(u.key),this.last=u.prev,this.last.next=void 0}}}}]),a}(),g=h(function a(r,e){s(this,a),this.next=void 0,this.prev=void 0,this.key=r,this.value=e}),c=17,_=9e15,S=Math.log10(9e15),k=1/9e15,T=308,I=-324,P=5,R=1024-1,Ie=function(){for(var a=[],r=I+1;r<=T;r++)a.push(+("1e"+r));var e=323;return function(t){return a[t+e]}}(),L=[2,Math.E,3,4,5,6,7,8,9,10],Ee=[[1,1.0891180521811203,1.1789767925673957,1.2701455431742086,1.3632090180450092,1.4587818160364217,1.5575237916251419,1.6601571006859253,1.767485818836978,1.8804192098842727,2],[1,1.1121114330934079,1.231038924931609,1.3583836963111375,1.4960519303993531,1.6463542337511945,1.8121385357018724,1.996971324618307,2.2053895545527546,2.4432574483385254,Math.E],[1,1.1187738849693603,1.2464963939368214,1.38527004705667,1.5376664685821402,1.7068895236551784,1.897001227148399,2.1132403089001035,2.362480153784171,2.6539010333870774,3],[1,1.1367350847096405,1.2889510672956703,1.4606478703324786,1.6570295196661111,1.8850062585672889,2.1539465047453485,2.476829779693097,2.872061932789197,3.3664204535587183,4],[1,1.1494592900767588,1.319708228183931,1.5166291280087583,1.748171114438024,2.0253263297298045,2.3636668498288547,2.7858359149579424,3.3257226212448145,4.035730287722532,5],[1,1.159225940787673,1.343712473580932,1.5611293155111927,1.8221199554561318,2.14183924486326,2.542468319282638,3.0574682501653316,3.7390572020926873,4.6719550537360774,6],[1,1.1670905356972596,1.3632807444991446,1.5979222279405536,1.8842640123816674,2.2416069644878687,2.69893426559423,3.3012632110403577,4.121250340630164,5.281493033448316,7],[1,1.1736630594087796,1.379783782386201,1.6292821855668218,1.9378971836180754,2.3289975651071977,2.8384347394720835,3.5232708454565906,4.478242031114584,5.868592169644505,8],[1,1.1793017514670474,1.394054150657457,1.65664127441059,1.985170999970283,2.4069682290577457,2.9647310119960752,3.7278665320924946,4.814462547283592,6.436522247411611,9],[1,1.1840100246247336,1.4061375836156955,1.6802272208863964,2.026757028388619,2.4770056063449646,3.080525271755482,3.9191964192627284,5.135152840833187,6.989961179534715,10]],Ce=[[-1,-.9194161097107025,-.8335625019330468,-.7425599821143978,-.6466611521029437,-.5462617907227869,-.4419033816638769,-.3342645487554494,-.224140440909962,-.11241087890006762,0],[-1,-.90603157029014,-.80786507256596,-.7064666939634,-.60294836853664,-.49849837513117,-.39430303318768,-.29147201034755,-.19097820800866,-.09361896280296,0],[-1,-.9021579584316141,-.8005762598234203,-.6964780623319391,-.5911906810998454,-.486050182576545,-.3823089430815083,-.28106046722897615,-.1831906535795894,-.08935809204418144,0],[-1,-.8917227442365535,-.781258746326964,-.6705130326902455,-.5612813129406509,-.4551067709033134,-.35319256652135966,-.2563741554088552,-.1651412821106526,-.0796919581982668,0],[-1,-.8843387974366064,-.7678744063886243,-.6529563724510552,-.5415870994657841,-.4352842206588936,-.33504449124791424,-.24138853420685147,-.15445285440944467,-.07409659641336663,0],[-1,-.8786709358426346,-.7577735191184886,-.6399546189952064,-.527284921869926,-.4211627631006314,-.3223479611761232,-.23107655627789858,-.1472057700818259,-.07035171210706326,0],[-1,-.8740862815291583,-.7497032990976209,-.6297119746181752,-.5161838335958787,-.41036238255751956,-.31277212146489963,-.2233976621705518,-.1418697367979619,-.06762117662323441,0],[-1,-.8702632331800649,-.7430366914122081,-.6213373075161548,-.5072025698095242,-.40171437727184167,-.30517930701410456,-.21736343968190863,-.137710238299109,-.06550774483471955,0],[-1,-.8670016295947213,-.7373984232432306,-.6143173985094293,-.49973884395492807,-.394584953527678,-.2989649949848695,-.21245647317021688,-.13434688362382652,-.0638072667348083,0],[-1,-.8641642839543857,-.732534623168535,-.6083127477059322,-.4934049257184696,-.3885773075899922,-.29376029055315767,-.2083678561173622,-.13155653399373268,-.062401588652553186,0]],o=function(r){return b.fromValue_noAlloc(r)},y=function(r,e,t){return b.fromComponents(r,e,t)},d=function(r,e,t){return b.fromComponents_noNormalize(r,e,t)},D=function(r,e){var t=e+1,n=Math.ceil(Math.log10(Math.abs(r))),u=Math.round(r*Math.pow(10,t-n))*Math.pow(10,n-t);return parseFloat(u.toFixed(Math.max(t-n,0)))},H=function(r){return Math.sign(r)*Math.log10(Math.abs(r))},De=function(r){if(!isFinite(r))return r;if(r<-50)return r===Math.trunc(r)?Number.NEGATIVE_INFINITY:0;for(var e=1;r<10;)e=e*r,++r;r-=1;var t=.9189385332046727;t=t+(r+.5)*Math.log(r),t=t-r;var n=r*r,u=r;return t=t+1/(12*u),u=u*n,t=t+1/(360*u),u=u*n,t=t+1/(1260*u),u=u*n,t=t+1/(1680*u),u=u*n,t=t+1/(1188*u),u=u*n,t=t+691/(360360*u),u=u*n,t=t+7/(1092*u),u=u*n,t=t+3617/(122400*u),Math.exp(t)/e},fe=.5671432904097838,me=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e-10,t,n;if(!Number.isFinite(r)||r===0)return r;if(r===1)return fe;r<10?t=0:t=Math.log(r)-Math.log(Math.log(r));for(var u=0;u<100;++u){if(n=(r*Math.exp(-t)+t*t)/(t+1),Math.abs(n-t)<e*Math.abs(n))return n;t=n}throw Error("Iteration failed to converge: ".concat(r.toString()))};function ge(a){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e-10,e,t,n,u;if(!Number.isFinite(a.mag)||a.eq(b.dZero))return a;if(a.eq(b.dOne))return b.fromNumber(fe);e=b.ln(a);for(var m=0;m<100;++m){if(t=e.neg().exp(),n=e.sub(a.mul(t)),u=e.sub(n.div(e.add(1).sub(e.add(2).mul(n).div(b.mul(2,e).add(2))))),b.abs(u.sub(e)).lt(b.abs(u).mul(r)))return u;e=u}throw Error("Iteration failed to converge: ".concat(a.toString()))}var b=function(){function a(r){s(this,a),this.sign=0,this.mag=0,this.layer=0,r instanceof a?this.fromDecimal(r):typeof r=="number"?this.fromNumber(r):typeof r=="string"&&this.fromString(r)}return h(a,[{key:"m",get:function(){if(this.sign===0)return 0;if(this.layer===0){var e=Math.floor(Math.log10(this.mag)),t;return this.mag===5e-324?t=5:t=this.mag/Ie(e),this.sign*t}else if(this.layer===1){var n=this.mag-Math.floor(this.mag);return this.sign*Math.pow(10,n)}else return this.sign},set:function(e){this.layer<=2?this.fromMantissaExponent(e,this.e):(this.sign=Math.sign(e),this.sign===0&&(this.layer=0,this.exponent=0))}},{key:"e",get:function(){return this.sign===0?0:this.layer===0?Math.floor(Math.log10(this.mag)):this.layer===1?Math.floor(this.mag):this.layer===2?Math.floor(Math.sign(this.mag)*Math.pow(10,Math.abs(this.mag))):this.mag*Number.POSITIVE_INFINITY},set:function(e){this.fromMantissaExponent(this.m,e)}},{key:"s",get:function(){return this.sign},set:function(e){e===0?(this.sign=0,this.layer=0,this.mag=0):this.sign=e}},{key:"mantissa",get:function(){return this.m},set:function(e){this.m=e}},{key:"exponent",get:function(){return this.e},set:function(e){this.e=e}},{key:"normalize",value:function(){if(this.sign===0||this.mag===0&&this.layer===0)return this.sign=0,this.mag=0,this.layer=0,this;if(this.layer===0&&this.mag<0&&(this.mag=-this.mag,this.sign=-this.sign),this.layer===0&&this.mag<k)return this.layer+=1,this.mag=Math.log10(this.mag),this;var e=Math.abs(this.mag),t=Math.sign(this.mag);if(e>=_)return this.layer+=1,this.mag=t*Math.log10(e),this;for(;e<S&&this.layer>0;)this.layer-=1,this.layer===0?this.mag=Math.pow(10,this.mag):(this.mag=t*Math.pow(10,e),e=Math.abs(this.mag),t=Math.sign(this.mag));return this.layer===0&&(this.mag<0?(this.mag=-this.mag,this.sign=-this.sign):this.mag===0&&(this.sign=0)),this}},{key:"fromComponents",value:function(e,t,n){return this.sign=e,this.layer=t,this.mag=n,this.normalize(),this}},{key:"fromComponents_noNormalize",value:function(e,t,n){return this.sign=e,this.layer=t,this.mag=n,this}},{key:"fromMantissaExponent",value:function(e,t){return this.layer=1,this.sign=Math.sign(e),e=Math.abs(e),this.mag=t+Math.log10(e),this.normalize(),this}},{key:"fromMantissaExponent_noNormalize",value:function(e,t){return this.fromMantissaExponent(e,t),this}},{key:"fromDecimal",value:function(e){return this.sign=e.sign,this.layer=e.layer,this.mag=e.mag,this}},{key:"fromNumber",value:function(e){return this.mag=Math.abs(e),this.sign=Math.sign(e),this.layer=0,this.normalize(),this}},{key:"fromString",value:function(e){var t=e,n=a.fromStringCache.get(t);if(n!==void 0)return this.fromDecimal(n);e=e.replace(",","");var u=e.split("^^^");if(u.length===2){var m=parseFloat(u[0]),v=parseFloat(u[1]),p=u[1].split(";"),N=1;if(p.length===2&&(N=parseFloat(p[1]),isFinite(N)||(N=1)),isFinite(m)&&isFinite(v)){var x=a.pentate(m,v,N);return this.sign=x.sign,this.layer=x.layer,this.mag=x.mag,a.fromStringCache.maxSize>=1&&a.fromStringCache.set(t,a.fromDecimal(this)),this}}var E=e.split("^^");if(E.length===2){var C=parseFloat(E[0]),Y=parseFloat(E[1]),ce=E[1].split(";"),J=1;if(ce.length===2&&(J=parseFloat(ce[1]),isFinite(J)||(J=1)),isFinite(C)&&isFinite(Y)){var j=a.tetrate(C,Y,J);return this.sign=j.sign,this.layer=j.layer,this.mag=j.mag,a.fromStringCache.maxSize>=1&&a.fromStringCache.set(t,a.fromDecimal(this)),this}}var K=e.split("^");if(K.length===2){var ye=parseFloat(K[0]),ve=parseFloat(K[1]);if(isFinite(ye)&&isFinite(ve)){var ee=a.pow(ye,ve);return this.sign=ee.sign,this.layer=ee.layer,this.mag=ee.mag,a.fromStringCache.maxSize>=1&&a.fromStringCache.set(t,a.fromDecimal(this)),this}}e=e.trim().toLowerCase();var V,G,w=e.split("pt");if(w.length===2){V=10,G=parseFloat(w[0]),w[1]=w[1].replace("(",""),w[1]=w[1].replace(")","");var te=parseFloat(w[1]);if(isFinite(te)||(te=1),isFinite(V)&&isFinite(G)){var re=a.tetrate(V,G,te);return this.sign=re.sign,this.layer=re.layer,this.mag=re.mag,a.fromStringCache.maxSize>=1&&a.fromStringCache.set(t,a.fromDecimal(this)),this}}if(w=e.split("p"),w.length===2){V=10,G=parseFloat(w[0]),w[1]=w[1].replace("(",""),w[1]=w[1].replace(")","");var ie=parseFloat(w[1]);if(isFinite(ie)||(ie=1),isFinite(V)&&isFinite(G)){var ne=a.tetrate(V,G,ie);return this.sign=ne.sign,this.layer=ne.layer,this.mag=ne.mag,a.fromStringCache.maxSize>=1&&a.fromStringCache.set(t,a.fromDecimal(this)),this}}var A=e.split("e"),O=A.length-1;if(O===0){var de=parseFloat(e);if(isFinite(de))return this.fromNumber(de),a.fromStringCache.size>=1&&a.fromStringCache.set(t,a.fromDecimal(this)),this}else if(O===1){var ae=parseFloat(e);if(isFinite(ae)&&ae!==0)return this.fromNumber(ae),a.fromStringCache.maxSize>=1&&a.fromStringCache.set(t,a.fromDecimal(this)),this}var X=e.split("e^");if(X.length===2){this.sign=1,X[0].charAt(0)=="-"&&(this.sign=-1);for(var pe="",W=0;W<X[1].length;++W){var se=X[1].charCodeAt(W);if(se>=43&&se<=57||se===101)pe+=X[1].charAt(W);else return this.layer=parseFloat(pe),this.mag=parseFloat(X[1].substr(W+1)),this.normalize(),a.fromStringCache.maxSize>=1&&a.fromStringCache.set(t,a.fromDecimal(this)),this}}if(O<1)return this.sign=0,this.layer=0,this.mag=0,a.fromStringCache.maxSize>=1&&a.fromStringCache.set(t,a.fromDecimal(this)),this;var B=parseFloat(A[0]);if(B===0)return this.sign=0,this.layer=0,this.mag=0,a.fromStringCache.maxSize>=1&&a.fromStringCache.set(t,a.fromDecimal(this)),this;var U=parseFloat(A[A.length-1]);if(O>=2){var ue=parseFloat(A[A.length-2]);isFinite(ue)&&(U*=Math.sign(ue),U+=H(ue))}if(!isFinite(B))this.sign=A[0]==="-"?-1:1,this.layer=O,this.mag=U;else if(O===1)this.sign=Math.sign(B),this.layer=1,this.mag=U+Math.log10(Math.abs(B));else if(this.sign=Math.sign(B),this.layer=O,O===2){var le=a.mul(y(1,2,U),o(B));return this.sign=le.sign,this.layer=le.layer,this.mag=le.mag,a.fromStringCache.maxSize>=1&&a.fromStringCache.set(t,a.fromDecimal(this)),this}else this.mag=U;return this.normalize(),a.fromStringCache.maxSize>=1&&a.fromStringCache.set(t,a.fromDecimal(this)),this}},{key:"fromValue",value:function(e){return e instanceof a?this.fromDecimal(e):typeof e=="number"?this.fromNumber(e):typeof e=="string"?this.fromString(e):(this.sign=0,this.layer=0,this.mag=0,this)}},{key:"toNumber",value:function(){return Number.isFinite(this.layer)?this.layer===0?this.sign*this.mag:this.layer===1?this.sign*Math.pow(10,this.mag):this.mag>0?this.sign>0?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:0:Number.NaN}},{key:"mantissaWithDecimalPlaces",value:function(e){return isNaN(this.m)?Number.NaN:this.m===0?0:D(this.m,e)}},{key:"magnitudeWithDecimalPlaces",value:function(e){return isNaN(this.mag)?Number.NaN:this.mag===0?0:D(this.mag,e)}},{key:"toString",value:function(){return isNaN(this.layer)||isNaN(this.sign)||isNaN(this.mag)?"NaN":this.mag===Number.POSITIVE_INFINITY||this.layer===Number.POSITIVE_INFINITY?this.sign===1?"Infinity":"-Infinity":this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toString():this.m+"e"+this.e:this.layer===1?this.m+"e"+this.e:this.layer<=P?(this.sign===-1?"-":"")+"e".repeat(this.layer)+this.mag:(this.sign===-1?"-":"")+"(e^"+this.layer+")"+this.mag}},{key:"toExponential",value:function(e){return this.layer===0?(this.sign*this.mag).toExponential(e):this.toStringWithDecimalPlaces(e)}},{key:"toFixed",value:function(e){return this.layer===0?(this.sign*this.mag).toFixed(e):this.toStringWithDecimalPlaces(e)}},{key:"toPrecision",value:function(e){return this.e<=-7?this.toExponential(e-1):e>this.e?this.toFixed(e-this.exponent-1):this.toExponential(e-1)}},{key:"valueOf",value:function(){return this.toString()}},{key:"toJSON",value:function(){return this.toString()}},{key:"toStringWithDecimalPlaces",value:function(e){return this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toFixed(e):D(this.m,e)+"e"+D(this.e,e):this.layer===1?D(this.m,e)+"e"+D(this.e,e):this.layer<=P?(this.sign===-1?"-":"")+"e".repeat(this.layer)+D(this.mag,e):(this.sign===-1?"-":"")+"(e^"+this.layer+")"+D(this.mag,e)}},{key:"abs",value:function(){return d(this.sign===0?0:1,this.layer,this.mag)}},{key:"neg",value:function(){return d(-this.sign,this.layer,this.mag)}},{key:"negate",value:function(){return this.neg()}},{key:"negated",value:function(){return this.neg()}},{key:"sgn",value:function(){return this.sign}},{key:"round",value:function(){return this.mag<0?a.dZero:this.layer===0?y(this.sign,0,Math.round(this.mag)):this}},{key:"floor",value:function(){return this.mag<0?a.dZero:this.layer===0?y(this.sign,0,Math.floor(this.mag)):this}},{key:"ceil",value:function(){return this.mag<0?a.dZero:this.layer===0?y(this.sign,0,Math.ceil(this.mag)):this}},{key:"trunc",value:function(){return this.mag<0?a.dZero:this.layer===0?y(this.sign,0,Math.trunc(this.mag)):this}},{key:"add",value:function(e){var t=o(e);if(!Number.isFinite(this.layer))return this;if(!Number.isFinite(t.layer)||this.sign===0)return t;if(t.sign===0)return this;if(this.sign===-t.sign&&this.layer===t.layer&&this.mag===t.mag)return d(0,0,0);var n,u;if(this.layer>=2||t.layer>=2)return this.maxabs(t);if(a.cmpabs(this,t)>0?(n=this,u=t):(n=t,u=this),n.layer===0&&u.layer===0)return a.fromNumber(n.sign*n.mag+u.sign*u.mag);var m=n.layer*Math.sign(n.mag),v=u.layer*Math.sign(u.mag);if(m-v>=2)return n;if(m===0&&v===-1){if(Math.abs(u.mag-Math.log10(n.mag))>c)return n;var p=Math.pow(10,Math.log10(n.mag)-u.mag),N=u.sign+n.sign*p;return y(Math.sign(N),1,u.mag+Math.log10(Math.abs(N)))}if(m===1&&v===0){if(Math.abs(n.mag-Math.log10(u.mag))>c)return n;var x=Math.pow(10,n.mag-Math.log10(u.mag)),E=u.sign+n.sign*x;return y(Math.sign(E),1,Math.log10(u.mag)+Math.log10(Math.abs(E)))}if(Math.abs(n.mag-u.mag)>c)return n;var C=Math.pow(10,n.mag-u.mag),Y=u.sign+n.sign*C;return y(Math.sign(Y),1,u.mag+Math.log10(Math.abs(Y)))}},{key:"plus",value:function(e){return this.add(e)}},{key:"sub",value:function(e){return this.add(o(e).neg())}},{key:"subtract",value:function(e){return this.sub(e)}},{key:"minus",value:function(e){return this.sub(e)}},{key:"mul",value:function(e){var t=o(e);if(!Number.isFinite(this.layer))return this;if(!Number.isFinite(t.layer))return t;if(this.sign===0||t.sign===0)return d(0,0,0);if(this.layer===t.layer&&this.mag===-t.mag)return d(this.sign*t.sign,0,1);var n,u;if(this.layer>t.layer||this.layer==t.layer&&Math.abs(this.mag)>Math.abs(t.mag)?(n=this,u=t):(n=t,u=this),n.layer===0&&u.layer===0)return a.fromNumber(n.sign*u.sign*n.mag*u.mag);if(n.layer>=3||n.layer-u.layer>=2)return y(n.sign*u.sign,n.layer,n.mag);if(n.layer===1&&u.layer===0)return y(n.sign*u.sign,1,n.mag+Math.log10(u.mag));if(n.layer===1&&u.layer===1)return y(n.sign*u.sign,1,n.mag+u.mag);if(n.layer===2&&u.layer===1){var m=y(Math.sign(n.mag),n.layer-1,Math.abs(n.mag)).add(y(Math.sign(u.mag),u.layer-1,Math.abs(u.mag)));return y(n.sign*u.sign,m.layer+1,m.sign*m.mag)}if(n.layer===2&&u.layer===2){var v=y(Math.sign(n.mag),n.layer-1,Math.abs(n.mag)).add(y(Math.sign(u.mag),u.layer-1,Math.abs(u.mag)));return y(n.sign*u.sign,v.layer+1,v.sign*v.mag)}throw Error("Bad arguments to mul: "+this+", "+e)}},{key:"multiply",value:function(e){return this.mul(e)}},{key:"times",value:function(e){return this.mul(e)}},{key:"div",value:function(e){var t=o(e);return this.mul(t.recip())}},{key:"divide",value:function(e){return this.div(e)}},{key:"divideBy",value:function(e){return this.div(e)}},{key:"dividedBy",value:function(e){return this.div(e)}},{key:"recip",value:function(){return this.mag===0?a.dNaN:this.layer===0?y(this.sign,0,1/this.mag):y(this.sign,this.layer,-this.mag)}},{key:"reciprocal",value:function(){return this.recip()}},{key:"reciprocate",value:function(){return this.recip()}},{key:"cmp",value:function(e){var t=o(e);return this.sign>t.sign?1:this.sign<t.sign?-1:this.sign*this.cmpabs(e)}},{key:"cmpabs",value:function(e){var t=o(e),n=this.mag>0?this.layer:-this.layer,u=t.mag>0?t.layer:-t.layer;return n>u?1:n<u?-1:this.mag>t.mag?1:this.mag<t.mag?-1:0}},{key:"compare",value:function(e){return this.cmp(e)}},{key:"isNan",value:function(){return isNaN(this.sign)||isNaN(this.layer)||isNaN(this.mag)}},{key:"isFinite",value:function(r){function e(){return r.apply(this,arguments)}return e.toString=function(){return r.toString()},e}(function(){return isFinite(this.sign)&&isFinite(this.layer)&&isFinite(this.mag)})},{key:"eq",value:function(e){var t=o(e);return this.sign===t.sign&&this.layer===t.layer&&this.mag===t.mag}},{key:"equals",value:function(e){return this.eq(e)}},{key:"neq",value:function(e){return!this.eq(e)}},{key:"notEquals",value:function(e){return this.neq(e)}},{key:"lt",value:function(e){return this.cmp(e)===-1}},{key:"lte",value:function(e){return!this.gt(e)}},{key:"gt",value:function(e){return this.cmp(e)===1}},{key:"gte",value:function(e){return!this.lt(e)}},{key:"max",value:function(e){var t=o(e);return this.lt(t)?t:this}},{key:"min",value:function(e){var t=o(e);return this.gt(t)?t:this}},{key:"maxabs",value:function(e){var t=o(e);return this.cmpabs(t)<0?t:this}},{key:"minabs",value:function(e){var t=o(e);return this.cmpabs(t)>0?t:this}},{key:"clamp",value:function(e,t){return this.max(e).min(t)}},{key:"clampMin",value:function(e){return this.max(e)}},{key:"clampMax",value:function(e){return this.min(e)}},{key:"cmp_tolerance",value:function(e,t){var n=o(e);return this.eq_tolerance(n,t)?0:this.cmp(n)}},{key:"compare_tolerance",value:function(e,t){return this.cmp_tolerance(e,t)}},{key:"eq_tolerance",value:function(e,t){var n=o(e);if(t==null&&(t=1e-7),this.sign!==n.sign||Math.abs(this.layer-n.layer)>1)return!1;var u=this.mag,m=n.mag;return this.layer>n.layer&&(m=H(m)),this.layer<n.layer&&(u=H(u)),Math.abs(u-m)<=t*Math.max(Math.abs(u),Math.abs(m))}},{key:"equals_tolerance",value:function(e,t){return this.eq_tolerance(e,t)}},{key:"neq_tolerance",value:function(e,t){return!this.eq_tolerance(e,t)}},{key:"notEquals_tolerance",value:function(e,t){return this.neq_tolerance(e,t)}},{key:"lt_tolerance",value:function(e,t){var n=o(e);return!this.eq_tolerance(n,t)&&this.lt(n)}},{key:"lte_tolerance",value:function(e,t){var n=o(e);return this.eq_tolerance(n,t)||this.lt(n)}},{key:"gt_tolerance",value:function(e,t){var n=o(e);return!this.eq_tolerance(n,t)&&this.gt(n)}},{key:"gte_tolerance",value:function(e,t){var n=o(e);return this.eq_tolerance(n,t)||this.gt(n)}},{key:"pLog10",value:function(){return this.lt(a.dZero)?a.dZero:this.log10()}},{key:"absLog10",value:function(){return this.sign===0?a.dNaN:this.layer>0?y(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):y(1,0,Math.log10(this.mag))}},{key:"log10",value:function(){return this.sign<=0?a.dNaN:this.layer>0?y(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):y(this.sign,0,Math.log10(this.mag))}},{key:"log",value:function(e){return e=o(e),this.sign<=0||e.sign<=0||e.sign===1&&e.layer===0&&e.mag===1?a.dNaN:this.layer===0&&e.layer===0?y(this.sign,0,Math.log(this.mag)/Math.log(e.mag)):a.div(this.log10(),e.log10())}},{key:"log2",value:function(){return this.sign<=0?a.dNaN:this.layer===0?y(this.sign,0,Math.log2(this.mag)):this.layer===1?y(Math.sign(this.mag),0,Math.abs(this.mag)*3.321928094887362):this.layer===2?y(Math.sign(this.mag),1,Math.abs(this.mag)+.5213902276543247):y(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}},{key:"ln",value:function(){return this.sign<=0?a.dNaN:this.layer===0?y(this.sign,0,Math.log(this.mag)):this.layer===1?y(Math.sign(this.mag),0,Math.abs(this.mag)*2.302585092994046):this.layer===2?y(Math.sign(this.mag),1,Math.abs(this.mag)+.36221568869946325):y(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}},{key:"logarithm",value:function(e){return this.log(e)}},{key:"pow",value:function(e){var t=o(e),n=this,u=t;if(n.sign===0)return u.eq(0)?d(1,0,1):n;if(n.sign===1&&n.layer===0&&n.mag===1)return n;if(u.sign===0)return d(1,0,1);if(u.sign===1&&u.layer===0&&u.mag===1)return n;var m=n.absLog10().mul(u).pow10();return this.sign===-1?Math.abs(u.toNumber()%2)%2===1?m.neg():Math.abs(u.toNumber()%2)%2===0?m:a.dNaN:m}},{key:"pow10",value:function(){if(!Number.isFinite(this.layer)||!Number.isFinite(this.mag))return a.dNaN;var e=this;if(e.layer===0){var t=Math.pow(10,e.sign*e.mag);if(Number.isFinite(t)&&Math.abs(t)>=.1)return y(1,0,t);if(e.sign===0)return a.dOne;e=d(e.sign,e.layer+1,Math.log10(e.mag))}return e.sign>0&&e.mag>=0?y(e.sign,e.layer+1,e.mag):e.sign<0&&e.mag>=0?y(-e.sign,e.layer+1,-e.mag):a.dOne}},{key:"pow_base",value:function(e){return o(e).pow(this)}},{key:"root",value:function(e){var t=o(e);return this.pow(t.recip())}},{key:"factorial",value:function(){return this.mag<0?this.add(1).gamma():this.layer===0?this.add(1).gamma():this.layer===1?a.exp(a.mul(this,a.ln(this).sub(1))):a.exp(this)}},{key:"gamma",value:function(){if(this.mag<0)return this.recip();if(this.layer===0){if(this.lt(d(1,0,24)))return a.fromNumber(De(this.sign*this.mag));var e=this.mag-1,t=.9189385332046727;t=t+(e+.5)*Math.log(e),t=t-e;var n=e*e,u=e,m=12*u,v=1/m,p=t+v;if(p===t||(t=p,u=u*n,m=360*u,v=1/m,p=t-v,p===t))return a.exp(t);t=p,u=u*n,m=1260*u;var N=1/m;return t=t+N,u=u*n,m=1680*u,N=1/m,t=t-N,a.exp(t)}else return this.layer===1?a.exp(a.mul(this,a.ln(this).sub(1))):a.exp(this)}},{key:"lngamma",value:function(){return this.gamma().ln()}},{key:"exp",value:function(){return this.mag<0?a.dOne:this.layer===0&&this.mag<=709.7?a.fromNumber(Math.exp(this.sign*this.mag)):this.layer===0?y(1,1,this.sign*Math.log10(Math.E)*this.mag):this.layer===1?y(1,2,this.sign*(Math.log10(.4342944819032518)+this.mag)):y(1,this.layer+1,this.sign*this.mag)}},{key:"sqr",value:function(){return this.pow(2)}},{key:"sqrt",value:function(){if(this.layer===0)return a.fromNumber(Math.sqrt(this.sign*this.mag));if(this.layer===1)return y(1,2,Math.log10(this.mag)-.3010299956639812);var e=a.div(d(this.sign,this.layer-1,this.mag),d(1,0,2));return e.layer+=1,e.normalize(),e}},{key:"cube",value:function(){return this.pow(3)}},{key:"cbrt",value:function(){return this.pow(1/3)}},{key:"tetrate",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:2,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d(1,0,1);if(e===1)return a.pow(this,t);if(e===0)return new a(t);if(this.eq(a.dOne))return a.dOne;if(this.eq(-1))return a.pow(this,t);if(e===Number.POSITIVE_INFINITY){var n=this.toNumber();if(n<=1.444667861009766&&n>=.06598803584531254){if(n>1.444667861009099)return a.fromNumber(Math.E);var u=a.ln(this).neg();return u.lambertw().div(u)}else return n>1.444667861009766?a.fromNumber(Number.POSITIVE_INFINITY):a.dNaN}if(this.eq(a.dZero)){var m=Math.abs((e+1)%2);return m>1&&(m=2-m),a.fromNumber(m)}if(e<0)return a.iteratedlog(t,this,-e);t=o(t);var v=e;e=Math.trunc(e);var p=v-e;if(this.gt(a.dZero)&&this.lte(1.444667861009766)){e=Math.min(1e4,e);for(var N=0;N<e;++N){var x=t;if(t=this.pow(t),x.eq(t))return t}if(p!=0){var E=this.pow(t);return t.mul(1-p).add(E.mul(p))}return t}p!==0&&(t.eq(a.dOne)?this.gt(10)?t=this.pow(p):(t=a.fromNumber(a.tetrate_critical(this.toNumber(),p)),this.lt(2)&&(t=t.sub(1).mul(this.minus(1)).plus(1))):this.eq(10)?t=t.layeradd10(p):t=t.layeradd(p,this));for(var C=0;C<e;++C){if(t=this.pow(t),!isFinite(t.layer)||!isFinite(t.mag))return t.normalize();if(t.layer-this.layer>3)return d(t.sign,t.layer+(e-C-1),t.mag);if(C>1e4)return t}return t}},{key:"iteratedexp",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:2,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d(1,0,1);return this.tetrate(e,t)}},{key:"iteratedlog",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;if(t<0)return a.tetrate(e,-t,this);e=o(e);var n=a.fromDecimal(this),u=t;t=Math.trunc(t);var m=u-t;if(n.layer-e.layer>3){var v=Math.min(t,n.layer-e.layer-3);t-=v,n.layer-=v}for(var p=0;p<t;++p){if(n=n.log(e),!isFinite(n.layer)||!isFinite(n.mag))return n.normalize();if(p>1e4)return n}return m>0&&m<1&&(e.eq(10)?n=n.layeradd10(-m):n=n.layeradd(-m,e)),n}},{key:"slog",value:function(){for(var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:43,n=.001,u=!1,m=!1,v=this.slog_internal(e).toNumber(),p=1;p<t;++p){var N=new a(e).tetrate(v),x=N.gt(this);t>1&&m!=x&&(u=!0),m=x,u&&(n/=2),n=Math.abs(n)*(x?-1:1),v+=n}return a.fromNumber(v)}},{key:"slog_internal",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10;if(e=o(e),e.lte(a.dZero)||e.eq(a.dOne))return a.dNaN;if(e.lt(a.dOne))return this.eq(a.dOne)?a.dZero:this.eq(a.dZero)?a.dNegOne:a.dNaN;if(this.mag<0||this.eq(a.dZero))return a.dNegOne;var t=0,n=a.fromDecimal(this);if(n.layer-e.layer>3){var u=n.layer-e.layer-3;t+=u,n.layer-=u}for(var m=0;m<100;++m)if(n.lt(a.dZero))n=a.pow(e,n),t-=1;else{if(n.lte(a.dOne))return a.fromNumber(t+a.slog_critical(e.toNumber(),n.toNumber()));t+=1,n=a.log(n,e)}return a.fromNumber(t)}},{key:"layeradd10",value:function(e){e=a.fromValue_noAlloc(e).toNumber();var t=a.fromDecimal(this);if(e>=1){t.mag<0&&t.layer>0?(t.sign=0,t.mag=0,t.layer=0):t.sign===-1&&t.layer==0&&(t.sign=1,t.mag=-t.mag);var n=Math.trunc(e);e-=n,t.layer+=n}if(e<=-1){var u=Math.trunc(e);if(e-=u,t.layer+=u,t.layer<0)for(var m=0;m<100;++m){if(t.layer++,t.mag=Math.log10(t.mag),!isFinite(t.mag))return t.sign===0&&(t.sign=1),t.layer<0&&(t.layer=0),t.normalize();if(t.layer>=0)break}}for(;t.layer<0;)t.layer++,t.mag=Math.log10(t.mag);return t.sign===0&&(t.sign=1,t.mag===0&&t.layer>=1&&(t.layer-=1,t.mag=1)),t.normalize(),e!==0?t.layeradd(e,10):t}},{key:"layeradd",value:function(e,t){var n=this.slog(t).toNumber(),u=n+e;return u>=0?a.tetrate(t,u):Number.isFinite(u)?u>=-1?a.log(a.tetrate(t,u+1),t):a.log(a.log(a.tetrate(t,u+2),t),t):a.dNaN}},{key:"lambertw",value:function(){if(this.lt(-.3678794411710499))throw Error("lambertw is unimplemented for results less than -1, sorry!");if(this.mag<0)return a.fromNumber(me(this.toNumber()));if(this.layer===0)return a.fromNumber(me(this.sign*this.mag));if(this.layer===1)return ge(this);if(this.layer===2)return ge(this);if(this.layer>=3)return d(this.sign,this.layer-1,this.mag);throw"Unhandled behavior in lambertw()"}},{key:"ssqrt",value:function(){if(this.sign==1&&this.layer>=3)return d(this.sign,this.layer-1,this.mag);var e=this.ln();return e.div(e.lambertw())}},{key:"pentate",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:2,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d(1,0,1);t=o(t);var n=e;e=Math.trunc(e);var u=n-e;u!==0&&(t.eq(a.dOne)?(++e,t=a.fromNumber(u)):this.eq(10)?t=t.layeradd10(u):t=t.layeradd(u,this));for(var m=0;m<e;++m){if(t=this.tetrate(t.toNumber()),!isFinite(t.layer)||!isFinite(t.mag))return t.normalize();if(m>10)return t}return t}},{key:"sin",value:function(){return this.mag<0?this:this.layer===0?a.fromNumber(Math.sin(this.sign*this.mag)):d(0,0,0)}},{key:"cos",value:function(){return this.mag<0?a.dOne:this.layer===0?a.fromNumber(Math.cos(this.sign*this.mag)):d(0,0,0)}},{key:"tan",value:function(){return this.mag<0?this:this.layer===0?a.fromNumber(Math.tan(this.sign*this.mag)):d(0,0,0)}},{key:"asin",value:function(){return this.mag<0?this:this.layer===0?a.fromNumber(Math.asin(this.sign*this.mag)):d(Number.NaN,Number.NaN,Number.NaN)}},{key:"acos",value:function(){return this.mag<0?a.fromNumber(Math.acos(this.toNumber())):this.layer===0?a.fromNumber(Math.acos(this.sign*this.mag)):d(Number.NaN,Number.NaN,Number.NaN)}},{key:"atan",value:function(){return this.mag<0?this:this.layer===0?a.fromNumber(Math.atan(this.sign*this.mag)):a.fromNumber(Math.atan(this.sign*(1/0)))}},{key:"sinh",value:function(){return this.exp().sub(this.negate().exp()).div(2)}},{key:"cosh",value:function(){return this.exp().add(this.negate().exp()).div(2)}},{key:"tanh",value:function(){return this.sinh().div(this.cosh())}},{key:"asinh",value:function(){return a.ln(this.add(this.sqr().add(1).sqrt()))}},{key:"acosh",value:function(){return a.ln(this.add(this.sqr().sub(1).sqrt()))}},{key:"atanh",value:function(){return this.abs().gte(1)?d(Number.NaN,Number.NaN,Number.NaN):a.ln(this.add(1).div(a.fromNumber(1).sub(this))).div(2)}},{key:"ascensionPenalty",value:function(e){return e===0?this:this.root(a.pow(10,e))}},{key:"egg",value:function(){return this.add(9)}},{key:"lessThanOrEqualTo",value:function(e){return this.cmp(e)<1}},{key:"lessThan",value:function(e){return this.cmp(e)<0}},{key:"greaterThanOrEqualTo",value:function(e){return this.cmp(e)>-1}},{key:"greaterThan",value:function(e){return this.cmp(e)>0}}],[{key:"fromComponents",value:function(e,t,n){return new a().fromComponents(e,t,n)}},{key:"fromComponents_noNormalize",value:function(e,t,n){return new a().fromComponents_noNormalize(e,t,n)}},{key:"fromMantissaExponent",value:function(e,t){return new a().fromMantissaExponent(e,t)}},{key:"fromMantissaExponent_noNormalize",value:function(e,t){return new a().fromMantissaExponent_noNormalize(e,t)}},{key:"fromDecimal",value:function(e){return new a().fromDecimal(e)}},{key:"fromNumber",value:function(e){return new a().fromNumber(e)}},{key:"fromString",value:function(e){return new a().fromString(e)}},{key:"fromValue",value:function(e){return new a().fromValue(e)}},{key:"fromValue_noAlloc",value:function(e){if(e instanceof a)return e;if(typeof e=="string"){var t=a.fromStringCache.get(e);return t!==void 0?t:a.fromString(e)}else return typeof e=="number"?a.fromNumber(e):a.dZero}},{key:"abs",value:function(e){return o(e).abs()}},{key:"neg",value:function(e){return o(e).neg()}},{key:"negate",value:function(e){return o(e).neg()}},{key:"negated",value:function(e){return o(e).neg()}},{key:"sign",value:function(e){return o(e).sign}},{key:"sgn",value:function(e){return o(e).sign}},{key:"round",value:function(e){return o(e).round()}},{key:"floor",value:function(e){return o(e).floor()}},{key:"ceil",value:function(e){return o(e).ceil()}},{key:"trunc",value:function(e){return o(e).trunc()}},{key:"add",value:function(e,t){return o(e).add(t)}},{key:"plus",value:function(e,t){return o(e).add(t)}},{key:"sub",value:function(e,t){return o(e).sub(t)}},{key:"subtract",value:function(e,t){return o(e).sub(t)}},{key:"minus",value:function(e,t){return o(e).sub(t)}},{key:"mul",value:function(e,t){return o(e).mul(t)}},{key:"multiply",value:function(e,t){return o(e).mul(t)}},{key:"times",value:function(e,t){return o(e).mul(t)}},{key:"div",value:function(e,t){return o(e).div(t)}},{key:"divide",value:function(e,t){return o(e).div(t)}},{key:"recip",value:function(e){return o(e).recip()}},{key:"reciprocal",value:function(e){return o(e).recip()}},{key:"reciprocate",value:function(e){return o(e).reciprocate()}},{key:"cmp",value:function(e,t){return o(e).cmp(t)}},{key:"cmpabs",value:function(e,t){return o(e).cmpabs(t)}},{key:"compare",value:function(e,t){return o(e).cmp(t)}},{key:"isNaN",value:function(r){function e(t){return r.apply(this,arguments)}return e.toString=function(){return r.toString()},e}(function(r){return r=o(r),isNaN(r.sign)||isNaN(r.layer)||isNaN(r.mag)})},{key:"isFinite",value:function(r){function e(t){return r.apply(this,arguments)}return e.toString=function(){return r.toString()},e}(function(r){return r=o(r),isFinite(r.sign)&&isFinite(r.layer)&&isFinite(r.mag)})},{key:"eq",value:function(e,t){return o(e).eq(t)}},{key:"equals",value:function(e,t){return o(e).eq(t)}},{key:"neq",value:function(e,t){return o(e).neq(t)}},{key:"notEquals",value:function(e,t){return o(e).notEquals(t)}},{key:"lt",value:function(e,t){return o(e).lt(t)}},{key:"lte",value:function(e,t){return o(e).lte(t)}},{key:"gt",value:function(e,t){return o(e).gt(t)}},{key:"gte",value:function(e,t){return o(e).gte(t)}},{key:"max",value:function(e,t){return o(e).max(t)}},{key:"min",value:function(e,t){return o(e).min(t)}},{key:"minabs",value:function(e,t){return o(e).minabs(t)}},{key:"maxabs",value:function(e,t){return o(e).maxabs(t)}},{key:"clamp",value:function(e,t,n){return o(e).clamp(t,n)}},{key:"clampMin",value:function(e,t){return o(e).clampMin(t)}},{key:"clampMax",value:function(e,t){return o(e).clampMax(t)}},{key:"cmp_tolerance",value:function(e,t,n){return o(e).cmp_tolerance(t,n)}},{key:"compare_tolerance",value:function(e,t,n){return o(e).cmp_tolerance(t,n)}},{key:"eq_tolerance",value:function(e,t,n){return o(e).eq_tolerance(t,n)}},{key:"equals_tolerance",value:function(e,t,n){return o(e).eq_tolerance(t,n)}},{key:"neq_tolerance",value:function(e,t,n){return o(e).neq_tolerance(t,n)}},{key:"notEquals_tolerance",value:function(e,t,n){return o(e).notEquals_tolerance(t,n)}},{key:"lt_tolerance",value:function(e,t,n){return o(e).lt_tolerance(t,n)}},{key:"lte_tolerance",value:function(e,t,n){return o(e).lte_tolerance(t,n)}},{key:"gt_tolerance",value:function(e,t,n){return o(e).gt_tolerance(t,n)}},{key:"gte_tolerance",value:function(e,t,n){return o(e).gte_tolerance(t,n)}},{key:"pLog10",value:function(e){return o(e).pLog10()}},{key:"absLog10",value:function(e){return o(e).absLog10()}},{key:"log10",value:function(e){return o(e).log10()}},{key:"log",value:function(e,t){return o(e).log(t)}},{key:"log2",value:function(e){return o(e).log2()}},{key:"ln",value:function(e){return o(e).ln()}},{key:"logarithm",value:function(e,t){return o(e).logarithm(t)}},{key:"pow",value:function(e,t){return o(e).pow(t)}},{key:"pow10",value:function(e){return o(e).pow10()}},{key:"root",value:function(e,t){return o(e).root(t)}},{key:"factorial",value:function(e,t){return o(e).factorial()}},{key:"gamma",value:function(e,t){return o(e).gamma()}},{key:"lngamma",value:function(e,t){return o(e).lngamma()}},{key:"exp",value:function(e){return o(e).exp()}},{key:"sqr",value:function(e){return o(e).sqr()}},{key:"sqrt",value:function(e){return o(e).sqrt()}},{key:"cube",value:function(e){return o(e).cube()}},{key:"cbrt",value:function(e){return o(e).cbrt()}},{key:"tetrate",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:d(1,0,1);return o(e).tetrate(t,n)}},{key:"iteratedexp",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:d(1,0,1);return o(e).iteratedexp(t,n)}},{key:"iteratedlog",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:10,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return o(e).iteratedlog(t,n)}},{key:"layeradd10",value:function(e,t){return o(e).layeradd10(t)}},{key:"layeradd",value:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10;return o(e).layeradd(t,n)}},{key:"slog",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:10;return o(e).slog(t)}},{key:"lambertw",value:function(e){return o(e).lambertw()}},{key:"ssqrt",value:function(e){return o(e).ssqrt()}},{key:"pentate",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:d(1,0,1);return o(e).pentate(t,n)}},{key:"affordGeometricSeries",value:function(e,t,n,u){return this.affordGeometricSeries_core(o(e),o(t),o(n),u)}},{key:"sumGeometricSeries",value:function(e,t,n,u){return this.sumGeometricSeries_core(e,o(t),o(n),u)}},{key:"affordArithmeticSeries",value:function(e,t,n,u){return this.affordArithmeticSeries_core(o(e),o(t),o(n),o(u))}},{key:"sumArithmeticSeries",value:function(e,t,n,u){return this.sumArithmeticSeries_core(o(e),o(t),o(n),o(u))}},{key:"efficiencyOfPurchase",value:function(e,t,n){return this.efficiencyOfPurchase_core(o(e),o(t),o(n))}},{key:"randomDecimalForTesting",value:function(e){if(Math.random()*20<1)return d(0,0,0);var t=Math.random()>.5?1:-1;if(Math.random()*20<1)return d(t,0,1);var n=Math.floor(Math.random()*(e+1)),u=n===0?Math.random()*616-308:Math.random()*16;Math.random()>.9&&(u=Math.trunc(u));var m=Math.pow(10,u);return Math.random()>.9&&(m=Math.trunc(m)),y(t,n,m)}},{key:"affordGeometricSeries_core",value:function(e,t,n,u){var m=t.mul(n.pow(u));return a.floor(e.div(m).mul(n.sub(1)).add(1).log10().div(n.log10()))}},{key:"sumGeometricSeries_core",value:function(e,t,n,u){return t.mul(n.pow(u)).mul(a.sub(1,n.pow(e))).div(a.sub(1,n))}},{key:"affordArithmeticSeries_core",value:function(e,t,n,u){var m=t.add(u.mul(n)),v=m.sub(n.div(2)),p=v.pow(2);return v.neg().add(p.add(n.mul(e).mul(2)).sqrt()).div(n).floor()}},{key:"sumArithmeticSeries_core",value:function(e,t,n,u){var m=t.add(u.mul(n));return e.div(2).mul(m.mul(2).plus(e.sub(1).mul(n)))}},{key:"efficiencyOfPurchase_core",value:function(e,t,n){return e.div(t).add(e.div(n))}},{key:"slog_critical",value:function(e,t){return e>10?t-1:a.critical_section(e,t,Ce)}},{key:"tetrate_critical",value:function(e,t){return a.critical_section(e,t,Ee)}},{key:"critical_section",value:function(e,t,n){t*=10,t<0&&(t=0),t>10&&(t=10),e<2&&(e=2),e>10&&(e=10);for(var u=0,m=0,v=0;v<L.length;++v)if(L[v]==e){u=n[v][Math.floor(t)],m=n[v][Math.ceil(t)];break}else if(L[v]<e&&L[v+1]>e){var p=(e-L[v])/(L[v+1]-L[v]);u=n[v][Math.floor(t)]*(1-p)+n[v+1][Math.floor(t)]*p,m=n[v][Math.ceil(t)]*(1-p)+n[v+1][Math.ceil(t)]*p;break}var N=t-Math.floor(t),x=Math.pow(e,Math.log(u)/Math.log(e)*(1-N)+Math.log(m)/Math.log(e)*N);return x}}]),a}();return b.dZero=d(0,0,0),b.dOne=d(1,0,1),b.dNegOne=d(-1,0,1),b.dTwo=d(1,0,2),b.dTen=d(1,0,10),b.dNaN=d(Number.NaN,Number.NaN,Number.NaN),b.dInf=d(1,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),b.dNegInf=d(-1,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY),b.dNumberMax=y(1,0,Number.MAX_VALUE),b.dNumberMin=y(1,0,Number.MIN_VALUE),b.fromStringCache=new f(R),o=b.fromValue_noAlloc,y=b.fromComponents,d=b.fromComponents_noNormalize,b.fromMantissaExponent,b.fromMantissaExponent_noNormalize,b})});var $=Z((Ke,ke)=>{var Oe=be(),M=Oe,F={time:function(s,l){let h=new Date;for(i=0;i<(l||1);i++)s();return timeTaken=Date.now()-h,console.log(`Function complete: Took ${timeTaken}ms`),timeTaken},random:(s,l,h)=>h!=null&&!h?Math.random()*(l>s?l-s:s-l)+(l>s?s:l):Math.round(Math.random()*(l>s?l-s:s-l)+(l>s?s:l)),string:(s,l)=>{let g=[{type:"TypeError",value:typeof s!="number",display:`${s} is not a number`},{type:"Error",value:s<1,display:`${s} is less than 1`},{type:"Error",value:s%1!=0,display:`${s} is not an integer`},{type:"Error",value:s>35&&!l,display:`${s} exceeds the maximum call size of 35`},{type:"Error",value:s>50&&l,display:`${s} exceeds the maximum call size of 50`}];for(let _ of g)if(_.value)throw`${_.type}: ${_.display}`;let c=Math.random()*1232311;for(i=0;i<s;i++)c=btoa(c)+btoa(btoa(Math.random()));return l?c.length:c},trueString:s=>"!\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~".random(s),decimalFunctions:[{name:"random",value:(s,l,h,f)=>{if(s=q(s),l=q(l),h){let g=[];for(i=0;i<h;i++){let c=q();c=c.plus(l>s?s:l).plus(l>s?l.minus(s).times(Math.random()):s.minus(l).times(Math.random())),c=f!=null&&!f?c:c.round(),g.push(c)}return g}else{let g=q();return g=g.plus(l>s?s:l).plus(l>s?l.minus(s).times(Math.random()):s.minus(l).times(Math.random())),g=f!=null&&!f?g:g.round(),g}}},{name:"mean",value:s=>{let l=new M,h=0;for(let f of s)h++,l=l.plus(f);return l.divide(h)}},{name:"median",value:(s,l=M.sort,h=M.mean)=>!s.length%2?l(s)[Math.floor(s.length/2)]:h([l(s)[s.length],l(s)[s.length-1]])},{name:"mode",value:s=>{let l=[{value:q(1/0),frequency:0}],h=[],f=[];for(let g of s){g=q(g);for(let c of l)if(console.log(c.value,g),c.value.neq(g)){l.push({value:g,frequency:1});break}else{c.frequency++;break}}console.log(l);for(let g of l)h.push(g.frequency);console.log(h),h=F.decimal.sort(h)[h.length-1],console.log(l);for(let g of l)console.log(g),g.frequency==h&&f.push(g.value);return f}},{name:"sort",value:s=>F.decimal.qtSort(s)},{name:"bbSort",value:s=>{for(let l=0;l<s.length;l++)for(let h=0;h<s.length-l-1;h++)if(q(s[h]).gt(q(s[h+1]))){let f=s[h];s[h]=s[h+1],s[h+1]=f}return s}},{name:"qtSort",value:s=>{if(s.length<2)return s;let l=q(s[Math.floor(Math.random()*s.length)]),h=[],f=[],g=[];for(let c of s)c=q(c),c.lt(l)?h.push(c):c.gt(l)?f.push(c):g.push(c);return[...F.decimal.qtSort(h),...g,...F.decimal.qtSort(f)]}}],encrypt:function(s,l){let h="",f=0;return s.forEach(function(g){f>l.length-1&&(f=0),h+=g+l[f],f++}),h=btoa(h),h},decrypt:function(s){let l=atob(s),h=1;return s.forEach(function(f){h==1?(l+=f,h=0):h++}),l},smoothDamp:function(s,l,h,f){var g=l-s,c=g*h*f;return s+c}};F.getFast=function(s,l){s=JSON.stringify(s);let h=l.toString().replace(/\\/g,"").length,f=s.search(l),g="",c=h+2,_=0,S=0,k=0,T=0,I=0;function P(){let R=s[f+c];if(s[f+c-1]!="\\")switch(R){case'"':_==0?_=1:_=0;break;case"'":S==0?S=1:S=0;break;case"`":k==0?k=1:k=0;break;case"[":T++;break;case"]":T--;break;case"{":I++;break;case"}":I--;break}g+=R,c++}for(P();_+S+k+T+I!=0;)P();return JSON.parse(g)};F.get=function(s,l){try{for(let h=0;h<Object.keys(s).length&&Object.keys(s)[h]!="sign";h++){if(Object.keys(s)[h]==l)return s[Object.keys(s)[h]];if(typeof s[Object.keys(s)[h]]=="object"){let f=Object.get(s[Object.keys(s)[h]],l);if(f!=null)return f}else continue}return null}catch{return null}};F.decimal={};for(let s of F.decimalFunctions)M[s.name]=s.value,F.decimal[s.name]=s.value;function q(s){return new M(s)}var Te=s=>new Date(s??new Date),je=M.dInf;M.prototype.clone=function(){return this};M.prototype.modular=M.prototype.mod=function(s){return s=q(s),s.eq(0)?q(0):this.sign*s.sign==-1?this.abs().mod(s.abs()).neg():this.sign==-1?this.abs().mod(s.abs()):this.sub(this.div(s).floor().mul(s))};M.prototype.softcap=function(s,l,h){var f=this.clone();return f.gte(s)&&([0,"pow"].includes(h)&&(f=f.div(s).pow(l).mul(s)),[1,"mul"].includes(h)&&(f=f.sub(s).div(l).add(s)),[2,"exp"].includes(h)&&(f=expMult(f.div(s),l).mul(s))),f};M.prototype.toRoman=function(){let s=this.clone();if(s.gte(5e3))return s;s=s.toNumber();for(var l=String(+s).split(""),h=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"],f="",g=3;g--;)f=(h[+l.pop()+g*10]||"")+f;return Array(+l.join("")+1).join("M")+f};M.prototype.scale=function(s,l,h,f=!1){s=q(s),l=q(l);var g=this.clone();return g.gte(s)&&([0,"pow"].includes(h)&&(g=f?g.mul(s.pow(l.sub(1))).root(l):g.pow(l).div(s.pow(l.sub(1)))),[1,"exp"].includes(h)&&(g=f?g.div(s).max(1).log(l).add(s):M.pow(l,g.sub(s)).mul(s))),g};M.prototype.format=function(s=2,l=9){return format(this.clone(),s,l)};M.prototype.formatST=function(s=2,l=9,h="st"){return format(this.clone(),s,l,h)};M.prototype.formatGain=function(s,l=!1){return formatGain(this.clone(),s,l)};ke.exports={eMath:F,Decimal:M,E:q,TS:Te}});var Q=Z((et,Me)=>{var{E:Ne}=$(),Le=class{constructor(s=1,l,...h){this.boost=h,this.pointer=l,this.baseEffect=Ne(s)}bGet(s){let l=null;for(let h=0;h<this.boost.length&&h!=this.boost.length;h++)s==this.boost[h].id&&(l=this.boost[h],l.index=h);return l}bRemove(s){delete this.bGet(s)}bSet(s,l,h,f,g){let c=this.bGet(s);console.log(this.bGet(s)),c?this.boost[c.index]={id:s,name:l,desc:h,value:f,order:g}:this.boost.push({id:s,name:l,desc:h,value:f,order:g})}bSetAdvanced(...s){for(let l=0;l<s.length;l++)this.bGet(s[l].id)?(console.log(l),this.boost[this.bGet(s[l].id).index]=s[l]):this.boost=this.boost.concat(s[l])}calculate(s=this.baseEffect){let l=Ne(s),h=this.boost;h.sort((f,g)=>f.order-g.order);for(let f=0;f<h.length;f++)l=h[f].value(l);return l}};Me.exports={boostStatic:Le}});var _e=Z((rt,Se)=>{var{E:z,Decimal:Ae}=$(),{boostStatic:ze}=Q(),Pe=class{constructor(){this.value=z(0),this.upgrades=[]}gain(){return this.value=this.value.add(this.boost.calculate()),this.value}addUpgrade(s){return s=s.level?{level:s.level}:{level:z(1)},this.upgrades.push(s),s}},Ve=class{constructor(s){this.upgrades=[],this.pointer=s,this.boost=new ze(1)}gain(){return this.pointer().value=this.pointer().value.add(this.boost.calculate()),this.value}addUpgrade(s,l=!0){for(let h=0;h<s.length;h++)this.pointer().addUpgrade(s[h]),s[h].getLevel=()=>this.pointer().upgrades[h].level,s[h].setLevel=f=>this.pointer().upgrades[h].level=this.pointer().upgrades[h].level.add(f),l&&s[h].effect(s.level);this.upgrades=this.upgrades.concat(s)}calculateUpgrade(s,l){function h(c,_){let S=z(0),k=z(1),T=z(0);for(;f(c,k).lt(_);)T=k,k=k.mul(2);for(;S.lt(k);){let I=Ae.floor(S.add(k).div(2));f(c,I).lt(_)?S=I.add(1):k=I}return[S,f(c,S.sub(1))]}function f(c,_){let S=z();for(let k=z(0);k.lte(_);k=k.add(1))S=S.add(c(k));return S}let g;if(typeof s=="number")g=this.upgrades[s];else if(typeof s=="string")for(let c=0;c<this.upgrades.length;c++)if(this.upgrades[c].id==s){g=this.upgrades[c];break}else continue;else return!1;return h(c=>g.costScaling(g.getLevel().add(c)),this.pointer().value)}buyUpgrade(s,l){let h;if(typeof s=="number")h=this.upgrades[s];else if(typeof s=="string"){for(let g=0;g<this.upgrades.length;g++)if(this.upgrades[g].id===s){h=this.upgrades[g];break}}else return!1;if(!h)return!1;let f=this.calculateUpgrade(s,l);if(!Array.isArray(f)||f.length!==2||f[0].lte(0))return!1;{l=h.getLevel().add(l).lte(h.maxLevel)?l:h.maxLevel.sub(h.getLevel());let g=f[0].lte(l);return f[0]=g?f[0]:l,f[1]=g?f[1]:this.calculateSum(h.costScaling,l),this.pointer().value=this.pointer().value.sub(f[1]),h.setLevel(h.getLevel().add(f[0])),typeof h.effect=="function"&&h.effect(h.getLevel(),h),!0}}};Se.exports={currency:Pe,currencyStatic:Ve}});var qe=Z((at,we)=>{var{E:Ge}=$(),{boostStatic:Xe}=Q(),Be=class{constructor(s){this.initial=s,this.value=Ge(s),this.boost=new Xe(1)}update(s){return s(),this.value=this.boost.calculate(this.initial),this.value}};we.exports={staticAttribute:Be}});var Qe=Z((ut,Fe)=>{var{eMath:Ue,Decimal:Ze,E:Ye}=$(),{boostStatic:We}=Q(),{currency:$e,currencyStatic:Re}=_e(),{staticAttribute:Je}=qe(),xe={...Ue,Decimal:Ze,E:Ye,classes:{boostStatic:We,currency:$e,currencyStatic:Re,staticAttribute:Je}};typeof window<"u"&&(window.eMath=xe);Fe.exports=xe});Qe();})();
