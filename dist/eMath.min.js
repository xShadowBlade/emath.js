(()=>{var j=(o,f)=>()=>(f||o((f={exports:{}}).exports,f),f.exports);var we=j((ye,pe)=>{(function(o,f){typeof ye=="object"&&typeof pe<"u"?pe.exports=f():typeof define=="function"&&define.amd?define(f):(o=typeof globalThis<"u"?globalThis:o||self,o.Decimal=f())})(ye,function(){"use strict";function o(s,r){if(!(s instanceof r))throw new TypeError("Cannot call a class as a function")}function f(s,r){for(var e=0;e<r.length;e++){var t=r[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(s,t.key,t)}}function m(s,r,e){return r&&f(s.prototype,r),e&&f(s,e),Object.defineProperty(s,"prototype",{writable:!1}),s}var g=function(){function s(r){o(this,s),this.map=new Map,this.first=void 0,this.last=void 0,this.maxSize=r}return m(s,[{key:"size",get:function(){return this.map.size}},{key:"get",value:function(e){var t=this.map.get(e);if(t!==void 0)return t!==this.first&&(t===this.last?(this.last=t.prev,this.last.next=void 0):(t.prev.next=t.next,t.next.prev=t.prev),t.next=this.first,this.first.prev=t,this.first=t),t.value}},{key:"set",value:function(e,t){if(!(this.maxSize<1)){if(this.map.has(e))throw new Error("Cannot update existing keys in the cache");var a=new c(e,t);for(this.first===void 0?(this.first=a,this.last=a):(a.next=this.first,this.first.prev=a,this.first=a),this.map.set(e,a);this.map.size>this.maxSize;){var u=this.last;this.map.delete(u.key),this.last=u.prev,this.last.next=void 0}}}}]),s}(),c=m(function s(r,e){o(this,s),this.next=void 0,this.prev=void 0,this.key=r,this.value=e}),b=17,q=9e15,P=Math.log10(9e15),w=1/9e15,E=308,I=-324,V=5,A=1024-1,K=function(){for(var s=[],r=I+1;r<=E;r++)s.push(+("1e"+r));var e=323;return function(t){return s[t+e]}}(),x=[2,Math.E,3,4,5,6,7,8,9,10],ne=[[1,1.0891180521811203,1.1789767925673957,1.2701455431742086,1.3632090180450092,1.4587818160364217,1.5575237916251419,1.6601571006859253,1.767485818836978,1.8804192098842727,2],[1,1.1121114330934079,1.231038924931609,1.3583836963111375,1.4960519303993531,1.6463542337511945,1.8121385357018724,1.996971324618307,2.2053895545527546,2.4432574483385254,Math.E],[1,1.1187738849693603,1.2464963939368214,1.38527004705667,1.5376664685821402,1.7068895236551784,1.897001227148399,2.1132403089001035,2.362480153784171,2.6539010333870774,3],[1,1.1367350847096405,1.2889510672956703,1.4606478703324786,1.6570295196661111,1.8850062585672889,2.1539465047453485,2.476829779693097,2.872061932789197,3.3664204535587183,4],[1,1.1494592900767588,1.319708228183931,1.5166291280087583,1.748171114438024,2.0253263297298045,2.3636668498288547,2.7858359149579424,3.3257226212448145,4.035730287722532,5],[1,1.159225940787673,1.343712473580932,1.5611293155111927,1.8221199554561318,2.14183924486326,2.542468319282638,3.0574682501653316,3.7390572020926873,4.6719550537360774,6],[1,1.1670905356972596,1.3632807444991446,1.5979222279405536,1.8842640123816674,2.2416069644878687,2.69893426559423,3.3012632110403577,4.121250340630164,5.281493033448316,7],[1,1.1736630594087796,1.379783782386201,1.6292821855668218,1.9378971836180754,2.3289975651071977,2.8384347394720835,3.5232708454565906,4.478242031114584,5.868592169644505,8],[1,1.1793017514670474,1.394054150657457,1.65664127441059,1.985170999970283,2.4069682290577457,2.9647310119960752,3.7278665320924946,4.814462547283592,6.436522247411611,9],[1,1.1840100246247336,1.4061375836156955,1.6802272208863964,2.026757028388619,2.4770056063449646,3.080525271755482,3.9191964192627284,5.135152840833187,6.989961179534715,10]],ae=[[-1,-.9194161097107025,-.8335625019330468,-.7425599821143978,-.6466611521029437,-.5462617907227869,-.4419033816638769,-.3342645487554494,-.224140440909962,-.11241087890006762,0],[-1,-.90603157029014,-.80786507256596,-.7064666939634,-.60294836853664,-.49849837513117,-.39430303318768,-.29147201034755,-.19097820800866,-.09361896280296,0],[-1,-.9021579584316141,-.8005762598234203,-.6964780623319391,-.5911906810998454,-.486050182576545,-.3823089430815083,-.28106046722897615,-.1831906535795894,-.08935809204418144,0],[-1,-.8917227442365535,-.781258746326964,-.6705130326902455,-.5612813129406509,-.4551067709033134,-.35319256652135966,-.2563741554088552,-.1651412821106526,-.0796919581982668,0],[-1,-.8843387974366064,-.7678744063886243,-.6529563724510552,-.5415870994657841,-.4352842206588936,-.33504449124791424,-.24138853420685147,-.15445285440944467,-.07409659641336663,0],[-1,-.8786709358426346,-.7577735191184886,-.6399546189952064,-.527284921869926,-.4211627631006314,-.3223479611761232,-.23107655627789858,-.1472057700818259,-.07035171210706326,0],[-1,-.8740862815291583,-.7497032990976209,-.6297119746181752,-.5161838335958787,-.41036238255751956,-.31277212146489963,-.2233976621705518,-.1418697367979619,-.06762117662323441,0],[-1,-.8702632331800649,-.7430366914122081,-.6213373075161548,-.5072025698095242,-.40171437727184167,-.30517930701410456,-.21736343968190863,-.137710238299109,-.06550774483471955,0],[-1,-.8670016295947213,-.7373984232432306,-.6143173985094293,-.49973884395492807,-.394584953527678,-.2989649949848695,-.21245647317021688,-.13434688362382652,-.0638072667348083,0],[-1,-.8641642839543857,-.732534623168535,-.6083127477059322,-.4934049257184696,-.3885773075899922,-.29376029055315767,-.2083678561173622,-.13155653399373268,-.062401588652553186,0]],n=function(r){return M.fromValue_noAlloc(r)},h=function(r,e,t){return M.fromComponents(r,e,t)},l=function(r,e,t){return M.fromComponents_noNormalize(r,e,t)},d=function(r,e){var t=e+1,a=Math.ceil(Math.log10(Math.abs(r))),u=Math.round(r*Math.pow(10,t-a))*Math.pow(10,a-t);return parseFloat(u.toFixed(Math.max(t-a,0)))},p=function(r){return Math.sign(r)*Math.log10(Math.abs(r))},N=function(r){if(!isFinite(r))return r;if(r<-50)return r===Math.trunc(r)?Number.NEGATIVE_INFINITY:0;for(var e=1;r<10;)e=e*r,++r;r-=1;var t=.9189385332046727;t=t+(r+.5)*Math.log(r),t=t-r;var a=r*r,u=r;return t=t+1/(12*u),u=u*a,t=t+1/(360*u),u=u*a,t=t+1/(1260*u),u=u*a,t=t+1/(1680*u),u=u*a,t=t+1/(1188*u),u=u*a,t=t+691/(360360*u),u=u*a,t=t+7/(1092*u),u=u*a,t=t+3617/(122400*u),Math.exp(t)/e},S=.5671432904097838,O=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e-10,t,a;if(!Number.isFinite(r)||r===0)return r;if(r===1)return S;r<10?t=0:t=Math.log(r)-Math.log(Math.log(r));for(var u=0;u<100;++u){if(a=(r*Math.exp(-t)+t*t)/(t+1),Math.abs(a-t)<e*Math.abs(a))return a;t=a}throw Error("Iteration failed to converge: ".concat(r.toString()))};function F(s){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e-10,e,t,a,u;if(!Number.isFinite(s.mag)||s.eq(M.dZero))return s;if(s.eq(M.dOne))return M.fromNumber(S);e=M.ln(s);for(var v=0;v<100;++v){if(t=e.neg().exp(),a=e.sub(s.mul(t)),u=e.sub(a.div(e.add(1).sub(e.add(2).mul(a).div(M.mul(2,e).add(2))))),M.abs(u.sub(e)).lt(M.abs(u).mul(r)))return u;e=u}throw Error("Iteration failed to converge: ".concat(s.toString()))}var M=function(){function s(r){o(this,s),this.sign=0,this.mag=0,this.layer=0,r instanceof s?this.fromDecimal(r):typeof r=="number"?this.fromNumber(r):typeof r=="string"&&this.fromString(r)}return m(s,[{key:"m",get:function(){if(this.sign===0)return 0;if(this.layer===0){var e=Math.floor(Math.log10(this.mag)),t;return this.mag===5e-324?t=5:t=this.mag/K(e),this.sign*t}else if(this.layer===1){var a=this.mag-Math.floor(this.mag);return this.sign*Math.pow(10,a)}else return this.sign},set:function(e){this.layer<=2?this.fromMantissaExponent(e,this.e):(this.sign=Math.sign(e),this.sign===0&&(this.layer=0,this.exponent=0))}},{key:"e",get:function(){return this.sign===0?0:this.layer===0?Math.floor(Math.log10(this.mag)):this.layer===1?Math.floor(this.mag):this.layer===2?Math.floor(Math.sign(this.mag)*Math.pow(10,Math.abs(this.mag))):this.mag*Number.POSITIVE_INFINITY},set:function(e){this.fromMantissaExponent(this.m,e)}},{key:"s",get:function(){return this.sign},set:function(e){e===0?(this.sign=0,this.layer=0,this.mag=0):this.sign=e}},{key:"mantissa",get:function(){return this.m},set:function(e){this.m=e}},{key:"exponent",get:function(){return this.e},set:function(e){this.e=e}},{key:"normalize",value:function(){if(this.sign===0||this.mag===0&&this.layer===0)return this.sign=0,this.mag=0,this.layer=0,this;if(this.layer===0&&this.mag<0&&(this.mag=-this.mag,this.sign=-this.sign),this.layer===0&&this.mag<w)return this.layer+=1,this.mag=Math.log10(this.mag),this;var e=Math.abs(this.mag),t=Math.sign(this.mag);if(e>=q)return this.layer+=1,this.mag=t*Math.log10(e),this;for(;e<P&&this.layer>0;)this.layer-=1,this.layer===0?this.mag=Math.pow(10,this.mag):(this.mag=t*Math.pow(10,e),e=Math.abs(this.mag),t=Math.sign(this.mag));return this.layer===0&&(this.mag<0?(this.mag=-this.mag,this.sign=-this.sign):this.mag===0&&(this.sign=0)),this}},{key:"fromComponents",value:function(e,t,a){return this.sign=e,this.layer=t,this.mag=a,this.normalize(),this}},{key:"fromComponents_noNormalize",value:function(e,t,a){return this.sign=e,this.layer=t,this.mag=a,this}},{key:"fromMantissaExponent",value:function(e,t){return this.layer=1,this.sign=Math.sign(e),e=Math.abs(e),this.mag=t+Math.log10(e),this.normalize(),this}},{key:"fromMantissaExponent_noNormalize",value:function(e,t){return this.fromMantissaExponent(e,t),this}},{key:"fromDecimal",value:function(e){return this.sign=e.sign,this.layer=e.layer,this.mag=e.mag,this}},{key:"fromNumber",value:function(e){return this.mag=Math.abs(e),this.sign=Math.sign(e),this.layer=0,this.normalize(),this}},{key:"fromString",value:function(e){var t=e,a=s.fromStringCache.get(t);if(a!==void 0)return this.fromDecimal(a);e=e.replace(",","");var u=e.split("^^^");if(u.length===2){var v=parseFloat(u[0]),k=parseFloat(u[1]),_=u[1].split(";"),C=1;if(_.length===2&&(C=parseFloat(_[1]),isFinite(C)||(C=1)),isFinite(v)&&isFinite(k)){var G=s.pentate(v,k,C);return this.sign=G.sign,this.layer=G.layer,this.mag=G.mag,s.fromStringCache.maxSize>=1&&s.fromStringCache.set(t,s.fromDecimal(this)),this}}var z=e.split("^^");if(z.length===2){var B=parseFloat(z[0]),J=parseFloat(z[1]),be=z[1].split(";"),re=1;if(be.length===2&&(re=parseFloat(be[1]),isFinite(re)||(re=1)),isFinite(B)&&isFinite(J)){var se=s.tetrate(B,J,re);return this.sign=se.sign,this.layer=se.layer,this.mag=se.mag,s.fromStringCache.maxSize>=1&&s.fromStringCache.set(t,s.fromDecimal(this)),this}}var oe=e.split("^");if(oe.length===2){var Ne=parseFloat(oe[0]),ke=parseFloat(oe[1]);if(isFinite(Ne)&&isFinite(ke)){var ue=s.pow(Ne,ke);return this.sign=ue.sign,this.layer=ue.layer,this.mag=ue.mag,s.fromStringCache.maxSize>=1&&s.fromStringCache.set(t,s.fromDecimal(this)),this}}e=e.trim().toLowerCase();var H,Z,D=e.split("pt");if(D.length===2){H=10,Z=parseFloat(D[0]),D[1]=D[1].replace("(",""),D[1]=D[1].replace(")","");var le=parseFloat(D[1]);if(isFinite(le)||(le=1),isFinite(H)&&isFinite(Z)){var fe=s.tetrate(H,Z,le);return this.sign=fe.sign,this.layer=fe.layer,this.mag=fe.mag,s.fromStringCache.maxSize>=1&&s.fromStringCache.set(t,s.fromDecimal(this)),this}}if(D=e.split("p"),D.length===2){H=10,Z=parseFloat(D[0]),D[1]=D[1].replace("(",""),D[1]=D[1].replace(")","");var he=parseFloat(D[1]);if(isFinite(he)||(he=1),isFinite(H)&&isFinite(Z)){var me=s.tetrate(H,Z,he);return this.sign=me.sign,this.layer=me.layer,this.mag=me.mag,s.fromStringCache.maxSize>=1&&s.fromStringCache.set(t,s.fromDecimal(this)),this}}var U=e.split("e"),X=U.length-1;if(X===0){var Me=parseFloat(e);if(isFinite(Me))return this.fromNumber(Me),s.fromStringCache.size>=1&&s.fromStringCache.set(t,s.fromDecimal(this)),this}else if(X===1){var ge=parseFloat(e);if(isFinite(ge)&&ge!==0)return this.fromNumber(ge),s.fromStringCache.maxSize>=1&&s.fromStringCache.set(t,s.fromDecimal(this)),this}var Y=e.split("e^");if(Y.length===2){this.sign=1,Y[0].charAt(0)=="-"&&(this.sign=-1);for(var Se="",ee=0;ee<Y[1].length;++ee){var ce=Y[1].charCodeAt(ee);if(ce>=43&&ce<=57||ce===101)Se+=Y[1].charAt(ee);else return this.layer=parseFloat(Se),this.mag=parseFloat(Y[1].substr(ee+1)),this.normalize(),s.fromStringCache.maxSize>=1&&s.fromStringCache.set(t,s.fromDecimal(this)),this}}if(X<1)return this.sign=0,this.layer=0,this.mag=0,s.fromStringCache.maxSize>=1&&s.fromStringCache.set(t,s.fromDecimal(this)),this;var Q=parseFloat(U[0]);if(Q===0)return this.sign=0,this.layer=0,this.mag=0,s.fromStringCache.maxSize>=1&&s.fromStringCache.set(t,s.fromDecimal(this)),this;var W=parseFloat(U[U.length-1]);if(X>=2){var de=parseFloat(U[U.length-2]);isFinite(de)&&(W*=Math.sign(de),W+=p(de))}if(!isFinite(Q))this.sign=U[0]==="-"?-1:1,this.layer=X,this.mag=W;else if(X===1)this.sign=Math.sign(Q),this.layer=1,this.mag=W+Math.log10(Math.abs(Q));else if(this.sign=Math.sign(Q),this.layer=X,X===2){var ve=s.mul(h(1,2,W),n(Q));return this.sign=ve.sign,this.layer=ve.layer,this.mag=ve.mag,s.fromStringCache.maxSize>=1&&s.fromStringCache.set(t,s.fromDecimal(this)),this}else this.mag=W;return this.normalize(),s.fromStringCache.maxSize>=1&&s.fromStringCache.set(t,s.fromDecimal(this)),this}},{key:"fromValue",value:function(e){return e instanceof s?this.fromDecimal(e):typeof e=="number"?this.fromNumber(e):typeof e=="string"?this.fromString(e):(this.sign=0,this.layer=0,this.mag=0,this)}},{key:"toNumber",value:function(){return Number.isFinite(this.layer)?this.layer===0?this.sign*this.mag:this.layer===1?this.sign*Math.pow(10,this.mag):this.mag>0?this.sign>0?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:0:Number.NaN}},{key:"mantissaWithDecimalPlaces",value:function(e){return isNaN(this.m)?Number.NaN:this.m===0?0:d(this.m,e)}},{key:"magnitudeWithDecimalPlaces",value:function(e){return isNaN(this.mag)?Number.NaN:this.mag===0?0:d(this.mag,e)}},{key:"toString",value:function(){return isNaN(this.layer)||isNaN(this.sign)||isNaN(this.mag)?"NaN":this.mag===Number.POSITIVE_INFINITY||this.layer===Number.POSITIVE_INFINITY?this.sign===1?"Infinity":"-Infinity":this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toString():this.m+"e"+this.e:this.layer===1?this.m+"e"+this.e:this.layer<=V?(this.sign===-1?"-":"")+"e".repeat(this.layer)+this.mag:(this.sign===-1?"-":"")+"(e^"+this.layer+")"+this.mag}},{key:"toExponential",value:function(e){return this.layer===0?(this.sign*this.mag).toExponential(e):this.toStringWithDecimalPlaces(e)}},{key:"toFixed",value:function(e){return this.layer===0?(this.sign*this.mag).toFixed(e):this.toStringWithDecimalPlaces(e)}},{key:"toPrecision",value:function(e){return this.e<=-7?this.toExponential(e-1):e>this.e?this.toFixed(e-this.exponent-1):this.toExponential(e-1)}},{key:"valueOf",value:function(){return this.toString()}},{key:"toJSON",value:function(){return this.toString()}},{key:"toStringWithDecimalPlaces",value:function(e){return this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toFixed(e):d(this.m,e)+"e"+d(this.e,e):this.layer===1?d(this.m,e)+"e"+d(this.e,e):this.layer<=V?(this.sign===-1?"-":"")+"e".repeat(this.layer)+d(this.mag,e):(this.sign===-1?"-":"")+"(e^"+this.layer+")"+d(this.mag,e)}},{key:"abs",value:function(){return l(this.sign===0?0:1,this.layer,this.mag)}},{key:"neg",value:function(){return l(-this.sign,this.layer,this.mag)}},{key:"negate",value:function(){return this.neg()}},{key:"negated",value:function(){return this.neg()}},{key:"sgn",value:function(){return this.sign}},{key:"round",value:function(){return this.mag<0?s.dZero:this.layer===0?h(this.sign,0,Math.round(this.mag)):this}},{key:"floor",value:function(){return this.mag<0?s.dZero:this.layer===0?h(this.sign,0,Math.floor(this.mag)):this}},{key:"ceil",value:function(){return this.mag<0?s.dZero:this.layer===0?h(this.sign,0,Math.ceil(this.mag)):this}},{key:"trunc",value:function(){return this.mag<0?s.dZero:this.layer===0?h(this.sign,0,Math.trunc(this.mag)):this}},{key:"add",value:function(e){var t=n(e);if(!Number.isFinite(this.layer))return this;if(!Number.isFinite(t.layer)||this.sign===0)return t;if(t.sign===0)return this;if(this.sign===-t.sign&&this.layer===t.layer&&this.mag===t.mag)return l(0,0,0);var a,u;if(this.layer>=2||t.layer>=2)return this.maxabs(t);if(s.cmpabs(this,t)>0?(a=this,u=t):(a=t,u=this),a.layer===0&&u.layer===0)return s.fromNumber(a.sign*a.mag+u.sign*u.mag);var v=a.layer*Math.sign(a.mag),k=u.layer*Math.sign(u.mag);if(v-k>=2)return a;if(v===0&&k===-1){if(Math.abs(u.mag-Math.log10(a.mag))>b)return a;var _=Math.pow(10,Math.log10(a.mag)-u.mag),C=u.sign+a.sign*_;return h(Math.sign(C),1,u.mag+Math.log10(Math.abs(C)))}if(v===1&&k===0){if(Math.abs(a.mag-Math.log10(u.mag))>b)return a;var G=Math.pow(10,a.mag-Math.log10(u.mag)),z=u.sign+a.sign*G;return h(Math.sign(z),1,Math.log10(u.mag)+Math.log10(Math.abs(z)))}if(Math.abs(a.mag-u.mag)>b)return a;var B=Math.pow(10,a.mag-u.mag),J=u.sign+a.sign*B;return h(Math.sign(J),1,u.mag+Math.log10(Math.abs(J)))}},{key:"plus",value:function(e){return this.add(e)}},{key:"sub",value:function(e){return this.add(n(e).neg())}},{key:"subtract",value:function(e){return this.sub(e)}},{key:"minus",value:function(e){return this.sub(e)}},{key:"mul",value:function(e){var t=n(e);if(!Number.isFinite(this.layer))return this;if(!Number.isFinite(t.layer))return t;if(this.sign===0||t.sign===0)return l(0,0,0);if(this.layer===t.layer&&this.mag===-t.mag)return l(this.sign*t.sign,0,1);var a,u;if(this.layer>t.layer||this.layer==t.layer&&Math.abs(this.mag)>Math.abs(t.mag)?(a=this,u=t):(a=t,u=this),a.layer===0&&u.layer===0)return s.fromNumber(a.sign*u.sign*a.mag*u.mag);if(a.layer>=3||a.layer-u.layer>=2)return h(a.sign*u.sign,a.layer,a.mag);if(a.layer===1&&u.layer===0)return h(a.sign*u.sign,1,a.mag+Math.log10(u.mag));if(a.layer===1&&u.layer===1)return h(a.sign*u.sign,1,a.mag+u.mag);if(a.layer===2&&u.layer===1){var v=h(Math.sign(a.mag),a.layer-1,Math.abs(a.mag)).add(h(Math.sign(u.mag),u.layer-1,Math.abs(u.mag)));return h(a.sign*u.sign,v.layer+1,v.sign*v.mag)}if(a.layer===2&&u.layer===2){var k=h(Math.sign(a.mag),a.layer-1,Math.abs(a.mag)).add(h(Math.sign(u.mag),u.layer-1,Math.abs(u.mag)));return h(a.sign*u.sign,k.layer+1,k.sign*k.mag)}throw Error("Bad arguments to mul: "+this+", "+e)}},{key:"multiply",value:function(e){return this.mul(e)}},{key:"times",value:function(e){return this.mul(e)}},{key:"div",value:function(e){var t=n(e);return this.mul(t.recip())}},{key:"divide",value:function(e){return this.div(e)}},{key:"divideBy",value:function(e){return this.div(e)}},{key:"dividedBy",value:function(e){return this.div(e)}},{key:"recip",value:function(){return this.mag===0?s.dNaN:this.layer===0?h(this.sign,0,1/this.mag):h(this.sign,this.layer,-this.mag)}},{key:"reciprocal",value:function(){return this.recip()}},{key:"reciprocate",value:function(){return this.recip()}},{key:"cmp",value:function(e){var t=n(e);return this.sign>t.sign?1:this.sign<t.sign?-1:this.sign*this.cmpabs(e)}},{key:"cmpabs",value:function(e){var t=n(e),a=this.mag>0?this.layer:-this.layer,u=t.mag>0?t.layer:-t.layer;return a>u?1:a<u?-1:this.mag>t.mag?1:this.mag<t.mag?-1:0}},{key:"compare",value:function(e){return this.cmp(e)}},{key:"isNan",value:function(){return isNaN(this.sign)||isNaN(this.layer)||isNaN(this.mag)}},{key:"isFinite",value:function(r){function e(){return r.apply(this,arguments)}return e.toString=function(){return r.toString()},e}(function(){return isFinite(this.sign)&&isFinite(this.layer)&&isFinite(this.mag)})},{key:"eq",value:function(e){var t=n(e);return this.sign===t.sign&&this.layer===t.layer&&this.mag===t.mag}},{key:"equals",value:function(e){return this.eq(e)}},{key:"neq",value:function(e){return!this.eq(e)}},{key:"notEquals",value:function(e){return this.neq(e)}},{key:"lt",value:function(e){return this.cmp(e)===-1}},{key:"lte",value:function(e){return!this.gt(e)}},{key:"gt",value:function(e){return this.cmp(e)===1}},{key:"gte",value:function(e){return!this.lt(e)}},{key:"max",value:function(e){var t=n(e);return this.lt(t)?t:this}},{key:"min",value:function(e){var t=n(e);return this.gt(t)?t:this}},{key:"maxabs",value:function(e){var t=n(e);return this.cmpabs(t)<0?t:this}},{key:"minabs",value:function(e){var t=n(e);return this.cmpabs(t)>0?t:this}},{key:"clamp",value:function(e,t){return this.max(e).min(t)}},{key:"clampMin",value:function(e){return this.max(e)}},{key:"clampMax",value:function(e){return this.min(e)}},{key:"cmp_tolerance",value:function(e,t){var a=n(e);return this.eq_tolerance(a,t)?0:this.cmp(a)}},{key:"compare_tolerance",value:function(e,t){return this.cmp_tolerance(e,t)}},{key:"eq_tolerance",value:function(e,t){var a=n(e);if(t==null&&(t=1e-7),this.sign!==a.sign||Math.abs(this.layer-a.layer)>1)return!1;var u=this.mag,v=a.mag;return this.layer>a.layer&&(v=p(v)),this.layer<a.layer&&(u=p(u)),Math.abs(u-v)<=t*Math.max(Math.abs(u),Math.abs(v))}},{key:"equals_tolerance",value:function(e,t){return this.eq_tolerance(e,t)}},{key:"neq_tolerance",value:function(e,t){return!this.eq_tolerance(e,t)}},{key:"notEquals_tolerance",value:function(e,t){return this.neq_tolerance(e,t)}},{key:"lt_tolerance",value:function(e,t){var a=n(e);return!this.eq_tolerance(a,t)&&this.lt(a)}},{key:"lte_tolerance",value:function(e,t){var a=n(e);return this.eq_tolerance(a,t)||this.lt(a)}},{key:"gt_tolerance",value:function(e,t){var a=n(e);return!this.eq_tolerance(a,t)&&this.gt(a)}},{key:"gte_tolerance",value:function(e,t){var a=n(e);return this.eq_tolerance(a,t)||this.gt(a)}},{key:"pLog10",value:function(){return this.lt(s.dZero)?s.dZero:this.log10()}},{key:"absLog10",value:function(){return this.sign===0?s.dNaN:this.layer>0?h(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):h(1,0,Math.log10(this.mag))}},{key:"log10",value:function(){return this.sign<=0?s.dNaN:this.layer>0?h(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):h(this.sign,0,Math.log10(this.mag))}},{key:"log",value:function(e){return e=n(e),this.sign<=0||e.sign<=0||e.sign===1&&e.layer===0&&e.mag===1?s.dNaN:this.layer===0&&e.layer===0?h(this.sign,0,Math.log(this.mag)/Math.log(e.mag)):s.div(this.log10(),e.log10())}},{key:"log2",value:function(){return this.sign<=0?s.dNaN:this.layer===0?h(this.sign,0,Math.log2(this.mag)):this.layer===1?h(Math.sign(this.mag),0,Math.abs(this.mag)*3.321928094887362):this.layer===2?h(Math.sign(this.mag),1,Math.abs(this.mag)+.5213902276543247):h(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}},{key:"ln",value:function(){return this.sign<=0?s.dNaN:this.layer===0?h(this.sign,0,Math.log(this.mag)):this.layer===1?h(Math.sign(this.mag),0,Math.abs(this.mag)*2.302585092994046):this.layer===2?h(Math.sign(this.mag),1,Math.abs(this.mag)+.36221568869946325):h(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}},{key:"logarithm",value:function(e){return this.log(e)}},{key:"pow",value:function(e){var t=n(e),a=this,u=t;if(a.sign===0)return u.eq(0)?l(1,0,1):a;if(a.sign===1&&a.layer===0&&a.mag===1)return a;if(u.sign===0)return l(1,0,1);if(u.sign===1&&u.layer===0&&u.mag===1)return a;var v=a.absLog10().mul(u).pow10();return this.sign===-1?Math.abs(u.toNumber()%2)%2===1?v.neg():Math.abs(u.toNumber()%2)%2===0?v:s.dNaN:v}},{key:"pow10",value:function(){if(!Number.isFinite(this.layer)||!Number.isFinite(this.mag))return s.dNaN;var e=this;if(e.layer===0){var t=Math.pow(10,e.sign*e.mag);if(Number.isFinite(t)&&Math.abs(t)>=.1)return h(1,0,t);if(e.sign===0)return s.dOne;e=l(e.sign,e.layer+1,Math.log10(e.mag))}return e.sign>0&&e.mag>=0?h(e.sign,e.layer+1,e.mag):e.sign<0&&e.mag>=0?h(-e.sign,e.layer+1,-e.mag):s.dOne}},{key:"pow_base",value:function(e){return n(e).pow(this)}},{key:"root",value:function(e){var t=n(e);return this.pow(t.recip())}},{key:"factorial",value:function(){return this.mag<0?this.add(1).gamma():this.layer===0?this.add(1).gamma():this.layer===1?s.exp(s.mul(this,s.ln(this).sub(1))):s.exp(this)}},{key:"gamma",value:function(){if(this.mag<0)return this.recip();if(this.layer===0){if(this.lt(l(1,0,24)))return s.fromNumber(N(this.sign*this.mag));var e=this.mag-1,t=.9189385332046727;t=t+(e+.5)*Math.log(e),t=t-e;var a=e*e,u=e,v=12*u,k=1/v,_=t+k;if(_===t||(t=_,u=u*a,v=360*u,k=1/v,_=t-k,_===t))return s.exp(t);t=_,u=u*a,v=1260*u;var C=1/v;return t=t+C,u=u*a,v=1680*u,C=1/v,t=t-C,s.exp(t)}else return this.layer===1?s.exp(s.mul(this,s.ln(this).sub(1))):s.exp(this)}},{key:"lngamma",value:function(){return this.gamma().ln()}},{key:"exp",value:function(){return this.mag<0?s.dOne:this.layer===0&&this.mag<=709.7?s.fromNumber(Math.exp(this.sign*this.mag)):this.layer===0?h(1,1,this.sign*Math.log10(Math.E)*this.mag):this.layer===1?h(1,2,this.sign*(Math.log10(.4342944819032518)+this.mag)):h(1,this.layer+1,this.sign*this.mag)}},{key:"sqr",value:function(){return this.pow(2)}},{key:"sqrt",value:function(){if(this.layer===0)return s.fromNumber(Math.sqrt(this.sign*this.mag));if(this.layer===1)return h(1,2,Math.log10(this.mag)-.3010299956639812);var e=s.div(l(this.sign,this.layer-1,this.mag),l(1,0,2));return e.layer+=1,e.normalize(),e}},{key:"cube",value:function(){return this.pow(3)}},{key:"cbrt",value:function(){return this.pow(1/3)}},{key:"tetrate",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:2,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:l(1,0,1);if(e===1)return s.pow(this,t);if(e===0)return new s(t);if(this.eq(s.dOne))return s.dOne;if(this.eq(-1))return s.pow(this,t);if(e===Number.POSITIVE_INFINITY){var a=this.toNumber();if(a<=1.444667861009766&&a>=.06598803584531254){if(a>1.444667861009099)return s.fromNumber(Math.E);var u=s.ln(this).neg();return u.lambertw().div(u)}else return a>1.444667861009766?s.fromNumber(Number.POSITIVE_INFINITY):s.dNaN}if(this.eq(s.dZero)){var v=Math.abs((e+1)%2);return v>1&&(v=2-v),s.fromNumber(v)}if(e<0)return s.iteratedlog(t,this,-e);t=n(t);var k=e;e=Math.trunc(e);var _=k-e;if(this.gt(s.dZero)&&this.lte(1.444667861009766)){e=Math.min(1e4,e);for(var C=0;C<e;++C){var G=t;if(t=this.pow(t),G.eq(t))return t}if(_!=0){var z=this.pow(t);return t.mul(1-_).add(z.mul(_))}return t}_!==0&&(t.eq(s.dOne)?this.gt(10)?t=this.pow(_):(t=s.fromNumber(s.tetrate_critical(this.toNumber(),_)),this.lt(2)&&(t=t.sub(1).mul(this.minus(1)).plus(1))):this.eq(10)?t=t.layeradd10(_):t=t.layeradd(_,this));for(var B=0;B<e;++B){if(t=this.pow(t),!isFinite(t.layer)||!isFinite(t.mag))return t.normalize();if(t.layer-this.layer>3)return l(t.sign,t.layer+(e-B-1),t.mag);if(B>1e4)return t}return t}},{key:"iteratedexp",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:2,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:l(1,0,1);return this.tetrate(e,t)}},{key:"iteratedlog",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;if(t<0)return s.tetrate(e,-t,this);e=n(e);var a=s.fromDecimal(this),u=t;t=Math.trunc(t);var v=u-t;if(a.layer-e.layer>3){var k=Math.min(t,a.layer-e.layer-3);t-=k,a.layer-=k}for(var _=0;_<t;++_){if(a=a.log(e),!isFinite(a.layer)||!isFinite(a.mag))return a.normalize();if(_>1e4)return a}return v>0&&v<1&&(e.eq(10)?a=a.layeradd10(-v):a=a.layeradd(-v,e)),a}},{key:"slog",value:function(){for(var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:43,a=.001,u=!1,v=!1,k=this.slog_internal(e).toNumber(),_=1;_<t;++_){var C=new s(e).tetrate(k),G=C.gt(this);t>1&&v!=G&&(u=!0),v=G,u&&(a/=2),a=Math.abs(a)*(G?-1:1),k+=a}return s.fromNumber(k)}},{key:"slog_internal",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10;if(e=n(e),e.lte(s.dZero)||e.eq(s.dOne))return s.dNaN;if(e.lt(s.dOne))return this.eq(s.dOne)?s.dZero:this.eq(s.dZero)?s.dNegOne:s.dNaN;if(this.mag<0||this.eq(s.dZero))return s.dNegOne;var t=0,a=s.fromDecimal(this);if(a.layer-e.layer>3){var u=a.layer-e.layer-3;t+=u,a.layer-=u}for(var v=0;v<100;++v)if(a.lt(s.dZero))a=s.pow(e,a),t-=1;else{if(a.lte(s.dOne))return s.fromNumber(t+s.slog_critical(e.toNumber(),a.toNumber()));t+=1,a=s.log(a,e)}return s.fromNumber(t)}},{key:"layeradd10",value:function(e){e=s.fromValue_noAlloc(e).toNumber();var t=s.fromDecimal(this);if(e>=1){t.mag<0&&t.layer>0?(t.sign=0,t.mag=0,t.layer=0):t.sign===-1&&t.layer==0&&(t.sign=1,t.mag=-t.mag);var a=Math.trunc(e);e-=a,t.layer+=a}if(e<=-1){var u=Math.trunc(e);if(e-=u,t.layer+=u,t.layer<0)for(var v=0;v<100;++v){if(t.layer++,t.mag=Math.log10(t.mag),!isFinite(t.mag))return t.sign===0&&(t.sign=1),t.layer<0&&(t.layer=0),t.normalize();if(t.layer>=0)break}}for(;t.layer<0;)t.layer++,t.mag=Math.log10(t.mag);return t.sign===0&&(t.sign=1,t.mag===0&&t.layer>=1&&(t.layer-=1,t.mag=1)),t.normalize(),e!==0?t.layeradd(e,10):t}},{key:"layeradd",value:function(e,t){var a=this.slog(t).toNumber(),u=a+e;return u>=0?s.tetrate(t,u):Number.isFinite(u)?u>=-1?s.log(s.tetrate(t,u+1),t):s.log(s.log(s.tetrate(t,u+2),t),t):s.dNaN}},{key:"lambertw",value:function(){if(this.lt(-.3678794411710499))throw Error("lambertw is unimplemented for results less than -1, sorry!");if(this.mag<0)return s.fromNumber(O(this.toNumber()));if(this.layer===0)return s.fromNumber(O(this.sign*this.mag));if(this.layer===1)return F(this);if(this.layer===2)return F(this);if(this.layer>=3)return l(this.sign,this.layer-1,this.mag);throw"Unhandled behavior in lambertw()"}},{key:"ssqrt",value:function(){if(this.sign==1&&this.layer>=3)return l(this.sign,this.layer-1,this.mag);var e=this.ln();return e.div(e.lambertw())}},{key:"pentate",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:2,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:l(1,0,1);t=n(t);var a=e;e=Math.trunc(e);var u=a-e;u!==0&&(t.eq(s.dOne)?(++e,t=s.fromNumber(u)):this.eq(10)?t=t.layeradd10(u):t=t.layeradd(u,this));for(var v=0;v<e;++v){if(t=this.tetrate(t.toNumber()),!isFinite(t.layer)||!isFinite(t.mag))return t.normalize();if(v>10)return t}return t}},{key:"sin",value:function(){return this.mag<0?this:this.layer===0?s.fromNumber(Math.sin(this.sign*this.mag)):l(0,0,0)}},{key:"cos",value:function(){return this.mag<0?s.dOne:this.layer===0?s.fromNumber(Math.cos(this.sign*this.mag)):l(0,0,0)}},{key:"tan",value:function(){return this.mag<0?this:this.layer===0?s.fromNumber(Math.tan(this.sign*this.mag)):l(0,0,0)}},{key:"asin",value:function(){return this.mag<0?this:this.layer===0?s.fromNumber(Math.asin(this.sign*this.mag)):l(Number.NaN,Number.NaN,Number.NaN)}},{key:"acos",value:function(){return this.mag<0?s.fromNumber(Math.acos(this.toNumber())):this.layer===0?s.fromNumber(Math.acos(this.sign*this.mag)):l(Number.NaN,Number.NaN,Number.NaN)}},{key:"atan",value:function(){return this.mag<0?this:this.layer===0?s.fromNumber(Math.atan(this.sign*this.mag)):s.fromNumber(Math.atan(this.sign*(1/0)))}},{key:"sinh",value:function(){return this.exp().sub(this.negate().exp()).div(2)}},{key:"cosh",value:function(){return this.exp().add(this.negate().exp()).div(2)}},{key:"tanh",value:function(){return this.sinh().div(this.cosh())}},{key:"asinh",value:function(){return s.ln(this.add(this.sqr().add(1).sqrt()))}},{key:"acosh",value:function(){return s.ln(this.add(this.sqr().sub(1).sqrt()))}},{key:"atanh",value:function(){return this.abs().gte(1)?l(Number.NaN,Number.NaN,Number.NaN):s.ln(this.add(1).div(s.fromNumber(1).sub(this))).div(2)}},{key:"ascensionPenalty",value:function(e){return e===0?this:this.root(s.pow(10,e))}},{key:"egg",value:function(){return this.add(9)}},{key:"lessThanOrEqualTo",value:function(e){return this.cmp(e)<1}},{key:"lessThan",value:function(e){return this.cmp(e)<0}},{key:"greaterThanOrEqualTo",value:function(e){return this.cmp(e)>-1}},{key:"greaterThan",value:function(e){return this.cmp(e)>0}}],[{key:"fromComponents",value:function(e,t,a){return new s().fromComponents(e,t,a)}},{key:"fromComponents_noNormalize",value:function(e,t,a){return new s().fromComponents_noNormalize(e,t,a)}},{key:"fromMantissaExponent",value:function(e,t){return new s().fromMantissaExponent(e,t)}},{key:"fromMantissaExponent_noNormalize",value:function(e,t){return new s().fromMantissaExponent_noNormalize(e,t)}},{key:"fromDecimal",value:function(e){return new s().fromDecimal(e)}},{key:"fromNumber",value:function(e){return new s().fromNumber(e)}},{key:"fromString",value:function(e){return new s().fromString(e)}},{key:"fromValue",value:function(e){return new s().fromValue(e)}},{key:"fromValue_noAlloc",value:function(e){if(e instanceof s)return e;if(typeof e=="string"){var t=s.fromStringCache.get(e);return t!==void 0?t:s.fromString(e)}else return typeof e=="number"?s.fromNumber(e):s.dZero}},{key:"abs",value:function(e){return n(e).abs()}},{key:"neg",value:function(e){return n(e).neg()}},{key:"negate",value:function(e){return n(e).neg()}},{key:"negated",value:function(e){return n(e).neg()}},{key:"sign",value:function(e){return n(e).sign}},{key:"sgn",value:function(e){return n(e).sign}},{key:"round",value:function(e){return n(e).round()}},{key:"floor",value:function(e){return n(e).floor()}},{key:"ceil",value:function(e){return n(e).ceil()}},{key:"trunc",value:function(e){return n(e).trunc()}},{key:"add",value:function(e,t){return n(e).add(t)}},{key:"plus",value:function(e,t){return n(e).add(t)}},{key:"sub",value:function(e,t){return n(e).sub(t)}},{key:"subtract",value:function(e,t){return n(e).sub(t)}},{key:"minus",value:function(e,t){return n(e).sub(t)}},{key:"mul",value:function(e,t){return n(e).mul(t)}},{key:"multiply",value:function(e,t){return n(e).mul(t)}},{key:"times",value:function(e,t){return n(e).mul(t)}},{key:"div",value:function(e,t){return n(e).div(t)}},{key:"divide",value:function(e,t){return n(e).div(t)}},{key:"recip",value:function(e){return n(e).recip()}},{key:"reciprocal",value:function(e){return n(e).recip()}},{key:"reciprocate",value:function(e){return n(e).reciprocate()}},{key:"cmp",value:function(e,t){return n(e).cmp(t)}},{key:"cmpabs",value:function(e,t){return n(e).cmpabs(t)}},{key:"compare",value:function(e,t){return n(e).cmp(t)}},{key:"isNaN",value:function(r){function e(t){return r.apply(this,arguments)}return e.toString=function(){return r.toString()},e}(function(r){return r=n(r),isNaN(r.sign)||isNaN(r.layer)||isNaN(r.mag)})},{key:"isFinite",value:function(r){function e(t){return r.apply(this,arguments)}return e.toString=function(){return r.toString()},e}(function(r){return r=n(r),isFinite(r.sign)&&isFinite(r.layer)&&isFinite(r.mag)})},{key:"eq",value:function(e,t){return n(e).eq(t)}},{key:"equals",value:function(e,t){return n(e).eq(t)}},{key:"neq",value:function(e,t){return n(e).neq(t)}},{key:"notEquals",value:function(e,t){return n(e).notEquals(t)}},{key:"lt",value:function(e,t){return n(e).lt(t)}},{key:"lte",value:function(e,t){return n(e).lte(t)}},{key:"gt",value:function(e,t){return n(e).gt(t)}},{key:"gte",value:function(e,t){return n(e).gte(t)}},{key:"max",value:function(e,t){return n(e).max(t)}},{key:"min",value:function(e,t){return n(e).min(t)}},{key:"minabs",value:function(e,t){return n(e).minabs(t)}},{key:"maxabs",value:function(e,t){return n(e).maxabs(t)}},{key:"clamp",value:function(e,t,a){return n(e).clamp(t,a)}},{key:"clampMin",value:function(e,t){return n(e).clampMin(t)}},{key:"clampMax",value:function(e,t){return n(e).clampMax(t)}},{key:"cmp_tolerance",value:function(e,t,a){return n(e).cmp_tolerance(t,a)}},{key:"compare_tolerance",value:function(e,t,a){return n(e).cmp_tolerance(t,a)}},{key:"eq_tolerance",value:function(e,t,a){return n(e).eq_tolerance(t,a)}},{key:"equals_tolerance",value:function(e,t,a){return n(e).eq_tolerance(t,a)}},{key:"neq_tolerance",value:function(e,t,a){return n(e).neq_tolerance(t,a)}},{key:"notEquals_tolerance",value:function(e,t,a){return n(e).notEquals_tolerance(t,a)}},{key:"lt_tolerance",value:function(e,t,a){return n(e).lt_tolerance(t,a)}},{key:"lte_tolerance",value:function(e,t,a){return n(e).lte_tolerance(t,a)}},{key:"gt_tolerance",value:function(e,t,a){return n(e).gt_tolerance(t,a)}},{key:"gte_tolerance",value:function(e,t,a){return n(e).gte_tolerance(t,a)}},{key:"pLog10",value:function(e){return n(e).pLog10()}},{key:"absLog10",value:function(e){return n(e).absLog10()}},{key:"log10",value:function(e){return n(e).log10()}},{key:"log",value:function(e,t){return n(e).log(t)}},{key:"log2",value:function(e){return n(e).log2()}},{key:"ln",value:function(e){return n(e).ln()}},{key:"logarithm",value:function(e,t){return n(e).logarithm(t)}},{key:"pow",value:function(e,t){return n(e).pow(t)}},{key:"pow10",value:function(e){return n(e).pow10()}},{key:"root",value:function(e,t){return n(e).root(t)}},{key:"factorial",value:function(e,t){return n(e).factorial()}},{key:"gamma",value:function(e,t){return n(e).gamma()}},{key:"lngamma",value:function(e,t){return n(e).lngamma()}},{key:"exp",value:function(e){return n(e).exp()}},{key:"sqr",value:function(e){return n(e).sqr()}},{key:"sqrt",value:function(e){return n(e).sqrt()}},{key:"cube",value:function(e){return n(e).cube()}},{key:"cbrt",value:function(e){return n(e).cbrt()}},{key:"tetrate",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:l(1,0,1);return n(e).tetrate(t,a)}},{key:"iteratedexp",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:l(1,0,1);return n(e).iteratedexp(t,a)}},{key:"iteratedlog",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:10,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return n(e).iteratedlog(t,a)}},{key:"layeradd10",value:function(e,t){return n(e).layeradd10(t)}},{key:"layeradd",value:function(e,t){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10;return n(e).layeradd(t,a)}},{key:"slog",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:10;return n(e).slog(t)}},{key:"lambertw",value:function(e){return n(e).lambertw()}},{key:"ssqrt",value:function(e){return n(e).ssqrt()}},{key:"pentate",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:l(1,0,1);return n(e).pentate(t,a)}},{key:"affordGeometricSeries",value:function(e,t,a,u){return this.affordGeometricSeries_core(n(e),n(t),n(a),u)}},{key:"sumGeometricSeries",value:function(e,t,a,u){return this.sumGeometricSeries_core(e,n(t),n(a),u)}},{key:"affordArithmeticSeries",value:function(e,t,a,u){return this.affordArithmeticSeries_core(n(e),n(t),n(a),n(u))}},{key:"sumArithmeticSeries",value:function(e,t,a,u){return this.sumArithmeticSeries_core(n(e),n(t),n(a),n(u))}},{key:"efficiencyOfPurchase",value:function(e,t,a){return this.efficiencyOfPurchase_core(n(e),n(t),n(a))}},{key:"randomDecimalForTesting",value:function(e){if(Math.random()*20<1)return l(0,0,0);var t=Math.random()>.5?1:-1;if(Math.random()*20<1)return l(t,0,1);var a=Math.floor(Math.random()*(e+1)),u=a===0?Math.random()*616-308:Math.random()*16;Math.random()>.9&&(u=Math.trunc(u));var v=Math.pow(10,u);return Math.random()>.9&&(v=Math.trunc(v)),h(t,a,v)}},{key:"affordGeometricSeries_core",value:function(e,t,a,u){var v=t.mul(a.pow(u));return s.floor(e.div(v).mul(a.sub(1)).add(1).log10().div(a.log10()))}},{key:"sumGeometricSeries_core",value:function(e,t,a,u){return t.mul(a.pow(u)).mul(s.sub(1,a.pow(e))).div(s.sub(1,a))}},{key:"affordArithmeticSeries_core",value:function(e,t,a,u){var v=t.add(u.mul(a)),k=v.sub(a.div(2)),_=k.pow(2);return k.neg().add(_.add(a.mul(e).mul(2)).sqrt()).div(a).floor()}},{key:"sumArithmeticSeries_core",value:function(e,t,a,u){var v=t.add(u.mul(a));return e.div(2).mul(v.mul(2).plus(e.sub(1).mul(a)))}},{key:"efficiencyOfPurchase_core",value:function(e,t,a){return e.div(t).add(e.div(a))}},{key:"slog_critical",value:function(e,t){return e>10?t-1:s.critical_section(e,t,ae)}},{key:"tetrate_critical",value:function(e,t){return s.critical_section(e,t,ne)}},{key:"critical_section",value:function(e,t,a){t*=10,t<0&&(t=0),t>10&&(t=10),e<2&&(e=2),e>10&&(e=10);for(var u=0,v=0,k=0;k<x.length;++k)if(x[k]==e){u=a[k][Math.floor(t)],v=a[k][Math.ceil(t)];break}else if(x[k]<e&&x[k+1]>e){var _=(e-x[k])/(x[k+1]-x[k]);u=a[k][Math.floor(t)]*(1-_)+a[k+1][Math.floor(t)]*_,v=a[k][Math.ceil(t)]*(1-_)+a[k+1][Math.ceil(t)]*_;break}var C=t-Math.floor(t),G=Math.pow(e,Math.log(u)/Math.log(e)*(1-C)+Math.log(v)/Math.log(e)*C);return G}}]),s}();return M.dZero=l(0,0,0),M.dOne=l(1,0,1),M.dNegOne=l(-1,0,1),M.dTwo=l(1,0,2),M.dTen=l(1,0,10),M.dNaN=l(Number.NaN,Number.NaN,Number.NaN),M.dInf=l(1,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),M.dNegInf=l(-1,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY),M.dNumberMax=h(1,0,Number.MAX_VALUE),M.dNumberMin=h(1,0,Number.MIN_VALUE),M.fromStringCache=new g(A),n=M.fromValue_noAlloc,h=M.fromComponents,l=M.fromComponents_noNormalize,M.fromMantissaExponent,M.fromMantissaExponent_noNormalize,M})});var te=j((rt,qe)=>{var L=we(),T=L,R={decimalFunctions:[{name:"random",value:(o,f,m,g)=>{if(o=y(o),f=y(f),m){let c=[];for(i=0;i<m;i++){let b=y();b=b.plus(f>o?o:f).plus(f>o?f.minus(o).times(Math.random()):o.minus(f).times(Math.random())),b=g!=null&&!g?b:b.round(),c.push(b)}return c}else{let c=y();return c=c.plus(f>o?o:f).plus(f>o?f.minus(o).times(Math.random()):o.minus(f).times(Math.random())),c=g!=null&&!g?c:c.round(),c}}},{name:"mean",value:o=>{let f=new T,m=0;for(let g of o)m++,f=f.plus(g);return f.divide(m)}},{name:"median",value:(o,f=T.sort,m=T.mean)=>!o.length%2?f(o)[Math.floor(o.length/2)]:m([f(o)[o.length],f(o)[o.length-1]])},{name:"mode",value:o=>{let f=[{value:y(1/0),frequency:0}],m=[],g=[];for(let c of o){c=y(c);for(let b of f)if(console.log(b.value,c),b.value.neq(c)){f.push({value:c,frequency:1});break}else{b.frequency++;break}}console.log(f);for(let c of f)m.push(c.frequency);console.log(m),m=R.decimal.sort(m)[m.length-1],console.log(f);for(let c of f)console.log(c),c.frequency==m&&g.push(c.value);return g}},{name:"sort",value:o=>R.decimal.qtSort(o)},{name:"bbSort",value:o=>{for(let f=0;f<o.length;f++)for(let m=0;m<o.length-f-1;m++)if(y(o[m]).gt(y(o[m+1]))){let g=o[m];o[m]=o[m+1],o[m+1]=g}return o}},{name:"qtSort",value:o=>{if(o.length<2)return o;let f=y(o[Math.floor(Math.random()*o.length)]),m=[],g=[],c=[];for(let b of o)b=y(b),b.lt(f)?m.push(b):b.gt(f)?g.push(b):c.push(b);return[...R.decimal.qtSort(m),...c,...R.decimal.qtSort(g)]}},{name:"smoothDamp",value:(o,f,m,g)=>o.add(f.minus(o).times(m).times(g))}]};String.prototype.forEach=function(o){for(i=0;i<this.length;i++)o(this[i])},String.prototype.forEachAdvanced=function(o,f,m){for(i=f<0?0:f;i<(m>this.length?this.length:m<f?this.length:m);i++)o({value:this[i],index:i})},String.prototype.toNumber=function(){let o="";for(i=0;i<this.length;i++)o+=this.charCodeAt(i).toString();return o},String.prototype.toArray=function(){let o=[];return this.forEach(function(f){o.push(f)}),o},String.prototype.before=function(o){let f="";return this.forEachAdvanced(function(m){f+=m.value},0,o),f},String.prototype.after=function(o){let f="";return this.forEachAdvanced(function(m){f+=m.value},o,-1),f},String.prototype.customSplit=function(o){let f=[];return f.push(this.before(o)),f.push(this.after(o)),f},String.prototype.random=function(o){let f=(g,c,b)=>b!=null&&!b?Math.random()*(c>g?c-g:g-c)+(c>g?g:c):Math.round(Math.random()*(c>g?c-g:g-c)+(c>g?g:c)),m="";if(o>0)for(i=0;i<o;i++)m+=this.charAt(f(0,this.length));else m=this.charAt(f(0,this.length));return m};Array.prototype.random=function(o){let f=(g,c,b)=>b!=null&&!b?Math.random()*(c>g?c-g:g-c)+(c>g?g:c):Math.round(Math.random()*(c>g?c-g:g-c)+(c>g?g:c)),m="";if(o>0)for(i=0;i<o;i++)m+=this[f(0,this.length)];else m=this[f(0,this.length)];return m};R.getFast=function(o,f){o=JSON.stringify(o);let m=f.toString().replace(/\\/g,"").length,g=o.search(f),c="",b=m+2,q=0,P=0,w=0,E=0,I=0;function V(){let A=o[g+b];if(o[g+b-1]!="\\")switch(A){case'"':q==0?q=1:q=0;break;case"'":P==0?P=1:P=0;break;case"`":w==0?w=1:w=0;break;case"[":E++;break;case"]":E--;break;case"{":I++;break;case"}":I--;break}c+=A,b++}for(V();q+P+w+E+I!=0;)V();return JSON.parse(c)};R.get=function(o,f){try{for(let m=0;m<Object.keys(o).length&&Object.keys(o)[m]!="sign";m++){if(Object.keys(o)[m]==f)return o[Object.keys(o)[m]];if(typeof o[Object.keys(o)[m]]=="object"){let g=Object.get(o[Object.keys(o)[m]],f);if(g!=null)return g}else continue}return null}catch{return null}};for(let o of R.decimalFunctions)T[o.name]=o.value;delete R.decimalFunctions;function y(o){return new T(o)}var Le=o=>new Date(o??new Date),tt=T.dInf;T.prototype.clone=function(){return this};T.prototype.modular=T.prototype.mod=function(o){return o=y(o),o.eq(0)?y(0):this.sign*o.sign==-1?this.abs().mod(o.abs()).neg():this.sign==-1?this.abs().mod(o.abs()):this.sub(this.div(o).floor().mul(o))};T.prototype.softcap=function(o,f,m){var g=this.clone();return g.gte(o)&&([0,"pow"].includes(m)&&(g=g.div(o).pow(f).mul(o)),[1,"mul"].includes(m)&&(g=g.sub(o).div(f).add(o)),[2,"exp"].includes(m)&&(g=expMult(g.div(o),f).mul(o))),g};T.prototype.toRoman=function(){let o=this.clone();if(o.gte(5e3))return o;o=o.toNumber();for(var f=String(+o).split(""),m=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"],g="",c=3;c--;)g=(m[+f.pop()+c*10]||"")+g;return Array(+f.join("")+1).join("M")+g};T.prototype.scale=function(o,f,m,g=!1){o=y(o),f=y(f);var c=this.clone();return c.gte(o)&&([0,"pow"].includes(m)&&(c=g?c.mul(o.pow(f.sub(1))).root(f):c.pow(f).div(o.pow(f.sub(1)))),[1,"exp"].includes(m)&&(c=g?c.div(o).max(1).log(f).add(o):T.pow(f,c.sub(o)).mul(o))),c};var _e=(()=>{let o=[null,[["","U","D","T","Qa","Qt","Sx","Sp","Oc","No"],["","Dc","Vg","Tg","Qag","Qtg","Sxg","Spg","Ocg","Nog"],["","Ce","De","Te","Qae","Qte","Sxe","Spe","Oce","Noe"]],[["","Mi","Mc","Na","Pc","Fm","At","Zp","Yc","Xn"],["","Me","Du","Tr","Te","Pe","He","Hp","Ot","En"],["","c","Ic","TCn","TeC","PCn","HCn","HpC","OCn","ECn"],["","Hc","DHe","THt","TeH","PHc","HHe","HpH","OHt","EHc"]]],f={omega:{config:{greek:"\u03B2\u03B6\u03BB\u03C8\u03A3\u0398\u03A8\u03C9",infinity:"\u03A9"},format(n){let h=L.floor(n.div(1e3)),l=L.floor(h.div(this.config.greek.length)),d=this.config.greek[h.toNumber()%this.config.greek.length]+b(n.toNumber()%1e3);(this.config.greek[h.toNumber()%this.config.greek.length]===void 0||h.toNumber()>Number.MAX_SAFE_INTEGER)&&(d="\u03C9");let N=L.log(n,8e3);if(l.equals(0))return d;if(l.gt(0)&&l.lte(3)){let F=[];for(let M=0;M<l.toNumber();M++)F.push("\u03C9");return`${F.join("^")}^${d}`}else{if(l.gt(3)&&l.lt(10))return`\u03C9(${l.toFixed(0)})^${d}`;if(N<3)return`\u03C9(${this.format(l)})^${d}`;if(N<6)return`\u03C9(${this.format(l)})`}let S=L.pow(8e3,N%1);return`\u03C9[${N<100?Math.floor(N).toFixed(0):this.format(L.floor(N))}](${this.format(S)})`}},omega_short:{config:{greek:"\u03B2\u03B6\u03BB\u03C8\u03A3\u0398\u03A8\u03C9",infinity:"\u03A9"},format(n){let h=L.floor(n.div(1e3)),l=L.floor(h.div(this.config.greek.length)),d=this.config.greek[h.toNumber()%this.config.greek.length]+b(n.toNumber()%1e3);(this.config.greek[h.toNumber()%this.config.greek.length]===void 0||h.toNumber()>Number.MAX_SAFE_INTEGER)&&(d="\u03C9");let N=L.log(n,8e3);if(l.equals(0))return d;if(l.gt(0)&&l.lte(2)){let F=[];for(let M=0;M<l.toNumber();M++)F.push("\u03C9");return`${F.join("^")}^${d}`}else if(l.gt(2)&&l.lt(10))return`\u03C9(${l.toFixed(0)})^${d}`;let S=L.pow(8e3,N%1);return`\u03C9[${N<100?Math.floor(N).toFixed(0):this.format(L.floor(N))}](${this.format(S)})`}},elemental:{config:{element_lists:[["H"],["He","Li","Be","B","C","N","O","F"],["Ne","Na","Mg","Al","Si","P","S","Cl"],["Ar","K","Ca","Sc","Ti","V","Cr","Mn","Fe","Co","Ni","Cu","Zn","Ga","Ge","As","Se","Br"],["Kr","Rb","Sr","Y","Zr","Nb","Mo","Tc","Ru","Rh","Pd","Ag","Cd","In","Sn","Sb","Te","I"],["Xe","Cs","Ba","La","Ce","Pr","Nd","Pm","Sm","Eu","Gd","Tb","Dy","Ho","Er","Tm","Yb","Lu","Hf","Ta","W","Re","Os","Ir","Pt","Au","Hg","Tl","Pb","Bi","Po","At"],["Rn","Fr","Ra","Ac","Th","Pa","U","Np","Pu","Am","Cm","Bk","Cf","Es","Fm","Md","No","Lr","Rf","Db","Sg","Bh","Hs","Mt","Ds","Rg","Cn","Nh","Fl","Mc","Lv","Ts"],["Og"]]},getOffset(n){if(n==1)return 1;let h=Math.floor(n/2),l=2*h*(h+1)*(2*h+1)/3-2;return n%2==1&&(l+=2*Math.pow(h+1,2)),l},getAbbreviation(n,h){let l=this.abbreviationLength(n),d=Math.floor(l*h),p=d+this.getOffset(n);return p>118?this.beyondOg(p):this.config.element_lists[n-1][d]},beyondOg(n){let h=Math.floor(Math.log10(n)),l=["n","u","b","t","q","p","h","s","o","e"],d="";for(var p=h;p>=0;p--){let N=Math.floor(n/Math.pow(10,p))%10;d==""?d=l[N].toUpperCase():d+=l[N]}return d},abbreviationLength(n){return n==1?1:Math.pow(Math.floor(n/2)+1,2)*2},getAbbreviationAndValue(n){let h=n.log(118).toNumber(),l=Math.floor(h)+1,d=this.abbreviationLength(l),p=h-l+1,N=Math.floor(p*d),S=this.getAbbreviation(l,p),O=y(118).pow(l+N/d-1);return[S,O]},formatElementalPart(n,h){return h.eq(1)?n:`${h} ${n}`},format(n,h){if(n.gt(y(118).pow(y(118).pow(y(118).pow(4)))))return"e"+this.format(n.log10(),h);let l=n.log(118),p=l.log(118).log(118).toNumber(),N=Math.max(4-p*2,1),S=[];for(;l.gte(1)&&S.length<N;){let[F,M]=this.getAbbreviationAndValue(l),s=l.div(M).floor();l=l.sub(s.mul(M)),S.unshift([F,s])}if(S.length>=N)return S.map(F=>this.formatElementalPart(F[0],F[1])).join(" + ");let O=y(118).pow(l).toFixed(S.length===1?3:h);return S.length===0?O:S.length===1?`${O} \xD7 ${this.formatElementalPart(S[0][0],S[0][1])}`:`${O} \xD7 (${S.map(F=>this.formatElementalPart(F[0],F[1])).join(" + ")})`}},old_sc:{format(n,h){n=y(n);let l=n.log10().floor();if(l.lt(9))return l.lt(3)?n.toFixed(h):n.floor().toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,");{if(n.gte("eeee10")){let p=n.slog();return(p.gte(1e9)?"":y(10).pow(p.sub(p.floor())).toFixed(4))+"F"+this.format(p.floor(),0)}let d=n.div(y(10).pow(l));return(l.log10().gte(9)?"":d.toFixed(4))+"e"+this.format(l,0)}}},eng:{format(n,h){n=y(n);let l=n.log10().floor();if(l.lt(9))return l.lt(3)?n.toFixed(h):n.floor().toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,");{if(n.gte("eeee10")){let p=n.slog();return(p.gte(1e9)?"":y(10).pow(p.sub(p.floor())).toFixed(4))+"F"+this.format(p.floor(),0)}let d=n.div(y(1e3).pow(l.div(3).floor()));return(l.log10().gte(9)?"":d.toFixed(y(4).sub(l.sub(l.div(3).floor().mul(3)))))+"e"+this.format(l.div(3).floor().mul(3),0)}}},mixed_sc:{format(n,h,l){n=y(n);let d=n.log10().floor();return d.lt(303)&&d.gte(l)?w(n,h,l,"st"):w(n,h,l,"sc")}},layer:{layers:["infinity","eternity","reality","equality","affinity","celerity","identity","vitality","immunity","atrocity"],format(n,h,l){n=y(n);let d=n.max(1).log10().max(1).log(m.log10()).floor();if(d.lte(0))return w(n,h,l,"sc");n=y(10).pow(n.max(1).log10().div(m.log10().pow(d)).sub(d.gte(1)?1:0));let p=d.div(10).floor(),N=d.toNumber()%10-1;return w(n,Math.max(4,h),l,"sc")+" "+(p.gte(1)?"meta"+(p.gte(2)?"^"+w(p,0,l,"sc"):"")+"-":"")+(isNaN(N)?"nanity":this.layers[N])}},standard:{tier1(n){return o[1][0][n%10]+o[1][1][Math.floor(n/10)%10]+o[1][2][Math.floor(n/100)]},tier2(n){let h=n%10,l=Math.floor(n/10)%10,d=Math.floor(n/100)%10,p="";return n<10?o[2][0][n]:(l==1&&h==0?p+="Vec":p+=o[2][1][h]+o[2][2][l],p+=o[2][3][d],p)}},inf:{format(n,h,l){let d=0,p=y(Number.MAX_VALUE),N=["","\u221E","\u03A9","\u03A8","\u028A"],S=["","","m","mm","mmm"];for(;n.gte(p);)n=n.log(p),d++;return d==0?w(n,h,l,"sc"):n.gte(3)?S[d]+N[d]+"\u03C9^"+w(n.sub(1),h,l,"sc"):n.gte(2)?S[d]+"\u03C9"+N[d]+"-"+w(p.pow(n.sub(2)),h,l,"sc"):S[d]+N[d]+"-"+w(p.pow(n.sub(1)),h,l,"sc")}}},m=y(2).pow(1024),g="\u2080\u2081\u2082\u2083\u2084\u2085\u2086\u2087\u2088\u2089",c="\u2070\xB9\xB2\xB3\u2074\u2075\u2076\u2077\u2078\u2079";function b(n){return n.toFixed(0).split("").map(h=>h==="-"?"\u208B":g[parseInt(h,10)]).join("")}function q(n){return n.toFixed(0).split("").map(h=>h==="-"?"\u208B":c[parseInt(h,10)]).join("")}function P(n,h=2,l=9,d="st"){return w(n,h,l,d)}function w(n,h=2,l=9,d="mixed_sc"){if(n=y(n),neg=n.lt(0)?"-":"",n.mag==1/0)return neg+"Infinity";if(Number.isNaN(n.mag))return neg+"NaN";if(n.lt(0)&&(n=n.mul(-1)),n.eq(0))return n.toFixed(h);let p=n.log10().floor();switch(d){case"sc":if(n.log10().lt(Math.min(-h,0))&&h>1){let S=n.log10().ceil(),O=n.div(S.eq(-1)?y(.1):y(10).pow(S)),F=S.mul(-1).max(1).log10().gte(9);return neg+(F?"":O.toFixed(2))+"e"+w(S,0,l,"mixed_sc")}else if(p.lt(l)){let S=Math.max(Math.min(h-p.toNumber(),h),0);return neg+(S>0?n.toFixed(S):n.toFixed(S).toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"))}else{if(n.gte("eeee10")){let F=n.slog();return(F.gte(1e9)?"":y(10).pow(F.sub(F.floor())).toFixed(2))+"F"+w(F.floor(),0)}let S=n.div(y(10).pow(p)),O=p.log10().gte(9);return neg+(O?"":S.toFixed(2))+"e"+w(p,0,l,"mixed_sc")}case"st":let N=n.log(1e3).floor();if(N.lt(1))return neg+n.toFixed(Math.max(Math.min(h-p.toNumber(),h),0));{let S=N.mul(3),O=N.log10().floor();if(O.gte(3e3))return"e"+w(p,h,l,"st");let F="";if(N.lt(4))F=["","K","M","B"][Math.round(N.toNumber())];else{let s=Math.floor(N.log(1e3).toNumber());for(s<100&&(s=Math.max(s-1,0)),N=N.sub(1).div(y(10).pow(s*3));N.gt(0);){let r=N.div(1e3).floor(),e=N.sub(r.mul(1e3)).floor().toNumber();e>0&&(e==1&&!s&&(F="U"),s&&(F=f.standard.tier2(s)+(F?"-"+F:"")),e>1&&(F=f.standard.tier1(e)+F)),N=r,s++}}let M=n.div(y(10).pow(S));return neg+(O.gte(10)?"":M.toFixed(y(2).sub(p.sub(S)).add(1).toNumber())+" ")+F}default:return neg+f[d].format(n,h,l)}}function E(n,h){let l=n.add(h),d,p=l.div(n);return p.gte(10)&&n.gte(1e100)?(p=p.log10().mul(20),d="(+"+w(p)+" OoMs/sec)"):d="(+"+w(h)+"/sec)",d}function I(n,h=2,l="s"){return n=y(n),n.gte(86400)?w(n.div(86400).floor(),0,12,"sc")+":"+I(n.mod(86400),h,"d"):n.gte(3600)||l=="d"?(n.div(3600).gte(10)||l!="d"?"":"0")+w(n.div(3600).floor(),0,12,"sc")+":"+I(n.mod(3600),h,"h"):n.gte(60)||l=="h"?(n.div(60).gte(10)||l!="h"?"":"0")+w(n.div(60).floor(),0,12,"sc")+":"+I(n.mod(60),h,"m"):(n.gte(10)||l!="m"?"":"0")+w(n,h,12,"sc")}function V(n){return n=y(n),w(y(1).sub(n).mul(100))+"%"}function A(n){return n=y(n),w(n.mul(100))+"%"}function K(n,h=2){return n=y(n),n.gte(1)?"\xD7"+n.format(h):"/"+n.pow(-1).format(h)}function x(n,h,l=10){return L.gte(n,10)?L.pow(l,L.log(n,l).pow(h)):y(n)}function ne(n,h){n=y(n);let l=[{name:"K",altName:"Kilo",value:y("1000")},{name:"M",altName:"Mega",value:y("1e6")},{name:"G",altName:"Giga",value:y("1e9")},{name:"T",altName:"Tera",value:y("1e12")},{name:"P",altName:"Peta",value:y("1e15")},{name:"E",altName:"Exa",value:y("1e18")},{name:"Z",altName:"Zetta",value:y("1e21")},{name:"Y",altName:"Yotta",value:y("1e24")},{name:"R",altName:"Ronna",value:y("1e27")},{name:"Q",altName:"Quetta",value:y("1e30")}];for(let d=0;d<l.length;d++)if(n.greaterThanOrEqualTo(l[d].value)){if(d==l.length-1)switch(h){case 1:return l[d].name;case 2:return`${n.divide(l[d].value).format()}`;case 3:return l[d].altName;case 0:default:return`${n.divide(l[d].value).format()} ${l[d].name}`}continue}else if(d==0)switch(h){case 1:return"";case 2:case 0:default:return n.format()}else switch(h){case 1:return l[d-1].name;case 2:return`${n.divide(l[d-1].value).format()}`;case 3:return l[d-1].altName;case 0:default:return`${n.divide(l[d-1].value).format()} ${l[d-1].name}`}}function ae(n,h=!1){return`${this.metric(n,2)} ${this.metric(n,1)}eV${h?"/c^2":""}`}return{...f,toSubscript:b,toSuperscript:q,formatST:P,format:w,formatGain:E,formatTime:I,formatReduction:V,formatPercent:A,formatMult:K,expMult:x,metric:ne,ev:ae}})(),{format:Fe,formatGain:Ge}=_e;T.prototype.format=function(o=2,f=9){return Fe(this.clone(),o,f)};T.prototype.formatST=function(o=2,f=9,m="st"){return Fe(this.clone(),o,f,m)};T.prototype.formatGain=function(o,f=!1){return Ge(this.clone(),o,f)};Object.getOwnPropertyNames(T).forEach(o=>{y[o]=T[o]});qe.exports={eMath:R,E:y,TS:Le,formats:_e}});var ie=j((it,Ie)=>{var{E:Ee}=te(),Ve=class{constructor(o=1,f,...m){this.boost=m,this.pointer=f,this.baseEffect=Ee(o)}bGet(o){let f=null;for(let m=0;m<this.boost.length&&m!=this.boost.length;m++)o==this.boost[m].id&&(f=this.boost[m],f.index=m);return f}bRemove(o){delete this.bGet(o)}bSet(o,f,m,g,c){let b=this.bGet(o);console.log(this.bGet(o)),b?this.boost[b.index]={id:o,name:f,desc:m,value:g,order:c}:this.boost.push({id:o,name:f,desc:m,value:g,order:c})}bSetAdvanced(...o){for(let f=0;f<o.length;f++)this.bGet(o[f].id)?(console.log(f),this.boost[this.bGet(o[f].id).index]=o[f]):this.boost=this.boost.concat(o[f])}calculate(o=this.baseEffect){let f=Ee(o),m=this.boost;m.sort((g,c)=>g.order-c.order);for(let g=0;g<m.length;g++)f=m[g].value(f);return f}};Ie.exports={boostStatic:Ve}});var Te=j((at,Ce)=>{var{E:$}=te(),{boostStatic:$e}=ie(),xe=class{constructor(){this.value=$(0),this.upgrades=[]}gain(){return this.value=this.value.add(this.boost.calculate()),this.value}addUpgrade(o){return o=o.level?{level:o.level}:{level:$(1)},this.upgrades.push(o),o}},ze=class{constructor(o){this.upgrades=[],this.pointer=o,this.boost=new $e(1)}gain(){return this.pointer().value=this.pointer().value.add(this.boost.calculate()),this.value}addUpgrade(o,f=!0){for(let m=0;m<o.length;m++)this.pointer().addUpgrade(o[m]),o[m].getLevel=()=>this.pointer().upgrades[m].level,o[m].setLevel=g=>this.pointer().upgrades[m].level=this.pointer().upgrades[m].level.add(g),f&&o[m].effect(o.level);this.upgrades=this.upgrades.concat(o)}calculateUpgrade(o,f,m=!1){function g(q,P){let w=$();for(let E=$(0);E.lte(P);E=E.add(1))w=w.add(q(E));return w}function c(q,P,w=m){if(w){let E=new $(0),I=f,V=new $(-1);for(;E.lessThanOrEqualTo(I);){let A=E.plus(I).dividedBy(2).floor();q(A).lte(P)?(V=A,E=A.plus(1)):I=A.minus(1)}return V}else{let E=$(0),I=$(1),V=$(0);for(;g(q,I).lt(P);)V=I,I=I.mul(2);for(;E.lt(I);){let A=$.floor(E.add(I).div(2));g(q,A).lt(P)?E=A.add(1):I=A}return[E,g(q,E.sub(1))]}}let b;if(typeof o=="number")b=this.upgrades[o];else if(typeof o=="string")for(let q=0;q<this.upgrades.length;q++)if(this.upgrades[q].id==o){b=this.upgrades[q];break}else continue;else return!1;return c(q=>b.costScaling(b.getLevel().add(q)),this.pointer().value)}buyUpgrade(o,f){let m;if(typeof o=="number")m=this.upgrades[o];else if(typeof o=="string"){for(let c=0;c<this.upgrades.length;c++)if(this.upgrades[c].id===o){m=this.upgrades[c];break}}else return!1;if(!m)return!1;let g=this.calculateUpgrade(o,f);if(!Array.isArray(g)||g.length!==2||g[0].lte(0))return!1;{f=m.getLevel().add(f).lte(m.maxLevel)?f:m.maxLevel.sub(m.getLevel());let c=g[0].lte(f);return g[0]=c?g[0]:f,g[1]=c?g[1]:this.calculateSum(m.costScaling,f),this.pointer().value=this.pointer().value.sub(g[1]),m.setLevel(m.getLevel().add(g[0])),typeof m.effect=="function"&&m.effect(m.getLevel(),m),!0}}};Ce.exports={currency:xe,currencyStatic:ze}});var Ae=j((ut,Oe)=>{var{E:Be}=te(),{boostStatic:Re}=ie(),Xe=class{constructor(o){this.initial=o,this.value=Be(o),this.boost=new Re(1)}update(o){return o(),this.value=this.boost.calculate(this.initial),this.value}};Oe.exports={staticAttribute:Xe}});var Je=j((ft,Pe)=>{var{eMath:Ue,E:He,TS:Ze,formats:Ye}=te(),{boostStatic:Qe}=ie(),{currency:We,currencyStatic:je}=Te(),{staticAttribute:Ke}=Ae(),De={...Ue,E:He,classes:{boostStatic:Qe,currency:We,currencyStatic:je,staticAttribute:Ke},formats:Ye,TS:Ze};typeof window<"u"&&(window.eMath=De);Pe.exports=De});Je();})();
