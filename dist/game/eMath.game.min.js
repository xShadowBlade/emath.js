"use strict";(function(kt,st){var Et=typeof exports=="object";if(typeof define=="function"&&define.amd)define([],st);else if(typeof module=="object"&&module.exports)module.exports=st();else{var ft=st(),Ct=Et?exports:kt;for(var St in ft)Ct[St]=ft[St]}})(typeof self<"u"?self:exports,()=>{var kt={},st={exports:kt},Et=Object.create,ft=Object.defineProperty,Ct=Object.getOwnPropertyDescriptor,St=Object.getOwnPropertyNames,Oe=Object.getPrototypeOf,Ie=Object.prototype.hasOwnProperty,dt=(n,e)=>function(){return e||(0,n[St(n)[0]])((e={exports:{}}).exports,e),e.exports},Ee=(n,e)=>{for(var t in e)ft(n,t,{get:e[t],enumerable:!0})},$t=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of St(e))!Ie.call(n,i)&&i!==t&&ft(n,i,{get:()=>e[i],enumerable:!(r=Ct(e,i))||r.enumerable});return n},lt=(n,e,t)=>(t=n!=null?Et(Oe(n)):{},$t(e||!n||!n.__esModule?ft(t,"default",{value:n,enumerable:!0}):t,n)),Ce=n=>$t(ft({},"__esModule",{value:!0}),n),_t=(n,e,t,r)=>{for(var i=r>1?void 0:r?Ct(e,t):e,a=n.length-1,f;a>=0;a--)(f=n[a])&&(i=(r?f(e,t,i):f(i))||i);return r&&i&&ft(e,t,i),i},vt=dt({"node_modules/reflect-metadata/Reflect.js"(){var n;(function(e){(function(t){var r=typeof globalThis=="object"?globalThis:typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:y(),i=a(e);typeof r.Reflect<"u"&&(i=a(r.Reflect,i)),t(i,r),typeof r.Reflect>"u"&&(r.Reflect=e);function a(u,p){return function(o,s){Object.defineProperty(u,o,{configurable:!0,writable:!0,value:s}),p&&p(o,s)}}function f(){try{return Function("return this;")()}catch{}}function m(){try{return(0,eval)("(function() { return this; })()")}catch{}}function y(){return f()||m()}})(function(t,r){var i=Object.prototype.hasOwnProperty,a=typeof Symbol=="function",f=a&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",m=a&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",y=typeof Object.create=="function",u={__proto__:[]}instanceof Array,p=!y&&!u,o={create:y?function(){return Wt(Object.create(null))}:u?function(){return Wt({__proto__:null})}:function(){return Wt({})},has:p?function(h,d){return i.call(h,d)}:function(h,d){return d in h},get:p?function(h,d){return i.call(h,d)?h[d]:void 0}:function(h,d){return h[d]}},s=Object.getPrototypeOf(Function),l=typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:Ar(),c=typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:xr(),g=typeof WeakMap=="function"?WeakMap:Or(),_=a?Symbol.for("@reflect-metadata:registry"):void 0,D=kr(),N=Sr(D);function O(h,d,w,S){if(P(w)){if(!ve(h))throw new TypeError;if(!pe(d))throw new TypeError;return it(h,d)}else{if(!ve(h))throw new TypeError;if(!W(d))throw new TypeError;if(!W(S)&&!P(S)&&!et(S))throw new TypeError;return et(S)&&(S=void 0),w=ot(w),K(h,d,w,S)}}t("decorate",O);function j(h,d){function w(S,q){if(!W(S))throw new TypeError;if(!P(q)&&!br(q))throw new TypeError;ut(h,d,S,q)}return w}t("metadata",j);function A(h,d,w,S){if(!W(w))throw new TypeError;return P(S)||(S=ot(S)),ut(h,d,w,S)}t("defineMetadata",A);function C(h,d,w){if(!W(d))throw new TypeError;return P(w)||(w=ot(w)),Y(h,d,w)}t("hasMetadata",C);function b(h,d,w){if(!W(d))throw new TypeError;return P(w)||(w=ot(w)),R(h,d,w)}t("hasOwnMetadata",b);function M(h,d,w){if(!W(d))throw new TypeError;return P(w)||(w=ot(w)),tt(h,d,w)}t("getMetadata",M);function Z(h,d,w){if(!W(d))throw new TypeError;return P(w)||(w=ot(w)),wt(h,d,w)}t("getOwnMetadata",Z);function L(h,d){if(!W(h))throw new TypeError;return P(d)||(d=ot(d)),xt(h,d)}t("getMetadataKeys",L);function rt(h,d){if(!W(h))throw new TypeError;return P(d)||(d=ot(d)),ht(h,d)}t("getOwnMetadataKeys",rt);function nt(h,d,w){if(!W(d))throw new TypeError;if(P(w)||(w=ot(w)),!W(d))throw new TypeError;P(w)||(w=ot(w));var S=It(d,w,!1);return P(S)?!1:S.OrdinaryDeleteMetadata(h,d,w)}t("deleteMetadata",nt);function it(h,d){for(var w=h.length-1;w>=0;--w){var S=h[w],q=S(d);if(!P(q)&&!et(q)){if(!pe(q))throw new TypeError;d=q}}return d}function K(h,d,w,S){for(var q=h.length-1;q>=0;--q){var H=h[q],X=H(d,w,S);if(!P(X)&&!et(X)){if(!W(X))throw new TypeError;S=X}}return S}function Y(h,d,w){var S=R(h,d,w);if(S)return!0;var q=Zt(d);return et(q)?!1:Y(h,q,w)}function R(h,d,w){var S=It(d,w,!1);return P(S)?!1:de(S.OrdinaryHasOwnMetadata(h,d,w))}function tt(h,d,w){var S=R(h,d,w);if(S)return wt(h,d,w);var q=Zt(d);if(!et(q))return tt(h,q,w)}function wt(h,d,w){var S=It(d,w,!1);if(!P(S))return S.OrdinaryGetOwnMetadata(h,d,w)}function ut(h,d,w,S){var q=It(w,S,!0);q.OrdinaryDefineOwnMetadata(h,d,w,S)}function xt(h,d){var w=ht(h,d),S=Zt(h);if(S===null)return w;var q=xt(S,d);if(q.length<=0)return w;if(w.length<=0)return q;for(var H=new c,X=[],z=0,x=w;z<x.length;z++){var I=x[z],E=H.has(I);E||(H.add(I),X.push(I))}for(var F=0,B=q;F<B.length;F++){var I=B[F],E=H.has(I);E||(H.add(I),X.push(I))}return X}function ht(h,d){var w=It(h,d,!1);return w?w.OrdinaryOwnMetadataKeys(h,d):[]}function bt(h){if(h===null)return 1;switch(typeof h){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return h===null?1:6;default:return 6}}function P(h){return h===void 0}function et(h){return h===null}function Ot(h){return typeof h=="symbol"}function W(h){return typeof h=="object"?h!==null:typeof h=="function"}function yr(h,d){switch(bt(h)){case 0:return h;case 1:return h;case 2:return h;case 3:return h;case 4:return h;case 5:return h}var w=d===3?"string":d===5?"number":"default",S=ye(h,f);if(S!==void 0){var q=S.call(h,w);if(W(q))throw new TypeError;return q}return Mr(h,w==="default"?"number":w)}function Mr(h,d){if(d==="string"){var w=h.toString;if(Nt(w)){var S=w.call(h);if(!W(S))return S}var q=h.valueOf;if(Nt(q)){var S=q.call(h);if(!W(S))return S}}else{var q=h.valueOf;if(Nt(q)){var S=q.call(h);if(!W(S))return S}var H=h.toString;if(Nt(H)){var S=H.call(h);if(!W(S))return S}}throw new TypeError}function de(h){return!!h}function wr(h){return""+h}function ot(h){var d=yr(h,3);return Ot(d)?d:wr(d)}function ve(h){return Array.isArray?Array.isArray(h):h instanceof Object?h instanceof Array:Object.prototype.toString.call(h)==="[object Array]"}function Nt(h){return typeof h=="function"}function pe(h){return typeof h=="function"}function br(h){switch(bt(h)){case 3:return!0;case 4:return!0;default:return!1}}function Yt(h,d){return h===d||h!==h&&d!==d}function ye(h,d){var w=h[d];if(w!=null){if(!Nt(w))throw new TypeError;return w}}function Me(h){var d=ye(h,m);if(!Nt(d))throw new TypeError;var w=d.call(h);if(!W(w))throw new TypeError;return w}function we(h){return h.value}function be(h){var d=h.next();return d.done?!1:d}function Ne(h){var d=h.return;d&&d.call(h)}function Zt(h){var d=Object.getPrototypeOf(h);if(typeof h!="function"||h===s||d!==s)return d;var w=h.prototype,S=w&&Object.getPrototypeOf(w);if(S==null||S===Object.prototype)return d;var q=S.constructor;return typeof q!="function"||q===h?d:q}function Nr(){var h;!P(_)&&typeof r.Reflect<"u"&&!(_ in r.Reflect)&&typeof r.Reflect.defineMetadata=="function"&&(h=_r(r.Reflect));var d,w,S,q=new g,H={registerProvider:X,getProvider:x,setProvider:E};return H;function X(F){if(!Object.isExtensible(H))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case h===F:break;case P(d):d=F;break;case d===F:break;case P(w):w=F;break;case w===F:break;default:S===void 0&&(S=new c),S.add(F);break}}function z(F,B){if(!P(d)){if(d.isProviderFor(F,B))return d;if(!P(w)){if(w.isProviderFor(F,B))return d;if(!P(S))for(var $=Me(S);;){var J=be($);if(!J)return;var at=we(J);if(at.isProviderFor(F,B))return Ne($),at}}}if(!P(h)&&h.isProviderFor(F,B))return h}function x(F,B){var $=q.get(F),J;return P($)||(J=$.get(B)),P(J)&&(J=z(F,B),P(J)||(P($)&&($=new l,q.set(F,$)),$.set(B,J))),J}function I(F){if(P(F))throw new TypeError;return d===F||w===F||!P(S)&&S.has(F)}function E(F,B,$){if(!I($))throw new Error("Metadata provider not registered.");var J=x(F,B);if(J!==$){if(!P(J))return!1;var at=q.get(F);P(at)&&(at=new l,q.set(F,at)),at.set(B,$)}return!0}}function kr(){var h;return!P(_)&&W(r.Reflect)&&Object.isExtensible(r.Reflect)&&(h=r.Reflect[_]),P(h)&&(h=Nr()),!P(_)&&W(r.Reflect)&&Object.isExtensible(r.Reflect)&&Object.defineProperty(r.Reflect,_,{enumerable:!1,configurable:!1,writable:!1,value:h}),h}function Sr(h){var d=new g,w={isProviderFor:function(I,E){var F=d.get(I);return P(F)?!1:F.has(E)},OrdinaryDefineOwnMetadata:X,OrdinaryHasOwnMetadata:q,OrdinaryGetOwnMetadata:H,OrdinaryOwnMetadataKeys:z,OrdinaryDeleteMetadata:x};return D.registerProvider(w),w;function S(I,E,F){var B=d.get(I),$=!1;if(P(B)){if(!F)return;B=new l,d.set(I,B),$=!0}var J=B.get(E);if(P(J)){if(!F)return;if(J=new l,B.set(E,J),!h.setProvider(I,E,w))throw B.delete(E),$&&d.delete(I),new Error("Wrong provider for target.")}return J}function q(I,E,F){var B=S(E,F,!1);return P(B)?!1:de(B.has(I))}function H(I,E,F){var B=S(E,F,!1);if(!P(B))return B.get(I)}function X(I,E,F,B){var $=S(F,B,!0);$.set(I,E)}function z(I,E){var F=[],B=S(I,E,!1);if(P(B))return F;for(var $=B.keys(),J=Me($),at=0;;){var ke=be(J);if(!ke)return F.length=at,F;var Ir=we(ke);try{F[at]=Ir}catch(Er){try{Ne(J)}finally{throw Er}}at++}}function x(I,E,F){var B=S(E,F,!1);if(P(B)||!B.delete(I))return!1;if(B.size===0){var $=d.get(E);P($)||($.delete(F),$.size===0&&d.delete($))}return!0}}function _r(h){var d=h.defineMetadata,w=h.hasOwnMetadata,S=h.getOwnMetadata,q=h.getOwnMetadataKeys,H=h.deleteMetadata,X=new g,z={isProviderFor:function(x,I){var E=X.get(x);return!P(E)&&E.has(I)?!0:q(x,I).length?(P(E)&&(E=new c,X.set(x,E)),E.add(I),!0):!1},OrdinaryDefineOwnMetadata:d,OrdinaryHasOwnMetadata:w,OrdinaryGetOwnMetadata:S,OrdinaryOwnMetadataKeys:q,OrdinaryDeleteMetadata:H};return z}function It(h,d,w){var S=D.getProvider(h,d);if(!P(S))return S;if(w){if(D.setProvider(h,d,N))return N;throw new Error("Illegal state.")}}function Ar(){var h={},d=[],w=function(){function z(x,I,E){this._index=0,this._keys=x,this._values=I,this._selector=E}return z.prototype["@@iterator"]=function(){return this},z.prototype[m]=function(){return this},z.prototype.next=function(){var x=this._index;if(x>=0&&x<this._keys.length){var I=this._selector(this._keys[x],this._values[x]);return x+1>=this._keys.length?(this._index=-1,this._keys=d,this._values=d):this._index++,{value:I,done:!1}}return{value:void 0,done:!0}},z.prototype.throw=function(x){throw this._index>=0&&(this._index=-1,this._keys=d,this._values=d),x},z.prototype.return=function(x){return this._index>=0&&(this._index=-1,this._keys=d,this._values=d),{value:x,done:!0}},z}(),S=function(){function z(){this._keys=[],this._values=[],this._cacheKey=h,this._cacheIndex=-2}return Object.defineProperty(z.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),z.prototype.has=function(x){return this._find(x,!1)>=0},z.prototype.get=function(x){var I=this._find(x,!1);return I>=0?this._values[I]:void 0},z.prototype.set=function(x,I){var E=this._find(x,!0);return this._values[E]=I,this},z.prototype.delete=function(x){var I=this._find(x,!1);if(I>=0){for(var E=this._keys.length,F=I+1;F<E;F++)this._keys[F-1]=this._keys[F],this._values[F-1]=this._values[F];return this._keys.length--,this._values.length--,Yt(x,this._cacheKey)&&(this._cacheKey=h,this._cacheIndex=-2),!0}return!1},z.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=h,this._cacheIndex=-2},z.prototype.keys=function(){return new w(this._keys,this._values,q)},z.prototype.values=function(){return new w(this._keys,this._values,H)},z.prototype.entries=function(){return new w(this._keys,this._values,X)},z.prototype["@@iterator"]=function(){return this.entries()},z.prototype[m]=function(){return this.entries()},z.prototype._find=function(x,I){if(!Yt(this._cacheKey,x)){this._cacheIndex=-1;for(var E=0;E<this._keys.length;E++)if(Yt(this._keys[E],x)){this._cacheIndex=E;break}}return this._cacheIndex<0&&I&&(this._cacheIndex=this._keys.length,this._keys.push(x),this._values.push(void 0)),this._cacheIndex},z}();return S;function q(z,x){return z}function H(z,x){return x}function X(z,x){return[z,x]}}function xr(){var h=function(){function d(){this._map=new l}return Object.defineProperty(d.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),d.prototype.has=function(w){return this._map.has(w)},d.prototype.add=function(w){return this._map.set(w,w),this},d.prototype.delete=function(w){return this._map.delete(w)},d.prototype.clear=function(){this._map.clear()},d.prototype.keys=function(){return this._map.keys()},d.prototype.values=function(){return this._map.keys()},d.prototype.entries=function(){return this._map.entries()},d.prototype["@@iterator"]=function(){return this.keys()},d.prototype[m]=function(){return this.keys()},d}();return h}function Or(){var h=16,d=o.create(),w=S();return function(){function x(){this._key=S()}return x.prototype.has=function(I){var E=q(I,!1);return E!==void 0?o.has(E,this._key):!1},x.prototype.get=function(I){var E=q(I,!1);return E!==void 0?o.get(E,this._key):void 0},x.prototype.set=function(I,E){var F=q(I,!0);return F[this._key]=E,this},x.prototype.delete=function(I){var E=q(I,!1);return E!==void 0?delete E[this._key]:!1},x.prototype.clear=function(){this._key=S()},x}();function S(){var x;do x="@@WeakMap@@"+z();while(o.has(d,x));return d[x]=!0,x}function q(x,I){if(!i.call(x,w)){if(!I)return;Object.defineProperty(x,w,{value:o.create()})}return x[w]}function H(x,I){for(var E=0;E<I;++E)x[E]=Math.random()*255|0;return x}function X(x){if(typeof Uint8Array=="function"){var I=new Uint8Array(x);return typeof crypto<"u"?crypto.getRandomValues(I):typeof msCrypto<"u"?msCrypto.getRandomValues(I):H(I,x),I}return H(new Array(x),x)}function z(){var x=X(h);x[6]=x[6]&79|64,x[8]=x[8]&191|128;for(var I="",E=0;E<h;++E){var F=x[E];(E===4||E===6||E===8)&&(I+="-"),F<16&&(I+="0"),I+=F.toString(16).toLowerCase()}return I}}function Wt(h){return h.__=void 0,delete h.__,h}})})(n||(n={}))}}),Te=dt({"node_modules/lz-string/libs/lz-string.js"(n,e){var t=function(){var r=String.fromCharCode,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",f={};function m(u,p){if(!f[u]){f[u]={};for(var o=0;o<u.length;o++)f[u][u.charAt(o)]=o}return f[u][p]}var y={compressToBase64:function(u){if(u==null)return"";var p=y._compress(u,6,function(o){return i.charAt(o)});switch(p.length%4){default:case 0:return p;case 1:return p+"===";case 2:return p+"==";case 3:return p+"="}},decompressFromBase64:function(u){return u==null?"":u==""?null:y._decompress(u.length,32,function(p){return m(i,u.charAt(p))})},compressToUTF16:function(u){return u==null?"":y._compress(u,15,function(p){return r(p+32)})+" "},decompressFromUTF16:function(u){return u==null?"":u==""?null:y._decompress(u.length,16384,function(p){return u.charCodeAt(p)-32})},compressToUint8Array:function(u){for(var p=y.compress(u),o=new Uint8Array(p.length*2),s=0,l=p.length;s<l;s++){var c=p.charCodeAt(s);o[s*2]=c>>>8,o[s*2+1]=c%256}return o},decompressFromUint8Array:function(u){if(u==null)return y.decompress(u);for(var p=new Array(u.length/2),o=0,s=p.length;o<s;o++)p[o]=u[o*2]*256+u[o*2+1];var l=[];return p.forEach(function(c){l.push(r(c))}),y.decompress(l.join(""))},compressToEncodedURIComponent:function(u){return u==null?"":y._compress(u,6,function(p){return a.charAt(p)})},decompressFromEncodedURIComponent:function(u){return u==null?"":u==""?null:(u=u.replace(/ /g,"+"),y._decompress(u.length,32,function(p){return m(a,u.charAt(p))}))},compress:function(u){return y._compress(u,16,function(p){return r(p)})},_compress:function(u,p,o){if(u==null)return"";var s,l,c={},g={},_="",D="",N="",O=2,j=3,A=2,C=[],b=0,M=0,Z;for(Z=0;Z<u.length;Z+=1)if(_=u.charAt(Z),Object.prototype.hasOwnProperty.call(c,_)||(c[_]=j++,g[_]=!0),D=N+_,Object.prototype.hasOwnProperty.call(c,D))N=D;else{if(Object.prototype.hasOwnProperty.call(g,N)){if(N.charCodeAt(0)<256){for(s=0;s<A;s++)b=b<<1,M==p-1?(M=0,C.push(o(b)),b=0):M++;for(l=N.charCodeAt(0),s=0;s<8;s++)b=b<<1|l&1,M==p-1?(M=0,C.push(o(b)),b=0):M++,l=l>>1}else{for(l=1,s=0;s<A;s++)b=b<<1|l,M==p-1?(M=0,C.push(o(b)),b=0):M++,l=0;for(l=N.charCodeAt(0),s=0;s<16;s++)b=b<<1|l&1,M==p-1?(M=0,C.push(o(b)),b=0):M++,l=l>>1}O--,O==0&&(O=Math.pow(2,A),A++),delete g[N]}else for(l=c[N],s=0;s<A;s++)b=b<<1|l&1,M==p-1?(M=0,C.push(o(b)),b=0):M++,l=l>>1;O--,O==0&&(O=Math.pow(2,A),A++),c[D]=j++,N=String(_)}if(N!==""){if(Object.prototype.hasOwnProperty.call(g,N)){if(N.charCodeAt(0)<256){for(s=0;s<A;s++)b=b<<1,M==p-1?(M=0,C.push(o(b)),b=0):M++;for(l=N.charCodeAt(0),s=0;s<8;s++)b=b<<1|l&1,M==p-1?(M=0,C.push(o(b)),b=0):M++,l=l>>1}else{for(l=1,s=0;s<A;s++)b=b<<1|l,M==p-1?(M=0,C.push(o(b)),b=0):M++,l=0;for(l=N.charCodeAt(0),s=0;s<16;s++)b=b<<1|l&1,M==p-1?(M=0,C.push(o(b)),b=0):M++,l=l>>1}O--,O==0&&(O=Math.pow(2,A),A++),delete g[N]}else for(l=c[N],s=0;s<A;s++)b=b<<1|l&1,M==p-1?(M=0,C.push(o(b)),b=0):M++,l=l>>1;O--,O==0&&(O=Math.pow(2,A),A++)}for(l=2,s=0;s<A;s++)b=b<<1|l&1,M==p-1?(M=0,C.push(o(b)),b=0):M++,l=l>>1;for(;;)if(b=b<<1,M==p-1){C.push(o(b));break}else M++;return C.join("")},decompress:function(u){return u==null?"":u==""?null:y._decompress(u.length,32768,function(p){return u.charCodeAt(p)})},_decompress:function(u,p,o){var s=[],l,c=4,g=4,_=3,D="",N=[],O,j,A,C,b,M,Z,L={val:o(0),position:p,index:1};for(O=0;O<3;O+=1)s[O]=O;for(A=0,b=Math.pow(2,2),M=1;M!=b;)C=L.val&L.position,L.position>>=1,L.position==0&&(L.position=p,L.val=o(L.index++)),A|=(C>0?1:0)*M,M<<=1;switch(l=A){case 0:for(A=0,b=Math.pow(2,8),M=1;M!=b;)C=L.val&L.position,L.position>>=1,L.position==0&&(L.position=p,L.val=o(L.index++)),A|=(C>0?1:0)*M,M<<=1;Z=r(A);break;case 1:for(A=0,b=Math.pow(2,16),M=1;M!=b;)C=L.val&L.position,L.position>>=1,L.position==0&&(L.position=p,L.val=o(L.index++)),A|=(C>0?1:0)*M,M<<=1;Z=r(A);break;case 2:return""}for(s[3]=Z,j=Z,N.push(Z);;){if(L.index>u)return"";for(A=0,b=Math.pow(2,_),M=1;M!=b;)C=L.val&L.position,L.position>>=1,L.position==0&&(L.position=p,L.val=o(L.index++)),A|=(C>0?1:0)*M,M<<=1;switch(Z=A){case 0:for(A=0,b=Math.pow(2,8),M=1;M!=b;)C=L.val&L.position,L.position>>=1,L.position==0&&(L.position=p,L.val=o(L.index++)),A|=(C>0?1:0)*M,M<<=1;s[g++]=r(A),Z=g-1,c--;break;case 1:for(A=0,b=Math.pow(2,16),M=1;M!=b;)C=L.val&L.position,L.position>>=1,L.position==0&&(L.position=p,L.val=o(L.index++)),A|=(C>0?1:0)*M,M<<=1;s[g++]=r(A),Z=g-1,c--;break;case 2:return N.join("")}if(c==0&&(c=Math.pow(2,_),_++),s[Z])D=s[Z];else if(Z===g)D=j+j.charAt(0);else return null;N.push(D),s[g++]=j+D.charAt(0),c--,j=D,c==0&&(c=Math.pow(2,_),_++)}}};return y}();typeof define=="function"&&define.amd?define(function(){return t}):typeof e<"u"&&e!=null?e.exports=t:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return t})}}),Fe=dt({"node_modules/crypt/crypt.js"(n,e){(function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(i,a){return i<<a|i>>>32-a},rotr:function(i,a){return i<<32-a|i>>>a},endian:function(i){if(i.constructor==Number)return r.rotl(i,8)&16711935|r.rotl(i,24)&4278255360;for(var a=0;a<i.length;a++)i[a]=r.endian(i[a]);return i},randomBytes:function(i){for(var a=[];i>0;i--)a.push(Math.floor(Math.random()*256));return a},bytesToWords:function(i){for(var a=[],f=0,m=0;f<i.length;f++,m+=8)a[m>>>5]|=i[f]<<24-m%32;return a},wordsToBytes:function(i){for(var a=[],f=0;f<i.length*32;f+=8)a.push(i[f>>>5]>>>24-f%32&255);return a},bytesToHex:function(i){for(var a=[],f=0;f<i.length;f++)a.push((i[f]>>>4).toString(16)),a.push((i[f]&15).toString(16));return a.join("")},hexToBytes:function(i){for(var a=[],f=0;f<i.length;f+=2)a.push(parseInt(i.substr(f,2),16));return a},bytesToBase64:function(i){for(var a=[],f=0;f<i.length;f+=3)for(var m=i[f]<<16|i[f+1]<<8|i[f+2],y=0;y<4;y++)f*8+y*6<=i.length*8?a.push(t.charAt(m>>>6*(3-y)&63)):a.push("=");return a.join("")},base64ToBytes:function(i){i=i.replace(/[^A-Z0-9+\/]/ig,"");for(var a=[],f=0,m=0;f<i.length;m=++f%4)m!=0&&a.push((t.indexOf(i.charAt(f-1))&Math.pow(2,-2*m+8)-1)<<m*2|t.indexOf(i.charAt(f))>>>6-m*2);return a}};e.exports=r})()}}),Ht=dt({"node_modules/charenc/charenc.js"(n,e){var t={utf8:{stringToBytes:function(r){return t.bin.stringToBytes(unescape(encodeURIComponent(r)))},bytesToString:function(r){return decodeURIComponent(escape(t.bin.bytesToString(r)))}},bin:{stringToBytes:function(r){for(var i=[],a=0;a<r.length;a++)i.push(r.charCodeAt(a)&255);return i},bytesToString:function(r){for(var i=[],a=0;a<r.length;a++)i.push(String.fromCharCode(r[a]));return i.join("")}}};e.exports=t}}),De=dt({"node_modules/is-buffer/index.js"(n,e){e.exports=function(i){return i!=null&&(t(i)||r(i)||!!i._isBuffer)};function t(i){return!!i.constructor&&typeof i.constructor.isBuffer=="function"&&i.constructor.isBuffer(i)}function r(i){return typeof i.readFloatLE=="function"&&typeof i.slice=="function"&&t(i.slice(0,0))}}}),Le=dt({"node_modules/md5/md5.js"(n,e){(function(){var t=Fe(),r=Ht().utf8,i=De(),a=Ht().bin,f=function(m,y){m.constructor==String?y&&y.encoding==="binary"?m=a.stringToBytes(m):m=r.stringToBytes(m):i(m)?m=Array.prototype.slice.call(m,0):!Array.isArray(m)&&m.constructor!==Uint8Array&&(m=m.toString());for(var u=t.bytesToWords(m),p=m.length*8,o=1732584193,s=-271733879,l=-1732584194,c=271733878,g=0;g<u.length;g++)u[g]=(u[g]<<8|u[g]>>>24)&16711935|(u[g]<<24|u[g]>>>8)&4278255360;u[p>>>5]|=128<<p%32,u[(p+64>>>9<<4)+14]=p;for(var _=f._ff,D=f._gg,N=f._hh,O=f._ii,g=0;g<u.length;g+=16){var j=o,A=s,C=l,b=c;o=_(o,s,l,c,u[g+0],7,-680876936),c=_(c,o,s,l,u[g+1],12,-389564586),l=_(l,c,o,s,u[g+2],17,606105819),s=_(s,l,c,o,u[g+3],22,-1044525330),o=_(o,s,l,c,u[g+4],7,-176418897),c=_(c,o,s,l,u[g+5],12,1200080426),l=_(l,c,o,s,u[g+6],17,-1473231341),s=_(s,l,c,o,u[g+7],22,-45705983),o=_(o,s,l,c,u[g+8],7,1770035416),c=_(c,o,s,l,u[g+9],12,-1958414417),l=_(l,c,o,s,u[g+10],17,-42063),s=_(s,l,c,o,u[g+11],22,-1990404162),o=_(o,s,l,c,u[g+12],7,1804603682),c=_(c,o,s,l,u[g+13],12,-40341101),l=_(l,c,o,s,u[g+14],17,-1502002290),s=_(s,l,c,o,u[g+15],22,1236535329),o=D(o,s,l,c,u[g+1],5,-165796510),c=D(c,o,s,l,u[g+6],9,-1069501632),l=D(l,c,o,s,u[g+11],14,643717713),s=D(s,l,c,o,u[g+0],20,-373897302),o=D(o,s,l,c,u[g+5],5,-701558691),c=D(c,o,s,l,u[g+10],9,38016083),l=D(l,c,o,s,u[g+15],14,-660478335),s=D(s,l,c,o,u[g+4],20,-405537848),o=D(o,s,l,c,u[g+9],5,568446438),c=D(c,o,s,l,u[g+14],9,-1019803690),l=D(l,c,o,s,u[g+3],14,-187363961),s=D(s,l,c,o,u[g+8],20,1163531501),o=D(o,s,l,c,u[g+13],5,-1444681467),c=D(c,o,s,l,u[g+2],9,-51403784),l=D(l,c,o,s,u[g+7],14,1735328473),s=D(s,l,c,o,u[g+12],20,-1926607734),o=N(o,s,l,c,u[g+5],4,-378558),c=N(c,o,s,l,u[g+8],11,-2022574463),l=N(l,c,o,s,u[g+11],16,1839030562),s=N(s,l,c,o,u[g+14],23,-35309556),o=N(o,s,l,c,u[g+1],4,-1530992060),c=N(c,o,s,l,u[g+4],11,1272893353),l=N(l,c,o,s,u[g+7],16,-155497632),s=N(s,l,c,o,u[g+10],23,-1094730640),o=N(o,s,l,c,u[g+13],4,681279174),c=N(c,o,s,l,u[g+0],11,-358537222),l=N(l,c,o,s,u[g+3],16,-722521979),s=N(s,l,c,o,u[g+6],23,76029189),o=N(o,s,l,c,u[g+9],4,-640364487),c=N(c,o,s,l,u[g+12],11,-421815835),l=N(l,c,o,s,u[g+15],16,530742520),s=N(s,l,c,o,u[g+2],23,-995338651),o=O(o,s,l,c,u[g+0],6,-198630844),c=O(c,o,s,l,u[g+7],10,1126891415),l=O(l,c,o,s,u[g+14],15,-1416354905),s=O(s,l,c,o,u[g+5],21,-57434055),o=O(o,s,l,c,u[g+12],6,1700485571),c=O(c,o,s,l,u[g+3],10,-1894986606),l=O(l,c,o,s,u[g+10],15,-1051523),s=O(s,l,c,o,u[g+1],21,-2054922799),o=O(o,s,l,c,u[g+8],6,1873313359),c=O(c,o,s,l,u[g+15],10,-30611744),l=O(l,c,o,s,u[g+6],15,-1560198380),s=O(s,l,c,o,u[g+13],21,1309151649),o=O(o,s,l,c,u[g+4],6,-145523070),c=O(c,o,s,l,u[g+11],10,-1120210379),l=O(l,c,o,s,u[g+2],15,718787259),s=O(s,l,c,o,u[g+9],21,-343485551),o=o+j>>>0,s=s+A>>>0,l=l+C>>>0,c=c+b>>>0}return t.endian([o,s,l,c])};f._ff=function(m,y,u,p,o,s,l){var c=m+(y&u|~y&p)+(o>>>0)+l;return(c<<s|c>>>32-s)+y},f._gg=function(m,y,u,p,o,s,l){var c=m+(y&p|u&~p)+(o>>>0)+l;return(c<<s|c>>>32-s)+y},f._hh=function(m,y,u,p,o,s,l){var c=m+(y^u^p)+(o>>>0)+l;return(c<<s|c>>>32-s)+y},f._ii=function(m,y,u,p,o,s,l){var c=m+(u^(y|~p))+(o>>>0)+l;return(c<<s|c>>>32-s)+y},f._blocksize=16,f._digestsize=16,e.exports=function(m,y){if(m==null)throw new Error("Illegal argument "+m);var u=t.wordsToBytes(f(m,y));return y&&y.asBytes?u:y&&y.asString?a.bytesToString(u):t.bytesToHex(u)}})()}}),Jt={};Ee(Jt,{eMath:()=>vr}),st.exports=Ce(Jt);var Cr=lt(vt()),Tr=lt(vt()),U;(function(n){n[n.PLAIN_TO_CLASS=0]="PLAIN_TO_CLASS",n[n.CLASS_TO_PLAIN=1]="CLASS_TO_PLAIN",n[n.CLASS_TO_CLASS=2]="CLASS_TO_CLASS"})(U||(U={}));var qe=function(){function n(){this._typeMetadatas=new Map,this._transformMetadatas=new Map,this._exposeMetadatas=new Map,this._excludeMetadatas=new Map,this._ancestorsMap=new Map}return n.prototype.addTypeMetadata=function(e){this._typeMetadatas.has(e.target)||this._typeMetadatas.set(e.target,new Map),this._typeMetadatas.get(e.target).set(e.propertyName,e)},n.prototype.addTransformMetadata=function(e){this._transformMetadatas.has(e.target)||this._transformMetadatas.set(e.target,new Map),this._transformMetadatas.get(e.target).has(e.propertyName)||this._transformMetadatas.get(e.target).set(e.propertyName,[]),this._transformMetadatas.get(e.target).get(e.propertyName).push(e)},n.prototype.addExposeMetadata=function(e){this._exposeMetadatas.has(e.target)||this._exposeMetadatas.set(e.target,new Map),this._exposeMetadatas.get(e.target).set(e.propertyName,e)},n.prototype.addExcludeMetadata=function(e){this._excludeMetadatas.has(e.target)||this._excludeMetadatas.set(e.target,new Map),this._excludeMetadatas.get(e.target).set(e.propertyName,e)},n.prototype.findTransformMetadatas=function(e,t,r){return this.findMetadatas(this._transformMetadatas,e,t).filter(function(i){return!i.options||i.options.toClassOnly===!0&&i.options.toPlainOnly===!0?!0:i.options.toClassOnly===!0?r===U.CLASS_TO_CLASS||r===U.PLAIN_TO_CLASS:i.options.toPlainOnly===!0?r===U.CLASS_TO_PLAIN:!0})},n.prototype.findExcludeMetadata=function(e,t){return this.findMetadata(this._excludeMetadatas,e,t)},n.prototype.findExposeMetadata=function(e,t){return this.findMetadata(this._exposeMetadatas,e,t)},n.prototype.findExposeMetadataByCustomName=function(e,t){return this.getExposedMetadatas(e).find(function(r){return r.options&&r.options.name===t})},n.prototype.findTypeMetadata=function(e,t){return this.findMetadata(this._typeMetadatas,e,t)},n.prototype.getStrategy=function(e){var t=this._excludeMetadatas.get(e),r=t&&t.get(void 0),i=this._exposeMetadatas.get(e),a=i&&i.get(void 0);return r&&a||!r&&!a?"none":r?"excludeAll":"exposeAll"},n.prototype.getExposedMetadatas=function(e){return this.getMetadata(this._exposeMetadatas,e)},n.prototype.getExcludedMetadatas=function(e){return this.getMetadata(this._excludeMetadatas,e)},n.prototype.getExposedProperties=function(e,t){return this.getExposedMetadatas(e).filter(function(r){return!r.options||r.options.toClassOnly===!0&&r.options.toPlainOnly===!0?!0:r.options.toClassOnly===!0?t===U.CLASS_TO_CLASS||t===U.PLAIN_TO_CLASS:r.options.toPlainOnly===!0?t===U.CLASS_TO_PLAIN:!0}).map(function(r){return r.propertyName})},n.prototype.getExcludedProperties=function(e,t){return this.getExcludedMetadatas(e).filter(function(r){return!r.options||r.options.toClassOnly===!0&&r.options.toPlainOnly===!0?!0:r.options.toClassOnly===!0?t===U.CLASS_TO_CLASS||t===U.PLAIN_TO_CLASS:r.options.toPlainOnly===!0?t===U.CLASS_TO_PLAIN:!0}).map(function(r){return r.propertyName})},n.prototype.clear=function(){this._typeMetadatas.clear(),this._exposeMetadatas.clear(),this._excludeMetadatas.clear(),this._ancestorsMap.clear()},n.prototype.getMetadata=function(e,t){var r=e.get(t),i;r&&(i=Array.from(r.values()).filter(function(o){return o.propertyName!==void 0}));for(var a=[],f=0,m=this.getAncestors(t);f<m.length;f++){var y=m[f],u=e.get(y);if(u){var p=Array.from(u.values()).filter(function(o){return o.propertyName!==void 0});a.push.apply(a,p)}}return a.concat(i||[])},n.prototype.findMetadata=function(e,t,r){var i=e.get(t);if(i){var a=i.get(r);if(a)return a}for(var f=0,m=this.getAncestors(t);f<m.length;f++){var y=m[f],u=e.get(y);if(u){var p=u.get(r);if(p)return p}}},n.prototype.findMetadatas=function(e,t,r){var i=e.get(t),a;i&&(a=i.get(r));for(var f=[],m=0,y=this.getAncestors(t);m<y.length;m++){var u=y[m],p=e.get(u);p&&p.has(r)&&f.push.apply(f,p.get(r))}return f.slice().reverse().concat((a||[]).slice().reverse())},n.prototype.getAncestors=function(e){if(!e)return[];if(!this._ancestorsMap.has(e)){for(var t=[],r=Object.getPrototypeOf(e.prototype.constructor);typeof r.prototype<"u";r=Object.getPrototypeOf(r.prototype.constructor))t.push(r);this._ancestorsMap.set(e,t)}return this._ancestorsMap.get(e)},n}(),V=new qe;function Pe(){if(typeof globalThis<"u")return globalThis;if(typeof global<"u")return global;if(typeof window<"u")return window;if(typeof self<"u")return self}function je(n){return n!==null&&typeof n=="object"&&typeof n.then=="function"}var Xt=function(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return n.concat(a||Array.prototype.slice.call(e))};function Re(n){var e=new n;return!(e instanceof Set)&&!("push"in e)?[]:e}var pt=function(){function n(e,t){this.transformationType=e,this.options=t,this.recursionStack=new Set}return n.prototype.transform=function(e,t,r,i,a,f){var m=this;if(f===void 0&&(f=0),Array.isArray(t)||t instanceof Set){var y=i&&this.transformationType===U.PLAIN_TO_CLASS?Re(i):[];return t.forEach(function(_,D){var N=e?e[D]:void 0;if(!m.options.enableCircularCheck||!m.isCircular(_)){var O=void 0;if(typeof r!="function"&&r&&r.options&&r.options.discriminator&&r.options.discriminator.property&&r.options.discriminator.subTypes){if(m.transformationType===U.PLAIN_TO_CLASS){O=r.options.discriminator.subTypes.find(function(b){return b.name===_[r.options.discriminator.property]});var j={newObject:y,object:_,property:void 0},A=r.typeFunction(j);O===void 0?O=A:O=O.value,r.options.keepDiscriminatorProperty||delete _[r.options.discriminator.property]}m.transformationType===U.CLASS_TO_CLASS&&(O=_.constructor),m.transformationType===U.CLASS_TO_PLAIN&&(_[r.options.discriminator.property]=r.options.discriminator.subTypes.find(function(b){return b.value===_.constructor}).name)}else O=r;var C=m.transform(N,_,O,void 0,_ instanceof Map,f+1);y instanceof Set?y.add(C):y.push(C)}else m.transformationType===U.CLASS_TO_CLASS&&(y instanceof Set?y.add(_):y.push(_))}),y}else{if(r===String&&!a)return t==null?t:String(t);if(r===Number&&!a)return t==null?t:Number(t);if(r===Boolean&&!a)return t==null?t:!!t;if((r===Date||t instanceof Date)&&!a)return t instanceof Date?new Date(t.valueOf()):t==null?t:new Date(t);if(Pe().Buffer&&(r===Buffer||t instanceof Buffer)&&!a)return t==null?t:Buffer.from(t);if(je(t)&&!a)return new Promise(function(_,D){t.then(function(N){return _(m.transform(void 0,N,r,void 0,void 0,f+1))},D)});if(!a&&t!==null&&typeof t=="object"&&typeof t.then=="function")return t;if(typeof t=="object"&&t!==null){!r&&t.constructor!==Object&&(!Array.isArray(t)&&t.constructor===Array||(r=t.constructor)),!r&&e&&(r=e.constructor),this.options.enableCircularCheck&&this.recursionStack.add(t);var u=this.getKeys(r,t,a),p=e||{};!e&&(this.transformationType===U.PLAIN_TO_CLASS||this.transformationType===U.CLASS_TO_CLASS)&&(a?p=new Map:r?p=new r:p={});for(var o=function(_){if(_==="__proto__"||_==="constructor")return"continue";var D=_,N=_,O=_;if(!s.options.ignoreDecorators&&r){if(s.transformationType===U.PLAIN_TO_CLASS){var j=V.findExposeMetadataByCustomName(r,_);j&&(O=j.propertyName,N=j.propertyName)}else if(s.transformationType===U.CLASS_TO_PLAIN||s.transformationType===U.CLASS_TO_CLASS){var j=V.findExposeMetadata(r,_);j&&j.options&&j.options.name&&(N=j.options.name)}}var A=void 0;s.transformationType===U.PLAIN_TO_CLASS?A=t[D]:t instanceof Map?A=t.get(D):t[D]instanceof Function?A=t[D]():A=t[D];var C=void 0,b=A instanceof Map;if(r&&a)C=r;else if(r){var M=V.findTypeMetadata(r,O);if(M){var Z={newObject:p,object:t,property:O},L=M.typeFunction?M.typeFunction(Z):M.reflectedType;M.options&&M.options.discriminator&&M.options.discriminator.property&&M.options.discriminator.subTypes?t[D]instanceof Array?C=M:(s.transformationType===U.PLAIN_TO_CLASS&&(C=M.options.discriminator.subTypes.find(function(tt){if(A&&A instanceof Object&&M.options.discriminator.property in A)return tt.name===A[M.options.discriminator.property]}),C===void 0?C=L:C=C.value,M.options.keepDiscriminatorProperty||A&&A instanceof Object&&M.options.discriminator.property in A&&delete A[M.options.discriminator.property]),s.transformationType===U.CLASS_TO_CLASS&&(C=A.constructor),s.transformationType===U.CLASS_TO_PLAIN&&A&&(A[M.options.discriminator.property]=M.options.discriminator.subTypes.find(function(tt){return tt.value===A.constructor}).name)):C=L,b=b||M.reflectedType===Map}else if(s.options.targetMaps)s.options.targetMaps.filter(function(tt){return tt.target===r&&!!tt.properties[O]}).forEach(function(tt){return C=tt.properties[O]});else if(s.options.enableImplicitConversion&&s.transformationType===U.PLAIN_TO_CLASS){var rt=Reflect.getMetadata("design:type",r.prototype,O);rt&&(C=rt)}}var nt=Array.isArray(t[D])?s.getReflectedType(r,O):void 0,it=e?e[D]:void 0;if(p.constructor.prototype){var K=Object.getOwnPropertyDescriptor(p.constructor.prototype,N);if((s.transformationType===U.PLAIN_TO_CLASS||s.transformationType===U.CLASS_TO_CLASS)&&(K&&!K.set||p[N]instanceof Function))return"continue"}if(!s.options.enableCircularCheck||!s.isCircular(A)){var Y=s.transformationType===U.PLAIN_TO_CLASS?N:_,R=void 0;s.transformationType===U.CLASS_TO_PLAIN?(R=t[Y],R=s.applyCustomTransformations(R,r,Y,t,s.transformationType),R=t[Y]===R?A:R,R=s.transform(it,R,C,nt,b,f+1)):A===void 0&&s.options.exposeDefaultValues?R=p[N]:(R=s.transform(it,A,C,nt,b,f+1),R=s.applyCustomTransformations(R,r,Y,t,s.transformationType)),(R!==void 0||s.options.exposeUnsetFields)&&(p instanceof Map?p.set(N,R):p[N]=R)}else if(s.transformationType===U.CLASS_TO_CLASS){var R=A;R=s.applyCustomTransformations(R,r,_,t,s.transformationType),(R!==void 0||s.options.exposeUnsetFields)&&(p instanceof Map?p.set(N,R):p[N]=R)}},s=this,l=0,c=u;l<c.length;l++){var g=c[l];o(g)}return this.options.enableCircularCheck&&this.recursionStack.delete(t),p}else return t}},n.prototype.applyCustomTransformations=function(e,t,r,i,a){var f=this,m=V.findTransformMetadatas(t,r,this.transformationType);return this.options.version!==void 0&&(m=m.filter(function(y){return y.options?f.checkVersion(y.options.since,y.options.until):!0})),this.options.groups&&this.options.groups.length?m=m.filter(function(y){return y.options?f.checkGroups(y.options.groups):!0}):m=m.filter(function(y){return!y.options||!y.options.groups||!y.options.groups.length}),m.forEach(function(y){e=y.transformFn({value:e,key:r,obj:i,type:a,options:f.options})}),e},n.prototype.isCircular=function(e){return this.recursionStack.has(e)},n.prototype.getReflectedType=function(e,t){if(e){var r=V.findTypeMetadata(e,t);return r?r.reflectedType:void 0}},n.prototype.getKeys=function(e,t,r){var i=this,a=V.getStrategy(e);a==="none"&&(a=this.options.strategy||"exposeAll");var f=[];if((a==="exposeAll"||r)&&(t instanceof Map?f=Array.from(t.keys()):f=Object.keys(t)),r)return f;if(this.options.ignoreDecorators&&this.options.excludeExtraneousValues&&e){var m=V.getExposedProperties(e,this.transformationType),y=V.getExcludedProperties(e,this.transformationType);f=Xt(Xt([],m,!0),y,!0)}if(!this.options.ignoreDecorators&&e){var m=V.getExposedProperties(e,this.transformationType);this.transformationType===U.PLAIN_TO_CLASS&&(m=m.map(function(o){var s=V.findExposeMetadata(e,o);return s&&s.options&&s.options.name?s.options.name:o})),this.options.excludeExtraneousValues?f=m:f=f.concat(m);var u=V.getExcludedProperties(e,this.transformationType);u.length>0&&(f=f.filter(function(o){return!u.includes(o)})),this.options.version!==void 0&&(f=f.filter(function(o){var s=V.findExposeMetadata(e,o);return!s||!s.options?!0:i.checkVersion(s.options.since,s.options.until)})),this.options.groups&&this.options.groups.length?f=f.filter(function(o){var s=V.findExposeMetadata(e,o);return!s||!s.options?!0:i.checkGroups(s.options.groups)}):f=f.filter(function(o){var s=V.findExposeMetadata(e,o);return!s||!s.options||!s.options.groups||!s.options.groups.length})}return this.options.excludePrefixes&&this.options.excludePrefixes.length&&(f=f.filter(function(p){return i.options.excludePrefixes.every(function(o){return p.substr(0,o.length)!==o})})),f=f.filter(function(p,o,s){return s.indexOf(p)===o}),f},n.prototype.checkVersion=function(e,t){var r=!0;return r&&e&&(r=this.options.version>=e),r&&t&&(r=this.options.version<t),r},n.prototype.checkGroups=function(e){return e?this.options.groups.some(function(t){return e.includes(t)}):!0},n}(),yt={enableCircularCheck:!1,enableImplicitConversion:!1,excludeExtraneousValues:!1,excludePrefixes:void 0,exposeDefaultValues:!1,exposeUnsetFields:!0,groups:void 0,ignoreDecorators:!1,strategy:void 0,targetMaps:void 0,version:void 0},Q=function(){return Q=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Q.apply(this,arguments)},Ue=function(){function n(){}return n.prototype.instanceToPlain=function(e,t){var r=new pt(U.CLASS_TO_PLAIN,Q(Q({},yt),t));return r.transform(void 0,e,void 0,void 0,void 0,void 0)},n.prototype.classToPlainFromExist=function(e,t,r){var i=new pt(U.CLASS_TO_PLAIN,Q(Q({},yt),r));return i.transform(t,e,void 0,void 0,void 0,void 0)},n.prototype.plainToInstance=function(e,t,r){var i=new pt(U.PLAIN_TO_CLASS,Q(Q({},yt),r));return i.transform(void 0,t,e,void 0,void 0,void 0)},n.prototype.plainToClassFromExist=function(e,t,r){var i=new pt(U.PLAIN_TO_CLASS,Q(Q({},yt),r));return i.transform(e,t,void 0,void 0,void 0,void 0)},n.prototype.instanceToInstance=function(e,t){var r=new pt(U.CLASS_TO_CLASS,Q(Q({},yt),t));return r.transform(void 0,e,void 0,void 0,void 0,void 0)},n.prototype.classToClassFromExist=function(e,t,r){var i=new pt(U.CLASS_TO_CLASS,Q(Q({},yt),r));return i.transform(t,e,void 0,void 0,void 0,void 0)},n.prototype.serialize=function(e,t){return JSON.stringify(this.instanceToPlain(e,t))},n.prototype.deserialize=function(e,t,r){var i=JSON.parse(t);return this.plainToInstance(e,i,r)},n.prototype.deserializeArray=function(e,t,r){var i=JSON.parse(t);return this.plainToInstance(e,i,r)},n}();function ze(n){return n===void 0&&(n={}),function(e,t){V.addExposeMetadata({target:e instanceof Function?e:e.constructor,propertyName:t,options:n})}}function Tt(n,e){return e===void 0&&(e={}),function(t,r){var i=Reflect.getMetadata("design:type",t,r);V.addTypeMetadata({target:t.constructor,propertyName:r,reflectedType:i,typeFunction:n,options:e})}}var Vt=new Ue;function Dt(n,e){return Vt.instanceToPlain(n,e)}function Qt(n,e,t){return Vt.plainToInstance(n,e,t)}function Lt(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Kt(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function qt(n,e,t){return e&&Kt(n.prototype,e),t&&Kt(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}var Ge=function(){function n(e){Lt(this,n),this.map=new Map,this.first=void 0,this.last=void 0,this.maxSize=e}return qt(n,[{key:"size",get:function(){return this.map.size}},{key:"get",value:function(t){var r=this.map.get(t);if(r!==void 0)return r!==this.first&&(r===this.last?(this.last=r.prev,this.last.next=void 0):(r.prev.next=r.next,r.next.prev=r.prev),r.next=this.first,this.first.prev=r,this.first=r),r.value}},{key:"set",value:function(t,r){if(!(this.maxSize<1)){if(this.map.has(t))throw new Error("Cannot update existing keys in the cache");var i=new Be(t,r);for(this.first===void 0?(this.first=i,this.last=i):(i.next=this.first,this.first.prev=i,this.first=i),this.map.set(t,i);this.map.size>this.maxSize;){var a=this.last;this.map.delete(a.key),this.last=a.prev,this.last.next=void 0}}}}]),n}(),Be=qt(function n(e,t){Lt(this,n),this.next=void 0,this.prev=void 0,this.key=e,this.value=t}),Pt=17,Ye=9e15,Ze=Math.log10(9e15),We=1/9e15,$e=308,He=-324,te=5,Je=1023,Xe=function(){for(var n=[],e=He+1;e<=$e;e++)n.push(+("1e"+e));var t=323;return function(r){return n[r+t]}}(),mt=[2,Math.E,3,4,5,6,7,8,9,10],Ve=[[1,1.0891180521811203,1.1789767925673957,1.2701455431742086,1.3632090180450092,1.4587818160364217,1.5575237916251419,1.6601571006859253,1.767485818836978,1.8804192098842727,2],[1,1.1121114330934079,1.231038924931609,1.3583836963111375,1.4960519303993531,1.6463542337511945,1.8121385357018724,1.996971324618307,2.2053895545527546,2.4432574483385254,Math.E],[1,1.1187738849693603,1.2464963939368214,1.38527004705667,1.5376664685821402,1.7068895236551784,1.897001227148399,2.1132403089001035,2.362480153784171,2.6539010333870774,3],[1,1.1367350847096405,1.2889510672956703,1.4606478703324786,1.6570295196661111,1.8850062585672889,2.1539465047453485,2.476829779693097,2.872061932789197,3.3664204535587183,4],[1,1.1494592900767588,1.319708228183931,1.5166291280087583,1.748171114438024,2.0253263297298045,2.3636668498288547,2.7858359149579424,3.3257226212448145,4.035730287722532,5],[1,1.159225940787673,1.343712473580932,1.5611293155111927,1.8221199554561318,2.14183924486326,2.542468319282638,3.0574682501653316,3.7390572020926873,4.6719550537360774,6],[1,1.1670905356972596,1.3632807444991446,1.5979222279405536,1.8842640123816674,2.2416069644878687,2.69893426559423,3.3012632110403577,4.121250340630164,5.281493033448316,7],[1,1.1736630594087796,1.379783782386201,1.6292821855668218,1.9378971836180754,2.3289975651071977,2.8384347394720835,3.5232708454565906,4.478242031114584,5.868592169644505,8],[1,1.1793017514670474,1.394054150657457,1.65664127441059,1.985170999970283,2.4069682290577457,2.9647310119960752,3.7278665320924946,4.814462547283592,6.436522247411611,9],[1,1.1840100246247336,1.4061375836156955,1.6802272208863964,2.026757028388619,2.4770056063449646,3.080525271755482,3.9191964192627284,5.135152840833187,6.989961179534715,10]],Qe=[[-1,-.9194161097107025,-.8335625019330468,-.7425599821143978,-.6466611521029437,-.5462617907227869,-.4419033816638769,-.3342645487554494,-.224140440909962,-.11241087890006762,0],[-1,-.90603157029014,-.80786507256596,-.7064666939634,-.60294836853664,-.49849837513117,-.39430303318768,-.29147201034755,-.19097820800866,-.09361896280296,0],[-1,-.9021579584316141,-.8005762598234203,-.6964780623319391,-.5911906810998454,-.486050182576545,-.3823089430815083,-.28106046722897615,-.1831906535795894,-.08935809204418144,0],[-1,-.8917227442365535,-.781258746326964,-.6705130326902455,-.5612813129406509,-.4551067709033134,-.35319256652135966,-.2563741554088552,-.1651412821106526,-.0796919581982668,0],[-1,-.8843387974366064,-.7678744063886243,-.6529563724510552,-.5415870994657841,-.4352842206588936,-.33504449124791424,-.24138853420685147,-.15445285440944467,-.07409659641336663,0],[-1,-.8786709358426346,-.7577735191184886,-.6399546189952064,-.527284921869926,-.4211627631006314,-.3223479611761232,-.23107655627789858,-.1472057700818259,-.07035171210706326,0],[-1,-.8740862815291583,-.7497032990976209,-.6297119746181752,-.5161838335958787,-.41036238255751956,-.31277212146489963,-.2233976621705518,-.1418697367979619,-.06762117662323441,0],[-1,-.8702632331800649,-.7430366914122081,-.6213373075161548,-.5072025698095242,-.40171437727184167,-.30517930701410456,-.21736343968190863,-.137710238299109,-.06550774483471955,0],[-1,-.8670016295947213,-.7373984232432306,-.6143173985094293,-.49973884395492807,-.394584953527678,-.2989649949848695,-.21245647317021688,-.13434688362382652,-.0638072667348083,0],[-1,-.8641642839543857,-.732534623168535,-.6083127477059322,-.4934049257184696,-.3885773075899922,-.29376029055315767,-.2083678561173622,-.13155653399373268,-.062401588652553186,0]],v=function(e){return k.fromValue_noAlloc(e)},T=function(e,t,r){return k.fromComponents(e,t,r)},G=function(e,t,r){return k.fromComponents_noNormalize(e,t,r)},ct=function(e,t){var r=t+1,i=Math.ceil(Math.log10(Math.abs(e))),a=Math.round(e*Math.pow(10,r-i))*Math.pow(10,i-r);return parseFloat(a.toFixed(Math.max(r-i,0)))},jt=function(e){return Math.sign(e)*Math.log10(Math.abs(e))},Ke=function(e){if(!isFinite(e))return e;if(e<-50)return e===Math.trunc(e)?Number.NEGATIVE_INFINITY:0;for(var t=1;e<10;)t=t*e,++e;e-=1;var r=.9189385332046727;r=r+(e+.5)*Math.log(e),r=r-e;var i=e*e,a=e;return r=r+1/(12*a),a=a*i,r=r+1/(360*a),a=a*i,r=r+1/(1260*a),a=a*i,r=r+1/(1680*a),a=a*i,r=r+1/(1188*a),a=a*i,r=r+691/(360360*a),a=a*i,r=r+7/(1092*a),a=a*i,r=r+3617/(122400*a),Math.exp(r)/t},tr=.36787944117144233,ee=.5671432904097838,re=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e-10,r,i;if(!Number.isFinite(e)||e===0)return e;if(e===1)return ee;e<10?r=0:r=Math.log(e)-Math.log(Math.log(e));for(var a=0;a<100;++a){if(i=(e*Math.exp(-r)+r*r)/(r+1),Math.abs(i-r)<t*Math.abs(i))return i;r=i}throw Error("Iteration failed to converge: ".concat(e.toString()))};function ne(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e-10,t,r,i,a;if(!Number.isFinite(n.mag)||n.eq(k.dZero))return n;if(n.eq(k.dOne))return k.fromNumber(ee);t=k.ln(n);for(var f=0;f<100;++f){if(r=t.neg().exp(),i=t.sub(n.mul(r)),a=t.sub(i.div(t.add(1).sub(t.add(2).mul(i).div(k.mul(2,t).add(2))))),k.abs(a.sub(t)).lt(k.abs(a).mul(e)))return a;t=a}throw Error("Iteration failed to converge: ".concat(n.toString()))}var k=function(){function n(e){Lt(this,n),this.sign=0,this.mag=0,this.layer=0,e instanceof n?this.fromDecimal(e):typeof e=="number"?this.fromNumber(e):typeof e=="string"&&this.fromString(e)}return qt(n,[{key:"m",get:function(){if(this.sign===0)return 0;if(this.layer===0){var t=Math.floor(Math.log10(this.mag)),r;return this.mag===5e-324?r=5:r=this.mag/Xe(t),this.sign*r}else if(this.layer===1){var i=this.mag-Math.floor(this.mag);return this.sign*Math.pow(10,i)}else return this.sign},set:function(t){this.layer<=2?this.fromMantissaExponent(t,this.e):(this.sign=Math.sign(t),this.sign===0&&(this.layer=0,this.exponent=0))}},{key:"e",get:function(){return this.sign===0?0:this.layer===0?Math.floor(Math.log10(this.mag)):this.layer===1?Math.floor(this.mag):this.layer===2?Math.floor(Math.sign(this.mag)*Math.pow(10,Math.abs(this.mag))):this.mag*Number.POSITIVE_INFINITY},set:function(t){this.fromMantissaExponent(this.m,t)}},{key:"s",get:function(){return this.sign},set:function(t){t===0?(this.sign=0,this.layer=0,this.mag=0):this.sign=t}},{key:"mantissa",get:function(){return this.m},set:function(t){this.m=t}},{key:"exponent",get:function(){return this.e},set:function(t){this.e=t}},{key:"normalize",value:function(){if(this.sign===0||this.mag===0&&this.layer===0||this.mag===Number.NEGATIVE_INFINITY&&this.layer>0&&Number.isFinite(this.layer))return this.sign=0,this.mag=0,this.layer=0,this;if(this.layer===0&&this.mag<0&&(this.mag=-this.mag,this.sign=-this.sign),this.mag===Number.POSITIVE_INFINITY||this.layer===Number.POSITIVE_INFINITY||this.mag===Number.NEGATIVE_INFINITY||this.layer===Number.NEGATIVE_INFINITY)return this.sign==1?(this.mag=Number.POSITIVE_INFINITY,this.layer=Number.POSITIVE_INFINITY):this.sign==-1&&(this.mag=Number.NEGATIVE_INFINITY,this.layer=Number.NEGATIVE_INFINITY),this;if(this.layer===0&&this.mag<We)return this.layer+=1,this.mag=Math.log10(this.mag),this;var t=Math.abs(this.mag),r=Math.sign(this.mag);if(t>=Ye)return this.layer+=1,this.mag=r*Math.log10(t),this;for(;t<Ze&&this.layer>0;)this.layer-=1,this.layer===0?this.mag=Math.pow(10,this.mag):(this.mag=r*Math.pow(10,t),t=Math.abs(this.mag),r=Math.sign(this.mag));return this.layer===0&&(this.mag<0?(this.mag=-this.mag,this.sign=-this.sign):this.mag===0&&(this.sign=0)),(Number.isNaN(this.sign)||Number.isNaN(this.layer)||Number.isNaN(this.mag))&&(this.sign=Number.NaN,this.layer=Number.NaN,this.mag=Number.NaN),this}},{key:"fromComponents",value:function(t,r,i){return this.sign=t,this.layer=r,this.mag=i,this.normalize(),this}},{key:"fromComponents_noNormalize",value:function(t,r,i){return this.sign=t,this.layer=r,this.mag=i,this}},{key:"fromMantissaExponent",value:function(t,r){return this.layer=1,this.sign=Math.sign(t),t=Math.abs(t),this.mag=r+Math.log10(t),this.normalize(),this}},{key:"fromMantissaExponent_noNormalize",value:function(t,r){return this.fromMantissaExponent(t,r),this}},{key:"fromDecimal",value:function(t){return this.sign=t.sign,this.layer=t.layer,this.mag=t.mag,this}},{key:"fromNumber",value:function(t){return this.mag=Math.abs(t),this.sign=Math.sign(t),this.layer=0,this.normalize(),this}},{key:"fromString",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=t,a=n.fromStringCache.get(i);if(a!==void 0)return this.fromDecimal(a);t=t.replace(",","");var f=t.split("^^^");if(f.length===2){var m=parseFloat(f[0]),y=parseFloat(f[1]),u=f[1].split(";"),p=1;if(u.length===2&&(p=parseFloat(u[1]),isFinite(p)||(p=1)),isFinite(m)&&isFinite(y)){var o=n.pentate(m,y,p,r);return this.sign=o.sign,this.layer=o.layer,this.mag=o.mag,n.fromStringCache.maxSize>=1&&n.fromStringCache.set(i,n.fromDecimal(this)),this}}var s=t.split("^^");if(s.length===2){var l=parseFloat(s[0]),c=parseFloat(s[1]),g=s[1].split(";"),_=1;if(g.length===2&&(_=parseFloat(g[1]),isFinite(_)||(_=1)),isFinite(l)&&isFinite(c)){var D=n.tetrate(l,c,_,r);return this.sign=D.sign,this.layer=D.layer,this.mag=D.mag,n.fromStringCache.maxSize>=1&&n.fromStringCache.set(i,n.fromDecimal(this)),this}}var N=t.split("^");if(N.length===2){var O=parseFloat(N[0]),j=parseFloat(N[1]);if(isFinite(O)&&isFinite(j)){var A=n.pow(O,j);return this.sign=A.sign,this.layer=A.layer,this.mag=A.mag,n.fromStringCache.maxSize>=1&&n.fromStringCache.set(i,n.fromDecimal(this)),this}}t=t.trim().toLowerCase();var C,b,M=t.split("pt");if(M.length===2){C=10,b=parseFloat(M[0]),M[1]=M[1].replace("(",""),M[1]=M[1].replace(")","");var Z=parseFloat(M[1]);if(isFinite(Z)||(Z=1),isFinite(C)&&isFinite(b)){var L=n.tetrate(C,b,Z,r);return this.sign=L.sign,this.layer=L.layer,this.mag=L.mag,n.fromStringCache.maxSize>=1&&n.fromStringCache.set(i,n.fromDecimal(this)),this}}if(M=t.split("p"),M.length===2){C=10,b=parseFloat(M[0]),M[1]=M[1].replace("(",""),M[1]=M[1].replace(")","");var rt=parseFloat(M[1]);if(isFinite(rt)||(rt=1),isFinite(C)&&isFinite(b)){var nt=n.tetrate(C,b,rt,r);return this.sign=nt.sign,this.layer=nt.layer,this.mag=nt.mag,n.fromStringCache.maxSize>=1&&n.fromStringCache.set(i,n.fromDecimal(this)),this}}if(M=t.split("f"),M.length===2){C=10,M[0]=M[0].replace("(",""),M[0]=M[0].replace(")","");var it=parseFloat(M[0]);if(M[1]=M[1].replace("(",""),M[1]=M[1].replace(")",""),b=parseFloat(M[1]),isFinite(it)||(it=1),isFinite(C)&&isFinite(b)){var K=n.tetrate(C,b,it,r);return this.sign=K.sign,this.layer=K.layer,this.mag=K.mag,n.fromStringCache.maxSize>=1&&n.fromStringCache.set(i,n.fromDecimal(this)),this}}var Y=t.split("e"),R=Y.length-1;if(R===0){var tt=parseFloat(t);if(isFinite(tt))return this.fromNumber(tt),n.fromStringCache.size>=1&&n.fromStringCache.set(i,n.fromDecimal(this)),this}else if(R===1){var wt=parseFloat(t);if(isFinite(wt)&&wt!==0)return this.fromNumber(wt),n.fromStringCache.maxSize>=1&&n.fromStringCache.set(i,n.fromDecimal(this)),this}var ut=t.split("e^");if(ut.length===2){this.sign=1,ut[0].charAt(0)=="-"&&(this.sign=-1);for(var xt="",ht=0;ht<ut[1].length;++ht){var bt=ut[1].charCodeAt(ht);if(bt>=43&&bt<=57||bt===101)xt+=ut[1].charAt(ht);else return this.layer=parseFloat(xt),this.mag=parseFloat(ut[1].substr(ht+1)),this.normalize(),n.fromStringCache.maxSize>=1&&n.fromStringCache.set(i,n.fromDecimal(this)),this}}if(R<1)return this.sign=0,this.layer=0,this.mag=0,n.fromStringCache.maxSize>=1&&n.fromStringCache.set(i,n.fromDecimal(this)),this;var P=parseFloat(Y[0]);if(P===0)return this.sign=0,this.layer=0,this.mag=0,n.fromStringCache.maxSize>=1&&n.fromStringCache.set(i,n.fromDecimal(this)),this;var et=parseFloat(Y[Y.length-1]);if(R>=2){var Ot=parseFloat(Y[Y.length-2]);isFinite(Ot)&&(et*=Math.sign(Ot),et+=jt(Ot))}if(!isFinite(P))this.sign=Y[0]==="-"?-1:1,this.layer=R,this.mag=et;else if(R===1)this.sign=Math.sign(P),this.layer=1,this.mag=et+Math.log10(Math.abs(P));else if(this.sign=Math.sign(P),this.layer=R,R===2){var W=n.mul(T(1,2,et),v(P));return this.sign=W.sign,this.layer=W.layer,this.mag=W.mag,n.fromStringCache.maxSize>=1&&n.fromStringCache.set(i,n.fromDecimal(this)),this}else this.mag=et;return this.normalize(),n.fromStringCache.maxSize>=1&&n.fromStringCache.set(i,n.fromDecimal(this)),this}},{key:"fromValue",value:function(t){return t instanceof n?this.fromDecimal(t):typeof t=="number"?this.fromNumber(t):typeof t=="string"?this.fromString(t):(this.sign=0,this.layer=0,this.mag=0,this)}},{key:"toNumber",value:function(){return this.mag===Number.POSITIVE_INFINITY&&this.layer===Number.POSITIVE_INFINITY&&this.sign===1?Number.POSITIVE_INFINITY:this.mag===Number.NEGATIVE_INFINITY&&this.layer===Number.NEGATIVE_INFINITY&&this.sign===-1?Number.NEGATIVE_INFINITY:Number.isFinite(this.layer)?this.layer===0?this.sign*this.mag:this.layer===1?this.sign*Math.pow(10,this.mag):this.mag>0?this.sign>0?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:0:Number.NaN}},{key:"mantissaWithDecimalPlaces",value:function(t){return isNaN(this.m)?Number.NaN:this.m===0?0:ct(this.m,t)}},{key:"magnitudeWithDecimalPlaces",value:function(t){return isNaN(this.mag)?Number.NaN:this.mag===0?0:ct(this.mag,t)}},{key:"toString",value:function(){return isNaN(this.layer)||isNaN(this.sign)||isNaN(this.mag)?"NaN":this.mag===Number.POSITIVE_INFINITY||this.layer===Number.POSITIVE_INFINITY||this.mag===Number.NEGATIVE_INFINITY||this.layer===Number.NEGATIVE_INFINITY?this.sign===1?"Infinity":"-Infinity":this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toString():this.m+"e"+this.e:this.layer===1?this.m+"e"+this.e:this.layer<=te?(this.sign===-1?"-":"")+"e".repeat(this.layer)+this.mag:(this.sign===-1?"-":"")+"(e^"+this.layer+")"+this.mag}},{key:"toExponential",value:function(t){return this.layer===0?(this.sign*this.mag).toExponential(t):this.toStringWithDecimalPlaces(t)}},{key:"toFixed",value:function(t){return this.layer===0?(this.sign*this.mag).toFixed(t):this.toStringWithDecimalPlaces(t)}},{key:"toPrecision",value:function(t){return this.e<=-7?this.toExponential(t-1):t>this.e?this.toFixed(t-this.exponent-1):this.toExponential(t-1)}},{key:"valueOf",value:function(){return this.toString()}},{key:"toJSON",value:function(){return this.toString()}},{key:"toStringWithDecimalPlaces",value:function(t){return this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toFixed(t):ct(this.m,t)+"e"+ct(this.e,t):this.layer===1?ct(this.m,t)+"e"+ct(this.e,t):this.layer<=te?(this.sign===-1?"-":"")+"e".repeat(this.layer)+ct(this.mag,t):(this.sign===-1?"-":"")+"(e^"+this.layer+")"+ct(this.mag,t)}},{key:"abs",value:function(){return G(this.sign===0?0:1,this.layer,this.mag)}},{key:"neg",value:function(){return G(-this.sign,this.layer,this.mag)}},{key:"negate",value:function(){return this.neg()}},{key:"negated",value:function(){return this.neg()}},{key:"sgn",value:function(){return this.sign}},{key:"round",value:function(){return this.mag<0?n.dZero:this.layer===0?T(this.sign,0,Math.round(this.mag)):this}},{key:"floor",value:function(){return this.mag<0?this.sign===-1?n.dNegOne:n.dZero:this.sign===-1?this.neg().ceil().neg():this.layer===0?T(this.sign,0,Math.floor(this.mag)):this}},{key:"ceil",value:function(){return this.mag<0?this.sign===1?n.dOne:n.dZero:this.sign===-1?this.neg().floor().neg():this.layer===0?T(this.sign,0,Math.ceil(this.mag)):this}},{key:"trunc",value:function(){return this.mag<0?n.dZero:this.layer===0?T(this.sign,0,Math.trunc(this.mag)):this}},{key:"add",value:function(t){var r=v(t);if(!Number.isFinite(this.layer))return this;if(!Number.isFinite(r.layer)||this.sign===0)return r;if(r.sign===0)return this;if(this.sign===-r.sign&&this.layer===r.layer&&this.mag===r.mag)return G(0,0,0);var i,a;if(this.layer>=2||r.layer>=2)return this.maxabs(r);if(n.cmpabs(this,r)>0?(i=this,a=r):(i=r,a=this),i.layer===0&&a.layer===0)return n.fromNumber(i.sign*i.mag+a.sign*a.mag);var f=i.layer*Math.sign(i.mag),m=a.layer*Math.sign(a.mag);if(f-m>=2)return i;if(f===0&&m===-1){if(Math.abs(a.mag-Math.log10(i.mag))>Pt)return i;var y=Math.pow(10,Math.log10(i.mag)-a.mag),u=a.sign+i.sign*y;return T(Math.sign(u),1,a.mag+Math.log10(Math.abs(u)))}if(f===1&&m===0){if(Math.abs(i.mag-Math.log10(a.mag))>Pt)return i;var p=Math.pow(10,i.mag-Math.log10(a.mag)),o=a.sign+i.sign*p;return T(Math.sign(o),1,Math.log10(a.mag)+Math.log10(Math.abs(o)))}if(Math.abs(i.mag-a.mag)>Pt)return i;var s=Math.pow(10,i.mag-a.mag),l=a.sign+i.sign*s;return T(Math.sign(l),1,a.mag+Math.log10(Math.abs(l)))}},{key:"plus",value:function(t){return this.add(t)}},{key:"sub",value:function(t){return this.add(v(t).neg())}},{key:"subtract",value:function(t){return this.sub(t)}},{key:"minus",value:function(t){return this.sub(t)}},{key:"mul",value:function(t){var r=v(t);if(!Number.isFinite(this.layer))return this;if(!Number.isFinite(r.layer))return r;if(this.sign===0||r.sign===0)return G(0,0,0);if(this.layer===r.layer&&this.mag===-r.mag)return G(this.sign*r.sign,0,1);var i,a;if(this.layer>r.layer||this.layer==r.layer&&Math.abs(this.mag)>Math.abs(r.mag)?(i=this,a=r):(i=r,a=this),i.layer===0&&a.layer===0)return n.fromNumber(i.sign*a.sign*i.mag*a.mag);if(i.layer>=3||i.layer-a.layer>=2)return T(i.sign*a.sign,i.layer,i.mag);if(i.layer===1&&a.layer===0)return T(i.sign*a.sign,1,i.mag+Math.log10(a.mag));if(i.layer===1&&a.layer===1)return T(i.sign*a.sign,1,i.mag+a.mag);if(i.layer===2&&a.layer===1){var f=T(Math.sign(i.mag),i.layer-1,Math.abs(i.mag)).add(T(Math.sign(a.mag),a.layer-1,Math.abs(a.mag)));return T(i.sign*a.sign,f.layer+1,f.sign*f.mag)}if(i.layer===2&&a.layer===2){var m=T(Math.sign(i.mag),i.layer-1,Math.abs(i.mag)).add(T(Math.sign(a.mag),a.layer-1,Math.abs(a.mag)));return T(i.sign*a.sign,m.layer+1,m.sign*m.mag)}throw Error("Bad arguments to mul: "+this+", "+t)}},{key:"multiply",value:function(t){return this.mul(t)}},{key:"times",value:function(t){return this.mul(t)}},{key:"div",value:function(t){var r=v(t);return this.mul(r.recip())}},{key:"divide",value:function(t){return this.div(t)}},{key:"divideBy",value:function(t){return this.div(t)}},{key:"dividedBy",value:function(t){return this.div(t)}},{key:"recip",value:function(){return this.mag===0?n.dNaN:this.layer===0?T(this.sign,0,1/this.mag):T(this.sign,this.layer,-this.mag)}},{key:"reciprocal",value:function(){return this.recip()}},{key:"reciprocate",value:function(){return this.recip()}},{key:"mod",value:function(t){var r=v(t).abs();if(r.eq(n.dZero))return n.dZero;var i=this.toNumber(),a=r.toNumber();return isFinite(i)&&isFinite(a)&&i!=0&&a!=0?new n(i%a):this.sub(r).eq(this)?n.dZero:r.sub(this).eq(r)?this:this.sign==-1?this.abs().mod(r).neg():this.sub(this.div(r).floor().mul(r))}},{key:"modulo",value:function(t){return this.mod(t)}},{key:"modular",value:function(t){return this.mod(t)}},{key:"cmp",value:function(t){var r=v(t);return this.sign>r.sign?1:this.sign<r.sign?-1:this.sign*this.cmpabs(t)}},{key:"cmpabs",value:function(t){var r=v(t),i=this.mag>0?this.layer:-this.layer,a=r.mag>0?r.layer:-r.layer;return i>a?1:i<a?-1:this.mag>r.mag?1:this.mag<r.mag?-1:0}},{key:"compare",value:function(t){return this.cmp(t)}},{key:"isNan",value:function(){return isNaN(this.sign)||isNaN(this.layer)||isNaN(this.mag)}},{key:"isFinite",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return isFinite(this.sign)&&isFinite(this.layer)&&isFinite(this.mag)})},{key:"eq",value:function(t){var r=v(t);return this.sign===r.sign&&this.layer===r.layer&&this.mag===r.mag}},{key:"equals",value:function(t){return this.eq(t)}},{key:"neq",value:function(t){return!this.eq(t)}},{key:"notEquals",value:function(t){return this.neq(t)}},{key:"lt",value:function(t){return this.cmp(t)===-1}},{key:"lte",value:function(t){return!this.gt(t)}},{key:"gt",value:function(t){return this.cmp(t)===1}},{key:"gte",value:function(t){return!this.lt(t)}},{key:"max",value:function(t){var r=v(t);return this.lt(r)?r:this}},{key:"min",value:function(t){var r=v(t);return this.gt(r)?r:this}},{key:"maxabs",value:function(t){var r=v(t);return this.cmpabs(r)<0?r:this}},{key:"minabs",value:function(t){var r=v(t);return this.cmpabs(r)>0?r:this}},{key:"clamp",value:function(t,r){return this.max(t).min(r)}},{key:"clampMin",value:function(t){return this.max(t)}},{key:"clampMax",value:function(t){return this.min(t)}},{key:"cmp_tolerance",value:function(t,r){var i=v(t);return this.eq_tolerance(i,r)?0:this.cmp(i)}},{key:"compare_tolerance",value:function(t,r){return this.cmp_tolerance(t,r)}},{key:"eq_tolerance",value:function(t,r){var i=v(t);if(r==null&&(r=1e-7),this.sign!==i.sign||Math.abs(this.layer-i.layer)>1)return!1;var a=this.mag,f=i.mag;return this.layer>i.layer&&(f=jt(f)),this.layer<i.layer&&(a=jt(a)),Math.abs(a-f)<=r*Math.max(Math.abs(a),Math.abs(f))}},{key:"equals_tolerance",value:function(t,r){return this.eq_tolerance(t,r)}},{key:"neq_tolerance",value:function(t,r){return!this.eq_tolerance(t,r)}},{key:"notEquals_tolerance",value:function(t,r){return this.neq_tolerance(t,r)}},{key:"lt_tolerance",value:function(t,r){var i=v(t);return!this.eq_tolerance(i,r)&&this.lt(i)}},{key:"lte_tolerance",value:function(t,r){var i=v(t);return this.eq_tolerance(i,r)||this.lt(i)}},{key:"gt_tolerance",value:function(t,r){var i=v(t);return!this.eq_tolerance(i,r)&&this.gt(i)}},{key:"gte_tolerance",value:function(t,r){var i=v(t);return this.eq_tolerance(i,r)||this.gt(i)}},{key:"pLog10",value:function(){return this.lt(n.dZero)?n.dZero:this.log10()}},{key:"absLog10",value:function(){return this.sign===0?n.dNaN:this.layer>0?T(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):T(1,0,Math.log10(this.mag))}},{key:"log10",value:function(){return this.sign<=0?n.dNaN:this.layer>0?T(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):T(this.sign,0,Math.log10(this.mag))}},{key:"log",value:function(t){return t=v(t),this.sign<=0||t.sign<=0||t.sign===1&&t.layer===0&&t.mag===1?n.dNaN:this.layer===0&&t.layer===0?T(this.sign,0,Math.log(this.mag)/Math.log(t.mag)):n.div(this.log10(),t.log10())}},{key:"log2",value:function(){return this.sign<=0?n.dNaN:this.layer===0?T(this.sign,0,Math.log2(this.mag)):this.layer===1?T(Math.sign(this.mag),0,Math.abs(this.mag)*3.321928094887362):this.layer===2?T(Math.sign(this.mag),1,Math.abs(this.mag)+.5213902276543247):T(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}},{key:"ln",value:function(){return this.sign<=0?n.dNaN:this.layer===0?T(this.sign,0,Math.log(this.mag)):this.layer===1?T(Math.sign(this.mag),0,Math.abs(this.mag)*2.302585092994046):this.layer===2?T(Math.sign(this.mag),1,Math.abs(this.mag)+.36221568869946325):T(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}},{key:"logarithm",value:function(t){return this.log(t)}},{key:"pow",value:function(t){var r=v(t),i=this,a=r;if(i.sign===0)return a.eq(0)?G(1,0,1):i;if(i.sign===1&&i.layer===0&&i.mag===1)return i;if(a.sign===0)return G(1,0,1);if(a.sign===1&&a.layer===0&&a.mag===1)return i;var f=i.absLog10().mul(a).pow10();return this.sign===-1?Math.abs(a.toNumber()%2)%2===1?f.neg():Math.abs(a.toNumber()%2)%2===0?f:n.dNaN:f}},{key:"pow10",value:function(){if(!Number.isFinite(this.layer)||!Number.isFinite(this.mag))return n.dNaN;var t=this;if(t.layer===0){var r=Math.pow(10,t.sign*t.mag);if(Number.isFinite(r)&&Math.abs(r)>=.1)return T(1,0,r);if(t.sign===0)return n.dOne;t=G(t.sign,t.layer+1,Math.log10(t.mag))}return t.sign>0&&t.mag>=0?T(t.sign,t.layer+1,t.mag):t.sign<0&&t.mag>=0?T(-t.sign,t.layer+1,-t.mag):n.dOne}},{key:"pow_base",value:function(t){return v(t).pow(this)}},{key:"root",value:function(t){var r=v(t);return this.pow(r.recip())}},{key:"factorial",value:function(){return this.mag<0?this.add(1).gamma():this.layer===0?this.add(1).gamma():this.layer===1?n.exp(n.mul(this,n.ln(this).sub(1))):n.exp(this)}},{key:"gamma",value:function(){if(this.mag<0)return this.recip();if(this.layer===0){if(this.lt(G(1,0,24)))return n.fromNumber(Ke(this.sign*this.mag));var t=this.mag-1,r=.9189385332046727;r=r+(t+.5)*Math.log(t),r=r-t;var i=t*t,a=t,f=12*a,m=1/f,y=r+m;if(y===r||(r=y,a=a*i,f=360*a,m=1/f,y=r-m,y===r))return n.exp(r);r=y,a=a*i,f=1260*a;var u=1/f;return r=r+u,a=a*i,f=1680*a,u=1/f,r=r-u,n.exp(r)}else return this.layer===1?n.exp(n.mul(this,n.ln(this).sub(1))):n.exp(this)}},{key:"lngamma",value:function(){return this.gamma().ln()}},{key:"exp",value:function(){return this.mag<0?n.dOne:this.layer===0&&this.mag<=709.7?n.fromNumber(Math.exp(this.sign*this.mag)):this.layer===0?T(1,1,this.sign*Math.log10(Math.E)*this.mag):this.layer===1?T(1,2,this.sign*(Math.log10(.4342944819032518)+this.mag)):T(1,this.layer+1,this.sign*this.mag)}},{key:"sqr",value:function(){return this.pow(2)}},{key:"sqrt",value:function(){if(this.layer===0)return n.fromNumber(Math.sqrt(this.sign*this.mag));if(this.layer===1)return T(1,2,Math.log10(this.mag)-.3010299956639812);var t=n.div(G(this.sign,this.layer-1,this.mag),G(1,0,2));return t.layer+=1,t.normalize(),t}},{key:"cube",value:function(){return this.pow(3)}},{key:"cbrt",value:function(){return this.pow(1/3)}},{key:"tetrate",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:2,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:G(1,0,1),i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(t===1)return n.pow(this,r);if(t===0)return new n(r);if(this.eq(n.dOne))return n.dOne;if(this.eq(-1))return n.pow(this,r);if(t===Number.POSITIVE_INFINITY){var a=this.toNumber();if(a<=1.444667861009766&&a>=.06598803584531254){if(a>1.444667861009099)return n.fromNumber(Math.E);var f=n.ln(this).neg();return f.lambertw().div(f)}else return a>1.444667861009766?n.fromNumber(Number.POSITIVE_INFINITY):n.dNaN}if(this.eq(n.dZero)){var m=Math.abs((t+1)%2);return m>1&&(m=2-m),n.fromNumber(m)}if(t<0)return n.iteratedlog(r,this,-t,i);r=v(r);var y=t;t=Math.trunc(t);var u=y-t;if(this.gt(n.dZero)&&this.lte(1.444667861009766)&&(y>1e4||!i)){t=Math.min(1e4,t);for(var p=0;p<t;++p){var o=r;if(r=this.pow(r),o.eq(r))return r}if(u!=0||y>1e4){var s=this.pow(r);return y<=1e4||Math.ceil(y)%2==0?r.mul(1-u).add(s.mul(u)):r.mul(u).add(s.mul(1-u))}return r}u!==0&&(r.eq(n.dOne)?this.gt(10)||i?r=this.pow(u):(r=n.fromNumber(n.tetrate_critical(this.toNumber(),u)),this.lt(2)&&(r=r.sub(1).mul(this.minus(1)).plus(1))):this.eq(10)?r=r.layeradd10(u,i):r=r.layeradd(u,this,i));for(var l=0;l<t;++l){if(r=this.pow(r),!isFinite(r.layer)||!isFinite(r.mag))return r.normalize();if(r.layer-this.layer>3)return G(r.sign,r.layer+(t-l-1),r.mag);if(l>1e4)return r}return r}},{key:"iteratedexp",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:2,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:G(1,0,1),i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return this.tetrate(t,r,i)}},{key:"iteratedlog",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(r<0)return n.tetrate(t,-r,this,i);t=v(t);var a=n.fromDecimal(this),f=r;r=Math.trunc(r);var m=f-r;if(a.layer-t.layer>3){var y=Math.min(r,a.layer-t.layer-3);r-=y,a.layer-=y}for(var u=0;u<r;++u){if(a=a.log(t),!isFinite(a.layer)||!isFinite(a.mag))return a.normalize();if(u>1e4)return a}return m>0&&m<1&&(t.eq(10)?a=a.layeradd10(-m,i):a=a.layeradd(-m,t,i)),a}},{key:"slog",value:function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=.001,f=!1,m=!1,y=this.slog_internal(t,i).toNumber(),u=1;u<r;++u){var p=new n(t).tetrate(y,n.dOne,i),o=p.gt(this);if(u>1&&m!=o&&(f=!0),m=o,f?a/=2:a*=2,a=Math.abs(a)*(o?-1:1),y+=a,a===0)break}return n.fromNumber(y)}},{key:"slog_internal",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(t=v(t),t.lte(n.dZero)||t.eq(n.dOne))return n.dNaN;if(t.lt(n.dOne))return this.eq(n.dOne)?n.dZero:this.eq(n.dZero)?n.dNegOne:n.dNaN;if(this.mag<0||this.eq(n.dZero))return n.dNegOne;var i=0,a=n.fromDecimal(this);if(a.layer-t.layer>3){var f=a.layer-t.layer-3;i+=f,a.layer-=f}for(var m=0;m<100;++m)if(a.lt(n.dZero))a=n.pow(t,a),i-=1;else{if(a.lte(n.dOne))return r?n.fromNumber(i+a.toNumber()-1):n.fromNumber(i+n.slog_critical(t.toNumber(),a.toNumber()));i+=1,a=n.log(a,t)}return n.fromNumber(i)}},{key:"layeradd10",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;t=n.fromValue_noAlloc(t).toNumber();var i=n.fromDecimal(this);if(t>=1){i.mag<0&&i.layer>0?(i.sign=0,i.mag=0,i.layer=0):i.sign===-1&&i.layer==0&&(i.sign=1,i.mag=-i.mag);var a=Math.trunc(t);t-=a,i.layer+=a}if(t<=-1){var f=Math.trunc(t);if(t-=f,i.layer+=f,i.layer<0)for(var m=0;m<100;++m){if(i.layer++,i.mag=Math.log10(i.mag),!isFinite(i.mag))return i.sign===0&&(i.sign=1),i.layer<0&&(i.layer=0),i.normalize();if(i.layer>=0)break}}for(;i.layer<0;)i.layer++,i.mag=Math.log10(i.mag);return i.sign===0&&(i.sign=1,i.mag===0&&i.layer>=1&&(i.layer-=1,i.mag=1)),i.normalize(),t!==0?i.layeradd(t,10,r):i}},{key:"layeradd",value:function(t,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=this.slog(r).toNumber(),f=a+t;return f>=0?n.tetrate(r,f,n.dOne,i):Number.isFinite(f)?f>=-1?n.log(n.tetrate(r,f+1,n.dOne,i),r):n.log(n.log(n.tetrate(r,f+2,n.dOne,i),r),r):n.dNaN}},{key:"lambertw",value:function(){if(this.lt(-.3678794411710499))throw Error("lambertw is unimplemented for results less than -1, sorry!");if(this.mag<0)return n.fromNumber(re(this.toNumber()));if(this.layer===0)return n.fromNumber(re(this.sign*this.mag));if(this.layer===1)return ne(this);if(this.layer===2)return ne(this);if(this.layer>=3)return G(this.sign,this.layer-1,this.mag);throw"Unhandled behavior in lambertw()"}},{key:"ssqrt",value:function(){return this.linear_sroot(2)}},{key:"linear_sroot",value:function(t){if(t==1)return this;if(this.eq(n.dInf))return n.dInf;if(!this.isFinite())return n.dNaN;if(t>0&&t<1)return this.root(t);if(t>-2&&t<-1)return n.fromNumber(t).add(2).pow(this.recip());if(t<=0)return n.dNaN;if(t==Number.POSITIVE_INFINITY){var r=this.toNumber();return r<Math.E&&r>tr?this.pow(this.recip()):n.dNaN}if(this.eq(1))return n.dOne;if(this.lt(0))return n.dNaN;if(this.lte("1ee-16"))return t%2==1?this:n.dNaN;if(this.gt(1)){var i=n.dTen;this.gte(n.tetrate(10,t,1,!0))&&(i=this.iteratedlog(10,t-1,!0)),t<=1&&(i=this.root(t));for(var a=n.dZero,f=i.layer,m=i.iteratedlog(10,f,!0),y=m,u=m.div(2),p=!0;p;)u=a.add(m).div(2),n.iteratedexp(10,f,u,!0).tetrate(t,1,!0).gt(this)?m=u:a=u,u.eq(y)?p=!1:y=u;return n.iteratedexp(10,f,u,!0)}else{for(var o=1,s=T(1,10,1),l=T(1,10,1),c=T(1,10,1),g=T(1,1,-16),_=n.dZero,D=T(1,10,1),N=g.pow10().recip(),O=n.dZero,j=N,A=N,C=Math.ceil(t)%2==0,b=0,M=T(1,10,1),Z=!1,L=n.dZero,rt=!1;o<4;){if(o==2){if(C)break;c=T(1,10,1),g=s,o=3,D=T(1,10,1),M=T(1,10,1)}for(Z=!1;g.neq(c);){if(L=g,g.pow10().recip().tetrate(t,1,!0).eq(1)&&g.pow10().recip().lt(.4))N=g.pow10().recip(),j=g.pow10().recip(),A=g.pow10().recip(),O=n.dZero,b=-1,o==3&&(M=g);else if(g.pow10().recip().tetrate(t,1,!0).eq(g.pow10().recip())&&!C&&g.pow10().recip().lt(.4))N=g.pow10().recip(),j=g.pow10().recip(),A=g.pow10().recip(),O=n.dZero,b=0;else if(g.pow10().recip().tetrate(t,1,!0).eq(g.pow10().recip().mul(2).tetrate(t,1,!0)))N=g.pow10().recip(),j=n.dZero,A=N.mul(2),O=N,C?b=-1:b=0;else{for(_=g.mul(12e-17),N=g.pow10().recip(),j=g.add(_).pow10().recip(),O=N.sub(j),A=N.add(O);j.tetrate(t,1,!0).eq(N.tetrate(t,1,!0))||A.tetrate(t,1,!0).eq(N.tetrate(t,1,!0))||j.gte(N)||A.lte(N);)_=_.mul(2),j=g.add(_).pow10().recip(),O=N.sub(j),A=N.add(O);if((o==1&&A.tetrate(t,1,!0).gt(N.tetrate(t,1,!0))&&j.tetrate(t,1,!0).gt(N.tetrate(t,1,!0))||o==3&&A.tetrate(t,1,!0).lt(N.tetrate(t,1,!0))&&j.tetrate(t,1,!0).lt(N.tetrate(t,1,!0)))&&(M=g),A.tetrate(t,1,!0).lt(N.tetrate(t,1,!0)))b=-1;else if(C)b=1;else if(o==3&&g.gt_tolerance(s,1e-8))b=0;else{for(;j.tetrate(t,1,!0).eq_tolerance(N.tetrate(t,1,!0),1e-8)||A.tetrate(t,1,!0).eq_tolerance(N.tetrate(t,1,!0),1e-8)||j.gte(N)||A.lte(N);)_=_.mul(2),j=g.add(_).pow10().recip(),O=N.sub(j),A=N.add(O);A.tetrate(t,1,!0).sub(N.tetrate(t,1,!0)).lt(N.tetrate(t,1,!0).sub(j.tetrate(t,1,!0)))?b=0:b=1}}if(b==-1&&(rt=!0),o==1&&b==1||o==3&&b!=0)if(c.eq(T(1,10,1)))g=g.mul(2);else{var nt=!1;if(Z&&(b==1&&o==1||b==-1&&o==3)&&(nt=!0),g=g.add(c).div(2),nt)break}else if(c.eq(T(1,10,1)))c=g,g=g.div(2);else{var it=!1;if(Z&&(b==1&&o==1||b==-1&&o==3)&&(it=!0),c=c.sub(D),g=g.sub(D),it)break}if(c.sub(g).div(2).abs().gt(D.mul(1.5))&&(Z=!0),D=c.sub(g).div(2).abs(),g.gt("1e18")||g.eq(L))break}if(g.gt("1e18")||!rt||M==T(1,10,1))break;o==1?s=M:o==3&&(l=M),o++}c=s,g=T(1,1,-18);for(var K=g,Y=n.dZero,R=!0;R;)if(c.eq(T(1,10,1))?Y=g.mul(2):Y=c.add(g).div(2),n.pow(10,Y).recip().tetrate(t,1,!0).gt(this)?g=Y:c=Y,Y.eq(K)?R=!1:K=Y,g.gt("1e18"))return n.dNaN;if(Y.eq_tolerance(s,1e-15)){if(l.eq(T(1,10,1)))return n.dNaN;for(c=T(1,10,1),g=l,K=g,Y=n.dZero,R=!0;R;)if(c.eq(T(1,10,1))?Y=g.mul(2):Y=c.add(g).div(2),n.pow(10,Y).recip().tetrate(t,1,!0).gt(this)?g=Y:c=Y,Y.eq(K)?R=!1:K=Y,g.gt("1e18"))return n.dNaN;return Y.pow10().recip()}else return Y.pow10().recip()}}},{key:"pentate",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:2,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:G(1,0,1),i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;r=v(r);var a=t;t=Math.trunc(t);var f=a-t;f!==0&&(r.eq(n.dOne)?(++t,r=n.fromNumber(f)):this.eq(10)?r=r.layeradd10(f,i):r=r.layeradd(f,this,i));for(var m=0;m<t;++m){if(r=this.tetrate(r.toNumber(),n.dOne,i),!isFinite(r.layer)||!isFinite(r.mag))return r.normalize();if(m>10)return r}return r}},{key:"sin",value:function(){return this.mag<0?this:this.layer===0?n.fromNumber(Math.sin(this.sign*this.mag)):G(0,0,0)}},{key:"cos",value:function(){return this.mag<0?n.dOne:this.layer===0?n.fromNumber(Math.cos(this.sign*this.mag)):G(0,0,0)}},{key:"tan",value:function(){return this.mag<0?this:this.layer===0?n.fromNumber(Math.tan(this.sign*this.mag)):G(0,0,0)}},{key:"asin",value:function(){return this.mag<0?this:this.layer===0?n.fromNumber(Math.asin(this.sign*this.mag)):G(Number.NaN,Number.NaN,Number.NaN)}},{key:"acos",value:function(){return this.mag<0?n.fromNumber(Math.acos(this.toNumber())):this.layer===0?n.fromNumber(Math.acos(this.sign*this.mag)):G(Number.NaN,Number.NaN,Number.NaN)}},{key:"atan",value:function(){return this.mag<0?this:this.layer===0?n.fromNumber(Math.atan(this.sign*this.mag)):n.fromNumber(Math.atan(this.sign*(1/0)))}},{key:"sinh",value:function(){return this.exp().sub(this.negate().exp()).div(2)}},{key:"cosh",value:function(){return this.exp().add(this.negate().exp()).div(2)}},{key:"tanh",value:function(){return this.sinh().div(this.cosh())}},{key:"asinh",value:function(){return n.ln(this.add(this.sqr().add(1).sqrt()))}},{key:"acosh",value:function(){return n.ln(this.add(this.sqr().sub(1).sqrt()))}},{key:"atanh",value:function(){return this.abs().gte(1)?G(Number.NaN,Number.NaN,Number.NaN):n.ln(this.add(1).div(n.fromNumber(1).sub(this))).div(2)}},{key:"ascensionPenalty",value:function(t){return t===0?this:this.root(n.pow(10,t))}},{key:"egg",value:function(){return this.add(9)}},{key:"lessThanOrEqualTo",value:function(t){return this.cmp(t)<1}},{key:"lessThan",value:function(t){return this.cmp(t)<0}},{key:"greaterThanOrEqualTo",value:function(t){return this.cmp(t)>-1}},{key:"greaterThan",value:function(t){return this.cmp(t)>0}}],[{key:"fromComponents",value:function(t,r,i){return new n().fromComponents(t,r,i)}},{key:"fromComponents_noNormalize",value:function(t,r,i){return new n().fromComponents_noNormalize(t,r,i)}},{key:"fromMantissaExponent",value:function(t,r){return new n().fromMantissaExponent(t,r)}},{key:"fromMantissaExponent_noNormalize",value:function(t,r){return new n().fromMantissaExponent_noNormalize(t,r)}},{key:"fromDecimal",value:function(t){return new n().fromDecimal(t)}},{key:"fromNumber",value:function(t){return new n().fromNumber(t)}},{key:"fromString",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return new n().fromString(t,r)}},{key:"fromValue",value:function(t){return new n().fromValue(t)}},{key:"fromValue_noAlloc",value:function(t){if(t instanceof n)return t;if(typeof t=="string"){var r=n.fromStringCache.get(t);return r!==void 0?r:n.fromString(t)}else return typeof t=="number"?n.fromNumber(t):n.dZero}},{key:"abs",value:function(t){return v(t).abs()}},{key:"neg",value:function(t){return v(t).neg()}},{key:"negate",value:function(t){return v(t).neg()}},{key:"negated",value:function(t){return v(t).neg()}},{key:"sign",value:function(t){return v(t).sign}},{key:"sgn",value:function(t){return v(t).sign}},{key:"round",value:function(t){return v(t).round()}},{key:"floor",value:function(t){return v(t).floor()}},{key:"ceil",value:function(t){return v(t).ceil()}},{key:"trunc",value:function(t){return v(t).trunc()}},{key:"add",value:function(t,r){return v(t).add(r)}},{key:"plus",value:function(t,r){return v(t).add(r)}},{key:"sub",value:function(t,r){return v(t).sub(r)}},{key:"subtract",value:function(t,r){return v(t).sub(r)}},{key:"minus",value:function(t,r){return v(t).sub(r)}},{key:"mul",value:function(t,r){return v(t).mul(r)}},{key:"multiply",value:function(t,r){return v(t).mul(r)}},{key:"times",value:function(t,r){return v(t).mul(r)}},{key:"div",value:function(t,r){return v(t).div(r)}},{key:"divide",value:function(t,r){return v(t).div(r)}},{key:"recip",value:function(t){return v(t).recip()}},{key:"reciprocal",value:function(t){return v(t).recip()}},{key:"reciprocate",value:function(t){return v(t).reciprocate()}},{key:"mod",value:function(t,r){return v(t).mod(r)}},{key:"modulo",value:function(t,r){return v(t).modulo(r)}},{key:"modular",value:function(t,r){return v(t).modular(r)}},{key:"cmp",value:function(t,r){return v(t).cmp(r)}},{key:"cmpabs",value:function(t,r){return v(t).cmpabs(r)}},{key:"compare",value:function(t,r){return v(t).cmp(r)}},{key:"isNaN",value:function(e){function t(r){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return e=v(e),isNaN(e.sign)||isNaN(e.layer)||isNaN(e.mag)})},{key:"isFinite",value:function(e){function t(r){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return e=v(e),isFinite(e.sign)&&isFinite(e.layer)&&isFinite(e.mag)})},{key:"eq",value:function(t,r){return v(t).eq(r)}},{key:"equals",value:function(t,r){return v(t).eq(r)}},{key:"neq",value:function(t,r){return v(t).neq(r)}},{key:"notEquals",value:function(t,r){return v(t).notEquals(r)}},{key:"lt",value:function(t,r){return v(t).lt(r)}},{key:"lte",value:function(t,r){return v(t).lte(r)}},{key:"gt",value:function(t,r){return v(t).gt(r)}},{key:"gte",value:function(t,r){return v(t).gte(r)}},{key:"max",value:function(t,r){return v(t).max(r)}},{key:"min",value:function(t,r){return v(t).min(r)}},{key:"minabs",value:function(t,r){return v(t).minabs(r)}},{key:"maxabs",value:function(t,r){return v(t).maxabs(r)}},{key:"clamp",value:function(t,r,i){return v(t).clamp(r,i)}},{key:"clampMin",value:function(t,r){return v(t).clampMin(r)}},{key:"clampMax",value:function(t,r){return v(t).clampMax(r)}},{key:"cmp_tolerance",value:function(t,r,i){return v(t).cmp_tolerance(r,i)}},{key:"compare_tolerance",value:function(t,r,i){return v(t).cmp_tolerance(r,i)}},{key:"eq_tolerance",value:function(t,r,i){return v(t).eq_tolerance(r,i)}},{key:"equals_tolerance",value:function(t,r,i){return v(t).eq_tolerance(r,i)}},{key:"neq_tolerance",value:function(t,r,i){return v(t).neq_tolerance(r,i)}},{key:"notEquals_tolerance",value:function(t,r,i){return v(t).notEquals_tolerance(r,i)}},{key:"lt_tolerance",value:function(t,r,i){return v(t).lt_tolerance(r,i)}},{key:"lte_tolerance",value:function(t,r,i){return v(t).lte_tolerance(r,i)}},{key:"gt_tolerance",value:function(t,r,i){return v(t).gt_tolerance(r,i)}},{key:"gte_tolerance",value:function(t,r,i){return v(t).gte_tolerance(r,i)}},{key:"pLog10",value:function(t){return v(t).pLog10()}},{key:"absLog10",value:function(t){return v(t).absLog10()}},{key:"log10",value:function(t){return v(t).log10()}},{key:"log",value:function(t,r){return v(t).log(r)}},{key:"log2",value:function(t){return v(t).log2()}},{key:"ln",value:function(t){return v(t).ln()}},{key:"logarithm",value:function(t,r){return v(t).logarithm(r)}},{key:"pow",value:function(t,r){return v(t).pow(r)}},{key:"pow10",value:function(t){return v(t).pow10()}},{key:"root",value:function(t,r){return v(t).root(r)}},{key:"factorial",value:function(t,r){return v(t).factorial()}},{key:"gamma",value:function(t,r){return v(t).gamma()}},{key:"lngamma",value:function(t,r){return v(t).lngamma()}},{key:"exp",value:function(t){return v(t).exp()}},{key:"sqr",value:function(t){return v(t).sqr()}},{key:"sqrt",value:function(t){return v(t).sqrt()}},{key:"cube",value:function(t){return v(t).cube()}},{key:"cbrt",value:function(t){return v(t).cbrt()}},{key:"tetrate",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:G(1,0,1),a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return v(t).tetrate(r,i,a)}},{key:"iteratedexp",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:G(1,0,1),a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return v(t).iteratedexp(r,i,a)}},{key:"iteratedlog",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:10,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return v(t).iteratedlog(r,i,a)}},{key:"layeradd10",value:function(t,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return v(t).layeradd10(r,i)}},{key:"layeradd",value:function(t,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return v(t).layeradd(r,i,a)}},{key:"slog",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:10,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return v(t).slog(r,100,i)}},{key:"lambertw",value:function(t){return v(t).lambertw()}},{key:"ssqrt",value:function(t){return v(t).ssqrt()}},{key:"linear_sroot",value:function(t,r){return v(t).linear_sroot(r)}},{key:"pentate",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:G(1,0,1),a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return v(t).pentate(r,i,a)}},{key:"sin",value:function(t){return v(t).sin()}},{key:"cos",value:function(t){return v(t).cos()}},{key:"tan",value:function(t){return v(t).tan()}},{key:"asin",value:function(t){return v(t).asin()}},{key:"acos",value:function(t){return v(t).acos()}},{key:"atan",value:function(t){return v(t).atan()}},{key:"sinh",value:function(t){return v(t).sinh()}},{key:"cosh",value:function(t){return v(t).cosh()}},{key:"tanh",value:function(t){return v(t).tanh()}},{key:"asinh",value:function(t){return v(t).asinh()}},{key:"acosh",value:function(t){return v(t).acosh()}},{key:"atanh",value:function(t){return v(t).atanh()}},{key:"affordGeometricSeries",value:function(t,r,i,a){return this.affordGeometricSeries_core(v(t),v(r),v(i),a)}},{key:"sumGeometricSeries",value:function(t,r,i,a){return this.sumGeometricSeries_core(t,v(r),v(i),a)}},{key:"affordArithmeticSeries",value:function(t,r,i,a){return this.affordArithmeticSeries_core(v(t),v(r),v(i),v(a))}},{key:"sumArithmeticSeries",value:function(t,r,i,a){return this.sumArithmeticSeries_core(v(t),v(r),v(i),v(a))}},{key:"efficiencyOfPurchase",value:function(t,r,i){return this.efficiencyOfPurchase_core(v(t),v(r),v(i))}},{key:"randomDecimalForTesting",value:function(t){if(Math.random()*20<1)return G(0,0,0);var r=Math.random()>.5?1:-1;if(Math.random()*20<1)return G(r,0,1);var i=Math.floor(Math.random()*(t+1)),a=i===0?Math.random()*616-308:Math.random()*16;Math.random()>.9&&(a=Math.trunc(a));var f=Math.pow(10,a);return Math.random()>.9&&(f=Math.trunc(f)),T(r,i,f)}},{key:"affordGeometricSeries_core",value:function(t,r,i,a){var f=r.mul(i.pow(a));return n.floor(t.div(f).mul(i.sub(1)).add(1).log10().div(i.log10()))}},{key:"sumGeometricSeries_core",value:function(t,r,i,a){return r.mul(i.pow(a)).mul(n.sub(1,i.pow(t))).div(n.sub(1,i))}},{key:"affordArithmeticSeries_core",value:function(t,r,i,a){var f=r.add(a.mul(i)),m=f.sub(i.div(2)),y=m.pow(2);return m.neg().add(y.add(i.mul(t).mul(2)).sqrt()).div(i).floor()}},{key:"sumArithmeticSeries_core",value:function(t,r,i,a){var f=r.add(a.mul(i));return t.div(2).mul(f.mul(2).plus(t.sub(1).mul(i)))}},{key:"efficiencyOfPurchase_core",value:function(t,r,i){return t.div(r).add(t.div(i))}},{key:"slog_critical",value:function(t,r){return t>10?r-1:n.critical_section(t,r,Qe)}},{key:"tetrate_critical",value:function(t,r){return n.critical_section(t,r,Ve)}},{key:"critical_section",value:function(t,r,i){r*=10,r<0&&(r=0),r>10&&(r=10),t<2&&(t=2),t>10&&(t=10);for(var a=0,f=0,m=0;m<mt.length;++m)if(mt[m]==t){a=i[m][Math.floor(r)],f=i[m][Math.ceil(r)];break}else if(mt[m]<t&&mt[m+1]>t){var y=(t-mt[m])/(mt[m+1]-mt[m]);a=i[m][Math.floor(r)]*(1-y)+i[m+1][Math.floor(r)]*y,f=i[m][Math.ceil(r)]*(1-y)+i[m+1][Math.ceil(r)]*y;break}var u=r-Math.floor(r);return a<=0||f<=0?a*(1-u)+f*u:Math.pow(t,Math.log(a)/Math.log(t)*(1-u)+Math.log(f)/Math.log(t)*u)}}]),n}();k.dZero=G(0,0,0),k.dOne=G(1,0,1),k.dNegOne=G(-1,0,1),k.dTwo=G(1,0,2),k.dTen=G(1,0,10),k.dNaN=G(Number.NaN,Number.NaN,Number.NaN),k.dInf=G(1,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),k.dNegInf=G(-1,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY),k.dNumberMax=T(1,0,Number.MAX_VALUE),k.dNumberMin=T(1,0,Number.MIN_VALUE),k.fromStringCache=new Ge(Je),v=k.fromValue_noAlloc,T=k.fromComponents,G=k.fromComponents_noNormalize,k.fromMantissaExponent,k.fromMantissaExponent_noNormalize;var At=class{get desc(){return this.description}get description(){return this.descriptionFn()}constructor(n){this.id=n.id,this.name=n.name??"",this.descriptionFn=n.description?typeof n.description=="function"?n.description:()=>n.description:()=>"",this.value=n.value,this.order=n.order??99}},Rt=class{constructor(n=1,e){this.addBoost=this.setBoost,e=e?Array.isArray(e)?e:[e]:void 0,this.baseEffect=new k(n),this.boostArray=[],e&&e.forEach(t=>{this.boostArray.push(new At(t))})}getBoosts(n,e){let t=[],r=[];for(let i=0;i<this.boostArray.length;i++)(typeof n=="string"&&n===this.boostArray[i].id||n instanceof RegExp&&n.test(this.boostArray[i].id))&&(t.push(this.boostArray[i]),r.push(i));return e?[t,r]:t}getBoost(n){return this.getBoosts(n)[0]??null}removeBoost(n){for(let e=0;e<this.boostArray.length;e++)if(n===this.boostArray[e].id){this.boostArray.splice(e,1);break}}setBoost(n,e,t,r,i){if(n)if(typeof n=="string"){let a=n,f=e??"",m=t??"",y=r??(o=>o),u=i,p=this.getBoosts(a,!0);p[0][0]?this.boostArray[p[1][0]]=new At({id:a,name:f,description:m,value:y,order:u}):this.boostArray.push(new At({id:a,name:f,description:m,value:y,order:u}))}else{n=Array.isArray(n)?n:[n];for(let a=0;a<n.length;a++){let f=this.getBoosts(n[a].id,!0);f[0][0]?this.boostArray[f[1][0]]=new At(n[a]):this.boostArray.push(new At(n[a]))}}}calculate(n=this.baseEffect){let e=new k(n),t=this.boostArray;t=t.sort((r,i)=>r.order-i.order);for(let r=0;r<t.length;r++)e=t[r].value(e);return e}},Fr=lt(vt()),er=class{constructor(n){this.map=new Map,this.first=void 0,this.last=void 0,this.maxSize=n}get size(){return this.map.size}get(n){let e=this.map.get(n);if(e!==void 0)return e!==this.first&&(e===this.last?(this.last=e.prev,this.last.next=void 0):(e.prev.next=e.next,e.next.prev=e.prev),e.next=this.first,this.first.prev=e,this.first=e),e.value}set(n,e){if(this.maxSize<1)return;if(this.map.has(n))throw new Error("Cannot update existing keys in the cache");let t=new rr(n,e);for(this.first===void 0?(this.first=t,this.last=t):(t.next=this.first,this.first.prev=t,this.first=t),this.map.set(n,t);this.map.size>this.maxSize;){let r=this.last;this.map.delete(r.key),this.last=r.prev,this.last.next=void 0}}},rr=class{constructor(n,e){this.next=void 0,this.prev=void 0,this.key=n,this.value=e}},Ut=25;function ie(n,e,t="geometric",r=Ut){let i=new k(1),a=new k(e);if(n(a).eq(0))return{value:new k(0),lowerBound:new k(0),upperBound:new k(0)};if(n(a).lt(e))return console.warn("The function is not monotonically increasing. (f(n) < n)"),{value:a,lowerBound:a,upperBound:a};for(let m=0;m<r;m++){let y;switch(t){case"arithmetic":case 1:y=i.add(a).div(2);break;case"geometric":case 2:y=i.mul(a).sqrt();break}let u=n(y);if(u.eq(e))return{value:y,lowerBound:y,upperBound:y};u.lt(e)?i=y:a=y}return{value:i,lowerBound:i,upperBound:a}}function nr(n,e,t=0,r=new k("1e-3")){let i=new k,a=new k(e);for(;a.gte(t);a=a.sub(1)){let f=i,m=n(a);i=i.add(m);let y=f.div(i);if(y.lte(1)&&y.gt(new k(1).sub(r)))break}return i}function ir(n,e,t=0,r=Ut){t=new k(t),e=new k(e);let i=new k(0),a=e.sub(t).div(r);for(let f=0;f<r;f++){let m=t.add(a.mul(f)),y=t.add(a.mul(f+1));i=i.add(n(m).add(n(y)).div(2).mul(a))}return i}function ae(n,e,t=0,r,i){return t=new k(t),e=new k(e),e.sub(t).lte(Ut)?nr(n,e,t,r):ir(n,e,t,i)}function se(n,e,t,r,i,a,f=!1){n=new k(n),t=new k(t??e.level),r=new k(r??n);let m=r.sub(t);if(m.lte(0))return console.warn("calculateUpgrade: Invalid target: ",m),[new k(0),new k(0)];if(f=(typeof e.el=="function"?e.el():e.el)??f,m.eq(1)){let o=e.cost(e.level),s=n.gte(o),l=[new k(0),new k(0)];return f?(l[0]=s?new k(1):new k(0),l):(l=[s?new k(1):new k(0),s?o:new k(0)],l)}if(e.costBulk){let[o,s]=e.costBulk(n,e.level,m),l=n.gte(s);return[l?o:new k(0),l&&!f?s:new k(0)]}if(f){let o=c=>e.cost(c.add(t)),s=k.min(r,ie(o,n,i,a).value.floor()),l=new k(0);return[s,l]}let y=ie(o=>ae(e.cost,o,t),n,i,a).value.floor(),u=ae(e.cost,y,t);return[y.sub(t).add(1).max(0),u]}function zt(n){return n=new k(n),`${n.sign}/${n.mag}/${n.layer}`}function oe(n,e){return`sum/${zt(n)}/${zt(e)}}`}function ue(n){return`el/${zt(n)}`}var Mt=class{constructor(n){n=n??{},this.id=n.id,this.level=n.level?new k(n.level):new k(1)}};_t([ze()],Mt.prototype,"id",2),_t([Tt(()=>k)],Mt.prototype,"level",2);var ar=class Se{static{this.cacheSize=63}get data(){return this.dataPointerFn()}get description(){return this.descriptionFn()}get level(){return((this??{data:{level:new k(1)}}).data??{level:new k(1)}).level}set level(e){this.data.level=new k(e)}constructor(e,t,r){let i=typeof t=="function"?t():t;this.dataPointerFn=typeof t=="function"?t:()=>i,this.cache=new er(r??Se.cacheSize),this.id=e.id,this.name=e.name??e.id,this.descriptionFn=e.description?typeof e.description=="function"?e.description:()=>e.description:()=>"",this.cost=e.cost,this.costBulk=e.costBulk,this.maxLevel=e.maxLevel,this.effect=e.effect,this.el=e.el}getCached(e,t,r){return e==="sum"?this.cache.get(oe(t,r)):this.cache.get(ue(t))}setCached(e,t,r,i){let a=e==="sum"?{id:this.id,el:!1,start:new k(t),end:new k(r),cost:new k(i)}:{id:this.id,el:!0,level:new k(t),cost:new k(r)};return e==="sum"?this.cache.set(oe(t,r),a):this.cache.set(ue(t),a),a}},gt=class{constructor(){this.value=new k(0),this.upgrades={}}};_t([Tt(()=>k)],gt.prototype,"value",2),_t([Tt(()=>Mt)],gt.prototype,"upgrades",2);var fe=class{get pointer(){return this.pointerFn()}get value(){return this.pointer.value}set value(n){this.pointer.value=n}constructor(n=new gt,e,t={defaultVal:new k(0),defaultBoost:new k(1)}){this.defaultVal=t.defaultVal,this.defaultBoost=t.defaultBoost,this.pointerFn=typeof n=="function"?n:()=>n,this.boost=new Rt(this.defaultBoost),this.pointer.value=this.defaultVal,this.upgrades={},e&&this.addUpgrade(e),this.upgrades=this.upgrades}onLoadData(){for(let n of Object.values(this.upgrades))n.effect?.(n.level,n)}reset(n=!0,e=!0){if(n&&(this.value=this.defaultVal),e)for(let t of Object.values(this.upgrades))t.level=new k(0)}gain(n=1e3){let e=this.boost.calculate().mul(new k(n).div(1e3));return this.pointer.value=this.pointer.value.add(e),e}pointerAddUpgrade(n){let e=new Mt(n);return this.pointer.upgrades[e.id]=e,e}pointerGetUpgrade(n){return this.pointer.upgrades[n]??null}getUpgrade(n){return this.upgrades[n]??null}addUpgrade(n,e=!0){Array.isArray(n)||(n=[n]);let t={};for(let r of n){let i=this.pointerAddUpgrade(r),a=new ar(r,()=>this.pointerGetUpgrade(r.id));a.effect&&e&&a.effect(a.level,a),t[r.id]=a,this.upgrades[r.id]=a}return Object.values(t)}updateUpgrade(n,e){let t=this.getUpgrade(n);t!==null&&(t.name=e.name??t.name,t.cost=e.cost??t.cost,t.maxLevel=e.maxLevel??t.maxLevel,t.effect=e.effect??t.effect)}calculateUpgrade(n,e,t,r){let i=this.getUpgrade(n);return i===null?(console.warn(`Upgrade "${n}" not found.`),[new k(0),new k(0)]):se(this.value,i,i.level,e?i.level.add(e):void 0,t,r)}getNextCost(n,e=0,t,r){let i=this.getUpgrade(n);if(i===null)return console.warn(`Upgrade "${n}" not found.`),new k(0);let a=se(this.value,i,i.level,i.level.add(e),t,r)[1];return i.cost(i.level.add(a))}buyUpgrade(n,e,t,r){let i=this.getUpgrade(n);if(i===null)return console.warn(`Upgrade "${n}" not found.`),!1;let[a,f]=this.calculateUpgrade(n,e,t,r);return a.lte(0)?!1:(this.pointer.value=this.pointer.value.sub(f),i.level=i.level.add(a),i.effect?.(i.level,i),!0)}},Dr=lt(vt()),Ft=class{constructor(n=0){this.value=new k(n)}};_t([Tt(()=>k)],Ft.prototype,"value",2);var sr=class{get pointer(){return this.pointerFn()}constructor(n,e=!0,t=0){this.initial=new k(t),n??=new Ft(this.initial),this.pointerFn=typeof n=="function"?n:()=>n,this.boost=e?new Rt(this.initial):null}update(){console.warn("AttributeStatic.update is deprecated and will be removed in the future. The value is automatically updated when accessed."),this.boost&&(this.pointer.value=this.boost.calculate())}get value(){return this.boost&&(this.pointer.value=this.boost.calculate()),this.pointer.value}set value(n){if(this.boost)throw new Error("Cannot set value of attributeStatic when boost is enabled.");this.pointer.value=n}},Gt=class{constructor(n){this.configOptionTemplate=n}parse(n){if(typeof n>"u")return this.configOptionTemplate;function e(t,r){for(let i in r)typeof t[i]>"u"?t[i]=r[i]:typeof t[i]=="object"&&typeof r[i]=="object"&&!Array.isArray(t[i])&&!Array.isArray(r[i])&&(t[i]=e(t[i],r[i]));return t}return e(n,this.configOptionTemplate)}get options(){return this.configOptionTemplate}},or={autoAddInterval:!0,fps:30,pixiApp:void 0},Lr="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890 ".split("").concat(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"]),le=class _e{constructor(e){if(this.addKeys=this.addKey,this.keysPressed=[],this.binds=[],this.tickers=[],this.config=_e.configManager.parse(e),this.config.autoAddInterval)if(this.config.pixiApp)this.config.pixiApp.ticker.add(t=>{for(let r of this.tickers)r(t)});else{let t=this.config.fps?this.config.fps:30;this.tickerInterval=setInterval(()=>{for(let r of this.tickers)r(1e3/t)},1e3/t)}typeof document>"u"||(this.tickers.push(t=>{for(let r of this.binds)(r.onDownContinuous||r.fn)&&this.isPressing(r.name)&&(r.onDownContinuous?.(t),r.fn?.(t))}),document.addEventListener("keydown",t=>{this.logKey(t,!0),this.onAll("down",t.key)}),document.addEventListener("keyup",t=>{this.logKey(t,!1),this.onAll("up",t.key)}),document.addEventListener("keypress",t=>{this.onAll("press",t.key)}))}static{this.configManager=new Gt(or)}changeFps(e){this.config.fps=e,this.tickerInterval?(clearInterval(this.tickerInterval),this.tickerInterval=setInterval(()=>{for(let t of this.tickers)t(1e3/e)},1e3/e)):this.config.pixiApp&&(this.config.pixiApp.ticker.maxFPS=e)}logKey(e,t){let r=e.key;t&&!this.keysPressed.includes(r)?this.keysPressed.push(r):!t&&this.keysPressed.includes(r)&&this.keysPressed.splice(this.keysPressed.indexOf(r),1)}onAll(e,t){for(let r of this.binds)e==="down"&&r.key===t&&r.onDown&&r.onDown(),e==="press"&&r.key===t&&r.onPress&&r.onPress(),e==="up"&&r.key===t&&r.onUp&&r.onUp()}isPressing(e){for(let t=0;t<this.binds.length;t++){let r=this.binds[t];if(r.name===e)return this.keysPressed.includes(r.key)}return!1}getBind(e){return this.binds.find(t=>t.name===e)}addKey(e,t,r){e=typeof e=="string"?[{name:e,key:t,fn:r}]:e,e=Array.isArray(e)?e:[e];for(let i of e){let a=this.getBind(i.name);if(a){Object.assign(a,i);continue}this.binds.push(i)}}},ur={autoAddInterval:!0,fps:30,pixiApp:void 0},ce=class Ae{constructor(e){if(this.addEvent=this.setEvent,this.config=Ae.configManager.parse(e),this.events={},this.config.autoAddInterval)if(this.config.pixiApp)this.config.pixiApp.ticker.add(()=>{this.tickerFunction()});else{let t=this.config.fps??30;this.tickerInterval=setInterval(()=>{this.tickerFunction()},1e3/t)}}static{this.configManager=new Gt(ur)}tickerFunction(){let e=Date.now();for(let t of Object.values(this.events))if(t.type==="interval"){if(e-t.intervalLast>=t.delay){let r=e-t.intervalLast;t.callbackFn(r),t.intervalLast=e}}else if(t.type==="timeout"){let r=e-t.timeCreated;e-t.timeCreated>=t.delay&&(t.callbackFn(r),delete this.events[t.name])}}changeFps(e){this.config.fps=e,this.tickerInterval?(clearInterval(this.tickerInterval),this.tickerInterval=setInterval(()=>{this.tickerFunction()},1e3/e)):this.config.pixiApp&&(this.config.pixiApp.ticker.maxFPS=e)}timeWarp(e){for(let t of Object.values(this.events))t.type==="interval"&&(t.intervalLast-=e),t.type==="timeout"&&(t.timeCreated-=e)}setEvent(e,t,r,i){this.events[e]=(()=>{switch(t){case"interval":return{name:e,type:t,delay:typeof r=="number"?r:r.toNumber(),callbackFn:i,timeCreated:Date.now(),intervalLast:Date.now()};case"timeout":default:return{name:e,type:t,delay:typeof r=="number"?r:r.toNumber(),callbackFn:i,timeCreated:Date.now()}}})()}removeEvent(e){delete this.events[e]}},qr=lt(vt()),he=lt(Te()),Bt=lt(Le()),me=class{constructor(n){this.data={},this.static={},this.eventsOnLoad=[],this.gameRef=typeof n=="function"?n():n}addEventOnLoad(n){this.eventsOnLoad.push(n)}setData(n,e){typeof this.data[n]>"u"&&this.normalData&&console.warn("After initializing data, you should not add new properties to data."),this.data[n]=e;let t=()=>this.data;return{get value(){return t()[n]},set value(r){t()[n]=r},setValue(r){t()[n]=r}}}getData(n){return this.data[n]}setStatic(n,e){return typeof this.static[n]>"u"&&this.normalData&&console.warn("After initializing data, you should not add new properties to staticData."),this.static[n]=e,this.static[n]}getStatic(n){return this.static[n]}init(){this.normalData=this.data,this.normalDataPlain=Dt(this.data)}compileDataRaw(n=this.data){let e=Dt(n),t=(0,Bt.default)(`${this.gameRef.config.name.id}/${JSON.stringify(e)}`),r;try{r="8.0.0"}catch{r="8.0.0"}return[{hash:t,game:{title:this.gameRef.config.name.title,id:this.gameRef.config.name.id,version:this.gameRef.config.name.version},emath:{version:r}},e]}compileData(n=this.data){let e=JSON.stringify(this.compileDataRaw(n));return(0,he.compressToBase64)(e)}decompileData(n=window?.localStorage.getItem(`${this.gameRef.config.name.id}-data`)){if(!n)return null;let e;try{return e=JSON.parse((0,he.decompressFromBase64)(n)),e}catch(t){if(t instanceof SyntaxError)console.error(`Failed to decompile data (corrupted) "${n}":`,t);else throw t;return null}}validateData(n){let[e,t]=n;if(typeof e=="string")return(0,Bt.default)(`${this.gameRef.config.name.id}/${JSON.stringify(t)}`)===e;let r=e.hash,i=(0,Bt.default)(`${this.gameRef.config.name.id}/${JSON.stringify(t)}`);return r===i}resetData(n=!1){if(!this.normalData)throw new Error("dataManager.resetData(): You must call init() before writing to data.");this.data=this.normalData,this.saveData(),n&&window?.location.reload()}saveData(n=this.compileData()){if(!n)throw new Error("dataManager.saveData(): Data to save is empty.");if(!window.localStorage)throw new Error("dataManager.saveData(): Local storage is not supported. You can use compileData() instead to implement a custom save system.");window.localStorage.setItem(`${this.gameRef.config.name.id}-data`,n)}exportData(){let n=this.compileData();if(prompt("Download save data?:",n)!=null){let e=new Blob([n],{type:"text/plain"}),t=document.createElement("a");t.href=URL.createObjectURL(e),t.download=`${this.gameRef.config.name.id}-data.txt`,t.textContent=`Download ${this.gameRef.config.name.id}-data.txt file`,document.body.appendChild(t),t.click(),document.body.removeChild(t)}}parseData(n=this.decompileData(),e=!0){if(e&&(!this.normalData||!this.normalDataPlain))throw new Error("dataManager.parseData(): You must call init() before writing to data.");if(!n)return null;let[,t]=n;function r(p){return typeof p=="object"&&p?.constructor===Object}let i=(p,o)=>Object.prototype.hasOwnProperty.call(p,o);function a(p,o,s){let l=s;for(let c in p)if(i(p,c)&&!i(s,c)&&(l[c]=p[c]),o[c]instanceof gt){let g=p[c],_=s[c];if(Array.isArray(_.upgrades)){let D=_.upgrades;_.upgrades={};for(let N of D)_.upgrades[N.id]=N.level}_.upgrades={...g.upgrades,..._.upgrades},l[c]=_}else r(p[c])&&r(s[c])&&(l[c]=a(p[c],o[c],s[c]));return l}let f=e?a(this.normalDataPlain,this.normalData,t):t,m=Object.getOwnPropertyNames(new Mt({id:"",level:new k(0)}));function y(p,o){let s=Qt(p,o);if(s instanceof gt)for(let l in s.upgrades){let c=s.upgrades[l];if(!c||!m.every(g=>Object.getOwnPropertyNames(c).includes(g))){delete s.upgrades[l];continue}s.upgrades[l]=Qt(Mt,c)}if(!s)throw new Error(`Failed to convert ${p.name} to class instance.`);return s}function u(p,o){let s=o;for(let l in p){if(!o[l]){console.warn(`Missing property "${l}" in loaded data.`);continue}if(!r(o[l]))continue;let c=p[l].constructor;if(c===Object){s[l]=u(p[l],o[l]);continue}s[l]=y(c,o[l])}return s}return f=u(this.normalData,f),f}loadData(n=this.decompileData()){if(n=typeof n=="string"?this.decompileData(n):n,!n)return null;let e=this.validateData([n[0],Dt(n[1])]),t=this.parseData(n);if(!t)return null;this.data=t;for(let r of this.eventsOnLoad)r();return e}},fr=class{get data(){return this.dataPointer()}get static(){return this.staticPointer()}constructor(n,e,t,r){this.dataPointer=typeof n=="function"?n:()=>n,this.staticPointer=typeof e=="function"?e:()=>e,this.game=t,this.name=r,this.game?.dataManager.addEventOnLoad(()=>{this.static.onLoadData()})}get value(){return this.data.value}},lr=class{constructor(n,e,t){this.data=typeof n=="function"?n():n,this.static=typeof e=="function"?e():e,this.game=t}get value(){return this.static.value}set value(n){this.data.value=n}},cr=class{constructor(n,e){this.currenciesToReset=Array.isArray(n)?n:[n],this.extender=Array.isArray(e)?e:e?[e]:[],this.id=Symbol()}reset(){this.onReset?.(),this.currenciesToReset.forEach(n=>{n.static.reset()}),this.extender.forEach(n=>{n&&n.id!==this.id&&n.reset()})}},hr={mode:"production",name:{title:"",id:"",version:"0.0.0"},settings:{framerate:30},initIntervalBasedManagers:!0},mr=class xe{static{this.configManager=new Gt(hr)}constructor(e){this.config=xe.configManager.parse(e),this.dataManager=new me(this),this.keyManager=new le({autoAddInterval:this.config.initIntervalBasedManagers,fps:this.config.settings.framerate}),this.eventManager=new ce({autoAddInterval:this.config.initIntervalBasedManagers,fps:this.config.settings.framerate}),this.tickers=[]}init(){this.dataManager.init()}changeFps(e){this.keyManager.changeFps(e),this.eventManager.changeFps(e)}addCurrency(e){return this.dataManager.setData(e,{currency:new gt}),this.dataManager.setStatic(e,{currency:new fe(()=>this.dataManager.getData(e).currency)}),new fr(()=>this.dataManager.getData(e).currency,()=>this.dataManager.getStatic(e).currency,this,e)}addAttribute(e,t=!0,r=0){let i=this.dataManager.setData(e,new Ft(r)),a=this.dataManager.setStatic(e,new sr(this.dataManager.getData(e),t,r));return new lr(this.dataManager.getData(e),this.dataManager.getStatic(e),this)}addReset(e,t){return new cr(e,t)}},Pr=lt(vt()),ge=class{constructor(n,e,t){this.x=n,this.y=e,this.properties=t??{}}setValue(n,e){return this.properties[n]=e,e}getValue(n){return this.properties[n]}},gr=class{constructor(n,e,t){this.xSize=n,this.ySize=e,this.cells=[];for(let r=0;r<e;r++){this.cells[r]=[];for(let i=0;i<n;i++)this.cells[r][i]=new ge(i,r,t)}}getAll(){let n=[];for(let e=0;e<this.ySize;e++)for(let t=0;t<this.xSize;t++)n.push(this.cells[e][t]);return n}all(){return this.getAll()}getAllX(n){let e=[];for(let t=0;t<this.ySize;t++)e.push(this.cells[t][n]);return e}allX(n){return this.getAllX(n)}getAllY(n){return this.cells[n]}allY(n){return this.getAllY(n)}getCell(n,e){return this.cells[e][n]}setCell(n,e,t){this.cells[e][n]=t}getAdjacent(n,e){let t=[];return t[0]=this.getCell(n,e+1),t[1]=this.getCell(n+1,e),t[2]=this.getCell(n,e-1),t[3]=this.getCell(n-1,e+1),t}getDiagonal(n,e){let t=[];return t[0]=this.getCell(n-1,e+1),t[1]=this.getCell(n+1,e+1),t[2]=this.getCell(n+1,e-1),t[3]=this.getCell(n-1,e-1),t}getEncircling(n,e){return this.getAdjacent(n,e).concat(this.getDiagonal(n,e))}static getDistance(n,e,t,r){return Math.abs(Math.sqrt(Math.pow(t-n,2)+Math.pow(r-e,2)))}},dr={classes:{boost:Rt,currency:gt,currencyStatic:fe,attribute:Ft,grid:gr,gridCell:ge}},vr={...dr,game:mr,managers:{keyManager:le,eventManager:ce,dataManager:me}};if(typeof st.exports=="object"&&typeof kt=="object"){var pr=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Object.getOwnPropertyNames(e))!Object.prototype.hasOwnProperty.call(n,i)&&i!==t&&Object.defineProperty(n,i,{get:()=>e[i],enumerable:!(r=Object.getOwnPropertyDescriptor(e,i))||r.enumerable});return n};st.exports=pr(st.exports,kt)}return st.exports});
/*! Bundled license information:

reflect-metadata/Reflect.js:
  (*! *****************************************************************************
  Copyright (C) Microsoft. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0
  
  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.
  
  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** *)

is-buffer/index.js:
  (*!
   * Determine if an object is a Buffer
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)
*/
